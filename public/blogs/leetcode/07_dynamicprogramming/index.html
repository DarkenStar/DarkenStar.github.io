<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>07 DynamicProgramming | WITHER</title>
<meta name="keywords" content="">
<meta name="description" content="Algorithm questions about dynamic programming.">
<meta name="author" content="WITHER">
<link rel="canonical" href="http://localhost:1313/blogs/leetcode/07_dynamicprogramming/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.dd3b5b907a50db3238b81d49d094cf1c04a091227797dc9cfde4e2fa3f35df49.css" integrity="sha256-3TtbkHpQ2zI4uB1J0JTPHASgkSJ3l9yc/eTi&#43;j8130k=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/blogs/leetcode/07_dynamicprogramming/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath: [['\\(', '\\)'], ['$', '$']]  
    }
  };
</script>




<script src="https://cdn.bootcdn.net/ajax/libs/mermaid/9.1.6/mermaid.min.js"></script>
<script>
    mermaid.initialize({
        startOnLoad: true,
        theme: localStorage.getItem("pref-theme") === "dark" ? "dark" : "forest" 
    });
</script>

<meta property="og:url" content="http://localhost:1313/blogs/leetcode/07_dynamicprogramming/">
  <meta property="og:site_name" content="WITHER">
  <meta property="og:title" content="07 DynamicProgramming">
  <meta property="og:description" content="Algorithm questions about dynamic programming.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blogs">
    <meta property="article:published_time" content="2025-08-07T09:28:01+08:00">
    <meta property="article:modified_time" content="2025-09-19T09:20:48+08:00">
    <meta property="article:tag" content="DynamicProgramming">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="07 DynamicProgramming">
<meta name="twitter:description" content="Algorithm questions about dynamic programming.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Blogs",
      "item": "http://localhost:1313/blogs/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Leetcode",
      "item": "http://localhost:1313/blogs/leetcode/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "07 DynamicProgramming",
      "item": "http://localhost:1313/blogs/leetcode/07_dynamicprogramming/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "07 DynamicProgramming",
  "name": "07 DynamicProgramming",
  "description": "Algorithm questions about dynamic programming.",
  "keywords": [
    ""
  ],
  "articleBody": "Preliminary 198. House Robber é¢˜ç›®ç½‘å€. åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ˜¯çŠ¶æ€å®šä¹‰å’ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå¯¹äºå­é›†å‹å›æº¯æœ‰é€‰/ä¸é€‰ä»¥åŠé€‰å“ªä¸ªè¿™ä¸¤ç§æ€è·¯ï¼Œå¯¹äº DP ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å¯¹äºæœ¬é¢˜ä»ç¬¬ä¸€ä¸ªæˆ–è€…æœ€åä¸€ä¸ªæˆ¿å­è¿›è¡Œæ€è€ƒæ˜¯æœ€å®¹æ˜“çš„ã€‚å¦‚æœé€‰ï¼Œé‚£ä¹ˆå‰©ä¸‹ n-2 ä¸ªæˆ¿å­ï¼›å¦‚æœä¸é€‰ï¼Œé‚£ä¹ˆå‰©ä¸‹ n-1 ä¸ªæˆ¿å­ã€‚\nè¿™é‡Œä»æœ€åä¸€ä¸ªæˆ¿å­å¼€å§‹ï¼Œå› æ­¤æˆ‘ä»¬çš„å›æº¯ä¸‰é—®å°±æ˜¯\nå½“å‰æ“ä½œ: æšä¸¾ç¬¬ i ä¸ªæˆ¿å­é€‰ä¸é€‰ã€‚ å­é—®é¢˜: ä»å‰ i ä¸ªæˆ¿å­ä¸­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œã€‚ ä¸‹ä¸€ä¸ªå­é—®é¢˜: åˆ†ç±»è®¨è®º: é€‰: ä»å‰ i-1 ä¸ªæˆ¿å­ä¸­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œã€‚ ä¸é€‰: ä»å‰ i-2 ä¸ªæˆ¿å­ä¸­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œã€‚ æˆ‘ä»¬çš„å›æº¯æ¨¡æ¿å¯ä»¥å†™ä½œ dfs(i) = max(dfs(i-1), dfs(i-2) + nums[i]).\nåœ¨å®šä¹‰ DFS æˆ–è€… DP æ•°ç»„çš„å«ä¹‰æ—¶ï¼Œåªèƒ½è¡¨ç¤ºä»ä¸€äº›å…ƒç´ ä¸­ç®—å‡ºçš„ç»“æœï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç»“æœä¸­ç®—å‡ºçš„ç»“æœã€‚æ³¨æ„è¿™é‡Œæ²¡æœ‰æŠŠå¾—åˆ°çš„é‡‘é¢ä½œä¸ºé€’å½’çš„è¾“å…¥å‚æ•°ï¼Œè€Œæ˜¯ä½œä¸ºè¿”å›å€¼ã€‚\nclass Solution { public: int dfs(int i, vector\u003cint\u003e\u0026 nums) { if (i \u003c 0) return 0; return max(dfs(i-1, nums), dfs(i-2, nums) + nums[i]); } int rob(vector\u003cint\u003e\u0026 nums) { int n = nums.size(); return dfs(n - 1, nums); } }; ç”±äºå›æº¯çš„æ—¶é—´å¤æ‚åº¦æ˜¯æŒ‡æ•°çº§åˆ«çš„ï¼Œä¸Šè¿°ç®—æ³•ä¼šè¶…æ—¶ã€‚ä»”ç»†è§‚å¯Ÿæœç´¢æ ‘ä¼šå‘ç°ï¼Œç¬¬ä¸€æ¬¡é€‰äº†åä¼šè¿›è¡Œ dfs(2)ï¼Œç¬¬ä¸€æ¬¡ä¸é€‰ç¬¬äºŒæ¬¡ä¹Ÿä¸é€‰åˆä¼šè¿›è¡Œ dfs(2)ï¼Œå¯¼è‡´äº†é‡å¤è®¡ç®—ã€‚ä¼˜åŒ–æ–¹æ³•æ˜¯ç¬¬ä¸€æ¬¡è®¡ç®—çš„æ—¶å€™å¯ä»¥é€šè¿‡ä¸€ä¸ªæ•°ç»„æ¥è®°å½•ç»“æœï¼Œå°†é€’å½’è®¡ç®—çš„ç»“æœä¿ç•™ä¸‹æ¥ï¼Œé‚£ä¹ˆä¸‹æ¬¡é€’å½’åˆ°åŒæ ·å…¥å‚çš„æ—¶å€™ï¼Œå°±ç›´æ¥è¿”å›å…ˆå‰ä¿å­˜çš„ç»“æœã€‚è¿™æ ·æ ‘ä¸­åªæœ‰ n ä¸ªèŠ‚ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦å¾—åˆ°ä¼˜åŒ–ã€‚\nclass Solution { public: int dfs(int i, vector\u003cint\u003e\u0026 nums, vector\u003cint\u003e\u0026 cache) { if (i \u003c 0) return 0; if (cache[i] != -1) // find in cache return cache[i]; int res = max(dfs(i-1, nums, cache), dfs(i-2, nums, cache) + nums[i]); cache[i] = res; // reserve result return res; } int rob(vector\u003cint\u003e\u0026 nums) { int n = nums.size(); vector\u003cint\u003e cache(n, -1); return dfs(n - 1, nums, cache); } }; å…³äºæ—¶é—´å¤æ‚åº¦çš„è®¡ç®—æœ‰ä¸€ä¸ªå…¬å¼: çŠ¶æ€ä¸ªæ•° x å•æ¬¡çŠ¶æ€è®¡ç®—æ—¶é—´ã€‚è¿™é‡ŒçŠ¶æ€ä¸ªæ•°æ˜¯ $O(n)$ï¼Œå•è¯çŠ¶æ€è®¡ç®—æ—¶é—´æ˜¯ $O(1)$ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$. ä½¿ç”¨äº†ä¸€ä¸ª cache æ•°ç»„ï¼Œç©ºé—´å¤æ‚åº¦ä¸º $O(n)$.\nè§‚å¯Ÿå¯å‘ç°è¿™é‡Œçš„ max è®¡ç®—å‘ç”Ÿåœ¨ dfs è°ƒç”¨ç»“æŸä¹‹åï¼Œä¹Ÿå°±æ˜¯é€’å½’ä¸­å½’çš„è¿‡ç¨‹ã€‚å†æ¬¡è§‚å¯Ÿæœç´¢æ ‘ä¼šå‘ç° dfs(0) å’Œ dfs(1) å½’åˆ° dfs(2)ï¼Œdfs(1) å’Œ dfs(2) å½’åˆ° dfs(3). æ—¢ç„¶çŸ¥é“å“ªäº›ç‚¹ä¼šå½’åˆ°å“ªä¸ªç‚¹ï¼Œå¹²è„†ç›´æ¥å»æ‰é€’å½’ä¸­çš„é€’ï¼Œåªä¿ç•™å½’çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥ä»æœ€ä¸‹é¢å‘ä¸Šè®¡ç®—ï¼Œè¿™å°±æ˜¯é€’æ¨ã€‚å…·ä½“æ¥è¯´å°±æ˜¯å°† dfs æ”¹æˆæ•°ç»„ï¼Œé€’å½’æ”¹æˆå¾ªç¯çš„å½¢å¼ï¼Œä½†è¿™æ ·éœ€è¦å¯¹é€’å½’è¾¹ç•Œä¹Ÿå°±æ˜¯ i=0 å’Œ i=1 ç‰¹æ®Šå¤„ç†ï¼Œå¦åˆ™ä¼šå‡ºç°è´Ÿæ•°ä¸‹æ ‡ã€‚\n$$ \\begin{aligned} dfs(i)\u0026=\\max\\left(dfs(i-1),dfs(i-2)+nums[i]\\right)\\\\ f[i]\u0026=\\max\\left(f[i-1],f[i-2]+nums[i]\\right)\\\\ f[i+2]\u0026=\\max\\left(f[i+1],f[i]+nums[i]\\right)\\end{aligned} $$class Solution { public: int rob(vector\u003cint\u003e\u0026 nums) { int n = nums.size(); vector\u003cint\u003e f(n + 2, 0); for (int i = 0; i \u003c nums.size(); i++) { f[i + 2] = max(f[i + 1], f[i] + nums[i]); } return f[n + 1]; } }; ä¸Šè¿°åšæ³•çš„ç©ºé—´å¤æ‚åº¦ä»ä¸º $O(n)$ï¼Œå†è§‚å¯Ÿé€’æ¨å…¬å¼å¯å‘ç°å½“å‰çŠ¶æ€çš„å€¼åªä¾èµ–äºä¸Šä¸€ä¸ªçŠ¶æ€å’Œä¸Šä¸Šä¸ªçŠ¶æ€ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åªä¿ç•™ä¸¤ä¸ªçŠ¶æ€å€¼ï¼Œåœ¨åœ°æ¨è¿‡ç¨‹ä¸­ä¸æ–­æ›´æ–°ã€‚æœ€åè¿”å› f1ï¼Œå› ä¸ºå®ƒæ˜¯æœ€åä¸€æ¬¡ç®—å‡ºçš„ newF.\n$$ \\begin{aligned}\u0026\\text{å½“å‰}=\\max (\\text{ä¸Šä¸€ä¸ª,ä¸Šä¸Šä¸€ä¸ª}+nums[i])\\\\\u0026f_0\\text{ è¡¨ç¤ºä¸Šä¸Šä¸€ä¸ª,}f_1\\text{ è¡¨ç¤ºä¸Šä¸€ä¸ª}\\\\\u0026newF=\\max\\left(f_1,f_0+nums[i]\\right)\\\\\u0026f_0=f_1\\\\\u0026f_1=newF\\end{aligned} $$class Solution { public: int rob(vector\u003cint\u003e\u0026 nums) { int n = nums.size(); int f0 = 0, f1 = 0; for (int i = 0; i \u003c nums.size(); i++) { int newF = max(f1, f0 + nums[i]); f0 = f1; f1 = newF; } return f1; } }; 70. Climbing Stairs é¢˜ç›®ç½‘å€. çˆ¬ n é˜¶æ¥¼æ¢¯çš„æ–¹æ³•æ•°é‡ï¼Œç­‰äº 2 éƒ¨åˆ†ä¹‹å’Œï¼š\nå…ˆçˆ¬ä¸€æ­¥ï¼ŒåŠ ä¸Šåé¢çš„ n-1 é˜¶æ¥¼æ¢¯çˆ¬æ³•ã€‚ å…ˆçˆ¬ä¸¤æ­¥ï¼ŒåŠ ä¸Šåé¢çš„ n-2 é˜¶æ¥¼æ¢¯çˆ¬æ³•ã€‚ å› æ­¤é€’æ¨å…¬å¼æœ‰ f(n) = f(n-1) + f(n-2). åˆå§‹åŒ– f0=0 å¯ä»¥ç†è§£ä¸ºå¼€å§‹ä¸ç”¨çˆ¬å°± 1 ç§æ–¹æ³•ã€‚\nclass Solution { public: int climbStairs(int n) { // çˆ¬åˆ° n-1 é˜¶çš„æ–¹å¼ + çˆ¬åˆ° n-2 é˜¶çš„æ–¹å¼ // f(n) = f(n-1) + f(n-2) int f0 = 0, f1 = 1; for (int i = 1; i \u003c= n; i++) { int newF = f0 + f1; f0 = f1; f1 = newF; } return f1; } }; 746. Min Cost Climbing Stairs é¢˜ç›®ç½‘å€. çˆ¬ n é˜¶æ¥¼æ¢¯çš„æœ€å°èŠ±è´¹ï¼Œç­‰äºä¸‹é¢ 2 ç§æƒ…å†µçš„è¾ƒå°è€…ï¼š\nçˆ¬åˆ° n-1 é˜¶çš„æœ€å°èŠ±è´¹ + cost[n-1]. çˆ¬åˆ° n-2 é˜¶çš„æœ€å°èŠ±è´¹ + cost[n-2]. å› æ­¤é€’æ¨å…¬å¼æœ‰ f(n) = min(f(n-1) + cost[n-1], f(n-2) + cost[n-2]). å› ä¸ºå¯ä»¥ä»ç¬¬ 0 é˜¶æˆ–è€… ç¬¬ 1 é˜¶å¼€å§‹çˆ¬ï¼Œå› æ­¤ åˆå§‹åŒ– f0=f1=0.\nclass Solution { public: int minCostClimbingStairs(vector\u003cint\u003e\u0026 cost) { // f(n) = min(f(n-1) + cost[n-1], f(n-2) + cost[n-2]) int f0 = 0, f1 = 0; for (int i = 2; i \u003c= cost.size(); i++) { // nums[n-1] needs climb int newF = min(f1 + cost[i-1], f0 + cost[i-2]); f0 = f1; f1 = newF; } return f1; } }; 213. House Robber II é¢˜ç›®ç½‘å€. æ€è·¯è·Ÿ 198 ä¸€æ ·ï¼Œåªä¸è¿‡è¿™é‡Œæ˜¯å›´æˆä¸€åœˆï¼Œåˆ†æˆå·ç¬¬ä¸€å®¶å’Œå·æœ€åä¸€å®¶è¿›è¡Œé€’æ¨ã€‚\nclass Solution { public: int rob(vector\u003cint\u003e\u0026 nums) { if (nums.size() == 1) return nums[0]; int n = nums.size(); int f0 = 0, f1 = 0; int robFirst = 0, robLast = 0; for (int i = 0; i \u003c n - 1; i ++) { robFirst = max(f0 + nums[i], f1); f0 = f1; f1 = robFirst; } f0 = 0; f1 = 0; for (int i = 1; i \u003c n; i ++) { robLast = max(f0 + nums[i], f1); f0 = f1; f1 = robLast; } return max(robFirst, robLast); } }; 740. Delete and Earn é¢˜ç›®ç½‘å€. æ•°ç»„ä¸­çš„æ¯ä¸ªæ•°å­— num éƒ½ä¼šè´¡çŒ®ä¸€å®šçš„ç‚¹æ•°ï¼Œä½†é€‰æ‹© num åï¼Œä¼šå¯¼è‡´ num-1 å’Œ num+1 çš„æ•°å­—æ— æ³•é€‰æ‹©ã€‚è¿™ç§é™åˆ¶ç±»ä¼¼äºâ€œæ‰“å®¶åŠ«èˆâ€é—®é¢˜ä¸­ä¸èƒ½é€‰æ‹©ç›¸é‚»çš„æˆ¿å­ã€‚éœ€è¦å°†é—®é¢˜è½¬åŒ–ä¸ºé€‰æ‹©ä¸€ç»„ä¸ç›¸é‚»çš„æ•°å­— (åœ¨å€¼åŸŸä¸Šä¸ç›¸é‚»)ï¼Œå¹¶æœ€å¤§åŒ–ç‚¹æ•°å’Œã€‚\né¦–å…ˆç»Ÿè®¡æ¯ä¸ªæ•°å­—å‡ºç°çš„é¢‘ç‡ã€‚ä¾‹å¦‚ï¼Œå¯¹äº nums = [3,4,2]ï¼Œå¯ä»¥è®¡ç®—å‡º 2 å‡ºç° 1 æ¬¡ï¼Œ3 å‡ºç° 1 æ¬¡ï¼Œ4 å‡ºç° 1 æ¬¡ã€‚\nå°†æ¯ä¸ªæ•°å­— i çš„ç‚¹æ•°å®šä¹‰ä¸º i * freq[i]ï¼Œå…¶ä¸­ freq[i] æ˜¯æ•°å­— i å‡ºç°çš„æ¬¡æ•°ã€‚è¿™æ ·ï¼Œé—®é¢˜è½¬åŒ–ä¸ºé€‰æ‹©ä¸€ç»„å€¼åŸŸä¸Šä¸ç›¸é‚»çš„æ•°å­—ï¼Œä½¿å¾—æ€»ç‚¹æ•°æœ€å¤§ã€‚\nå‡è®¾æ•°ç»„ä¸­çš„æœ€å¤§å€¼ä¸º maxValï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä» 0 åˆ° maxVal çš„æ‰€æœ‰æ•°å­— (å³ä½¿æŸäº›æ•°å­—çš„é¢‘ç‡ä¸º 0)ã€‚\nå®šä¹‰çŠ¶æ€ f[i] è¡¨ç¤ºåœ¨å€¼åŸŸ [0, i] ä¸Šé€‰æ‹©æ•°å­—æ‰€èƒ½è·å¾—çš„æœ€å¤§ç‚¹æ•°ï¼Œä¸”æœ€åä¸€ä¸ªé€‰æ‹©çš„æ•°å­—å¯ä»¥æ˜¯ i æˆ–ä¸é€‰ i. å¯¹äºæ¯ä¸ªæ•°å­— iï¼Œæœ‰ä¸¤ç§é€‰æ‹©ï¼š\nä¸é€‰: æœ€å¤§ç‚¹æ•°ä¸º dp[i-1] (å‰ i-1 ä¸ªæ•°å­—çš„æœ€å¤§ç‚¹æ•°)ã€‚ é€‰: è·å¾— i * freq[i] çš„ç‚¹æ•°ï¼Œä½†ä¸èƒ½é€‰ i-1ï¼Œå› æ­¤æœ€å¤§ç‚¹æ•°ä¸º dp[i-2] + i * freq[i]. å› æ­¤æœ‰ f[i] = max(f[i-1], f[i-2] + i * f[i])\nclass Solution { public: int deleteAndEarn(vector\u003cint\u003e\u0026 nums) { int n = nums.size(); int maxVal = ranges::max(nums); vector\u003cint\u003e freq(maxVal + 1, 0); for(int num: nums) freq[num]++; int f0 = 0, f1 = 1 * freq[1]; for(int i = 2; i \u003c= maxVal; i++) { int newF = max(f0 + i * freq[i], f1); f0 = f1; f1 = newF; } return f1; } }; 2466. Count Ways to Build Good Strings é¢˜ç›®ç½‘å€. ç›¸å½“äºä¸€æ¬¡å¯ä»¥çˆ¬ zero ä¸ªå°é˜¶æˆ–è€…ä¸€æ¬¡å¯ä»¥çˆ¬ one ä¸ªå°é˜¶ï¼Œç»Ÿè®¡çˆ¬ [low, high] å†…çš„å°é˜¶ä¸€å…±æœ‰å‡ ç§æ–¹æ³•ã€‚æ³¨æ„æ›´æ–°çš„æ—¶å€™é¿å…æ•°ç»„ä¸‹æ ‡æœªè´Ÿæ•°ã€‚\nclass Solution { public: int countGoodStrings(int low, int high, int zero, int one) { // f[high - one] + f[high - zero] const int MOD = 1000000007; vector\u003cint\u003e f(high + 1, 0); f[0] = 1; int minLen = zero \u003c one ? zero : one; for (int i = minLen; i \u003c= high; i++) { if (i \u003e= zero) { f[i] = (f[i] + f[i - zero]) % MOD; } if (i \u003e= one) { f[i] = (f[i] + f[i - one]) % MOD; } } int ans = 0; for (int i = low; i \u003c= high; i++) ans = (ans + f[i]) % MOD; return ans; } }; 0/1 knapsack Problem 0-1 èƒŒåŒ…:æœ‰ n ä¸ªç‰©å“,ç¬¬ i ä¸ªç‰©å“çš„ä½“ç§¯ä¸º w[i],ä»·å€¼ä¸º v[i]. æ¯ä¸ªç‰©å“è‡³å¤šé€‰ä¸€ä¸ª,æ±‚ä½“ç§¯å’Œä¸è¶…è¿‡ capacity æ—¶çš„æœ€å¤§ä»·å€¼å’Œã€‚\nå½“å‰æ“ä½œ: æšä¸¾ç¬¬ i ä¸ªç‰©å“é€‰æˆ–ä¸é€‰ã€‚é€‰ï¼Œå‰©ä½™å®¹é‡å‡å°‘ w[i]ï¼›ä¸é€‰ï¼Œå‰©ä½™å®¹é‡ä¸å˜ã€‚ å­é—®é¢˜: å‰©ä½™å®¹é‡ä¸º c æ—¶ï¼Œä»å‰ i ä¸ªç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œã€‚ ä¸‹ä¸€ä¸ªå­é—®é¢˜: åˆ†ç±»è®¨è®º ä¸é€‰: å‰©ä½™å®¹é‡ä¸º c æ—¶ï¼Œä»å‰ i-1 ä¸ªç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œã€‚ é€‰: å‰©ä½™å®¹é‡ä¸º c - w[i] æ—¶ï¼Œä»å‰ i-1 ä¸ªç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œã€‚ å› æ­¤é€’å½’æ¨¡å‹ä¸º $dfs(i,c)=\\max\\left(dfs(i-1,c),dfs(i-1,c-w[i])+v[i]\\right)$.\nint dfs(int i, int capacity, vector\u003cint\u003e\u0026 weights, vector\u003cint\u003e\u0026 values) { if (i \u003c 0) return 0; if (weights[i] \u003e capacity) return dfs(i - 1, capacity); return max(dfs(i - 1, capacity), dfs(i - 1, capacity - weights[i]) + values[i]); } int zeroOneKnapsack(int capacity, vector\u003cint\u003e\u0026 weights, vector\u003cint\u003e\u0026 values) { int n = weights.size(); return dfs(n - 1, capacity, weights, values); } å’Œä¸Šä¸€èŠ‚ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ•°ç»„æ¥è®°å½•é€’å½’è¿‡ç¨‹ä¸­æ¯ä¸ªå­é—®é¢˜çš„è§£ã€‚ç”±äºè¿™é‡Œé€’å½’éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œåˆå§‹åŒ–ä¸€ä¸ªäºŒç»´æ•°ç»„ memo[n][capacity + 1] è¡¨ç¤ºåœ¨å‰©ä½™å®¹é‡ capacity ä¸‹é€‰æ‹© i ä¸ªç‰©å“çš„æœ€å¤§ä»·å€¼ã€‚\nint dfs(int i, int capacity, vector\u003cint\u003e\u0026 weights, vector\u003cint\u003e\u0026 values, vector\u003cvector\u003cint\u003e\u003e\u0026 memo) { if (i \u003c 0) return 0; if (memo[i][capacity] != -1) return memo[i][capacity]; if (weights[i] \u003e capacity) return memo[i][capacity] = dfs(i - 1, capacity, weights, values, memo); return memo[i][capacity] = max(dfs(i - 1, capacity, weights, values, memo), dfs(i - 1, capacity - weights[i], weights, values, memo) + values[i]); } 494. Target Sum é¢˜ç›®ç½‘å€. å‡è®¾æ•°ç»„æ€»å’Œä¸º sï¼Œæ­£æ•°å’Œä¸º pï¼Œè´Ÿæ•°å’Œçš„ç»å¯¹å€¼ä¸º nï¼Œåˆ™ï¼š\np - n = target p + n = s æ¨å¯¼å¾— p = (target + s) / 2. å› æ­¤ï¼Œé—®é¢˜ç­‰ä»·äºåœ¨ nums ä¸­é€‰æ‹©ä¸€äº›æ•°ï¼Œä½¿å…¶å’Œæ°å¥½ä¸º (target + s) / 2. è¿™ç§é€‰æˆ–ä¸é€‰é—®é¢˜æ­£å¥½å¯ä»¥ç”¨ 01 èƒŒåŒ…çš„æ€è·¯è§£å†³ã€‚\nç”±äº p æ˜¯æ­£æ•´æ•° æ‰€ä»¥å¦‚æœ (target + s) / 2 \u003c 0 æˆ–è€… target + s æ˜¯å¥‡æ•°é‚£ä¹ˆè‚¯å®šæ‰¾ä¸åˆ°æ–¹æ¡ˆã€‚æ ¹æ®äº’æ–¥åŸç†ï¼Œæ€»çš„æ–¹æ¡ˆæ•°å¯ä»¥åˆ†æˆé€‰ç¬¬ i ä¸ªæ•°å’Œä¸é€‰ä¸¤ç§æƒ…å†µçš„æ–¹æ¡ˆæ•°ç›®ä¹‹å’Œã€‚\nclass Solution { int dfs(int i, vector\u003cint\u003e\u0026 nums, int target) { // choose nums[i] as pos or not if (i \u003c 0) return target == 0 ? 1 : 0; if (nums[i] \u003e target) return dfs(i - 1, nums, target); return dfs(i - 1, nums, target) + dfs(i - 1, nums, target - nums[i]); } public: int findTargetSumWays(vector\u003cint\u003e\u0026 nums, int target) { // p: sum of positive nums // n: abs of sum of negative nums // then we have p - n = t p + n = sum(nums) // p = (t + sum(nums)) / 2 int n = nums.size(); int s = accumulate(nums.begin(), nums.end(), 0); target += s; if (target \u003c 0 || target % 2 == 1) return 0; target /= 2; vector\u003cvector\u003cint\u003e\u003e f(n, vector\u003cint\u003e(target + 1, 0)); return dfs(n- 1, nums, target); } }; è®° c = (target + s) / 2ï¼Œç”¨ä¸Šè®°å¿†åŒ–æœç´¢å¹¶ä¸”é¿å…ç´¢å¼•ä¸ºè´Ÿæ•°æˆ‘ä»¬æœ‰. f æ•°ç»„è¡¨ç¤ºå‰ i ä¸ªæ•°ä¸­è¿›è¡Œé€‰æ‹©ä½¿å’Œä¸º c çš„æ–¹æ¡ˆæ•°ç›®ã€‚\n$$ \\begin{aligned} dfs(i,c)\u0026=dfs(i-1,c)+dfs(i-1,c-nums[i])\\\\ f[i][c]\u0026=f[i-1][c]+f[i-1][c-nums[i]]\\\\ f[i+1][c]\u0026=f[i][c]+f[i][c-nums[i]] \\end{aligned} $$int findTargetSumWays(vector\u003cint\u003e\u0026 nums, int target) { int n = nums.size(); int s = accumulate(nums.begin(), nums.end(), 0); target += s; if (target \u003c 0 || target % 2 == 1) return 0; target /= 2; vector\u003cvector\u003cint\u003e\u003e f(n + 1, vector\u003cint\u003e(target + 1, 0)); f[0][0] = 1; for (int i = 0; i \u003c n; i++) { for (int c = 0; c \u003c= target; c++) { if (nums[i] \u003e c) { f[i + 1][c] = f[i][c]; } else { f[i + 1][c] = f[i][c] + f[i][c-nums[i]]; } } } return f[n][target]; } ä»é€’æ¨å…¬å¼å¯ä»¥çœ‹å‡ºæ¯æ¬¡è®¡ç®—å®Œ f[i+1] åå°±ä¸éœ€è¦ç”¨åˆ° f[i] äº†ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯æ—¶æ¯åˆ»åªæœ‰ä¸¤ä¸ªæ•°ç»„çš„å…ƒç´ åœ¨å‚ä¸çŠ¶æ€è½¬ç§»ï¼Œå› æ­¤å¯ä»¥ç”¨ä¸¤ä¸ªæ•°ç»„æ¥å­˜å‚¨çŠ¶æ€ã€‚$f[(i+1)\\%2][c]=f[i\\%2][c]+f[i\\%2][c-nums[i]]$\nint findTargetSumWays(vector\u003cint\u003e\u0026 nums, int target) { int n = nums.size(); int s = accumulate(nums.begin(), nums.end(), 0); target += s; if (target \u003c 0 || target % 2 == 1) return 0; target /= 2; vector\u003cvector\u003cint\u003e\u003e f(2, vector\u003cint\u003e(target + 1, 0)); f[0][0] = 1; for (int i = 0; i \u003c n; i++) { for (int c = 0; c \u003c= target; c++) { if (nums[i] \u003e c) { f[(i + 1)%2][c] = f[i%2][c]; } else { f[(i + 1)%2][c] = f[i%2][c] + f[i%2][c-nums[i]]; } } } return f[n%2][target]; } æ›´è¿›ä¸€æ­¥ï¼Œå¯ä»¥åªç”¨ä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨çŠ¶æ€ã€‚ä½†ç”±äºåé¢çš„çŠ¶æ€å€¼ä¾èµ–äºå‰é¢çš„ï¼Œå› æ­¤æˆ‘ä»¬è¦ä»åå¾€å‰æ›´æ–°çŠ¶æ€ï¼Œé¿å…è¦†ç›–ã€‚ç”±äº nums[i] \u003e c çš„æ—¶å€™æ•°ç»„çš„çŠ¶æ€æ˜¯ä¸å˜çš„ï¼Œå› æ­¤åªç”¨æ›´æ–°ä» target åˆ° nums[i] çš„æƒ…å†µã€‚\nint findTargetSumWays(vector\u003cint\u003e\u0026 nums, int target) { int n = nums.size(); int s = accumulate(nums.begin(), nums.end(), 0); target += s; if (target \u003c 0 || target % 2 == 1) return 0; target /= 2; vector\u003cint\u003e f(target + 1, 0); f[0] = 1; for (int i = 0; i \u003c n; i++) for (int c = target; c \u003e= nums[i]; c--) { f[c] = f[c] + f[c-nums[i]]; } return f[target]; } 2915. Length of the Longest Subsequence that Sums to Target é¢˜ç›®ç½‘å€. f è¡¨ç¤ºä»å‰ i ä¸ªæ•°ä¸­è¿›è¡Œé€‰æ‹©ä½¿å¾—å’Œä¸º c çš„å­æ•°ç»„ä¸­æœ€é•¿çš„é•¿åº¦ã€‚é€’å½’çš„è¾¹ç•Œæ¡ä»¶ä¸º i = 0 æ—¶ è‹¥ target = 0 è¡¨ç¤ºèƒ½æ‰¾åˆ°ï¼Œè¿”å› 0 (ç©ºæ•°ç»„é•¿åº¦)ï¼›å¦åˆ™è¿”å› INT_MIN è¡¨ç¤ºæ‰¾ä¸åˆ°ã€‚\nclass Solution { public: int lengthOfLongestSubsequence(vector\u003cint\u003e\u0026 nums, int target) { // f[i][c] = max(f[i-1][c] , f[i-1][c - nums[i]] + 1) // f is max sub seq len in first i nums which sum is c int n = nums.size(); vector\u003cvector\u003cint\u003e\u003e f(n + 1, vector\u003cint\u003e(target + 1, INT_MIN)); f[0][0] = 0; for (int i = 0; i \u003c n; i++) { for (int c = 0; c \u003c= target; c++) { if (nums[i] \u003e c) { f[i+1][c] = f[i][c]; } else { f[i+1][c] = max(f[i][c] , f[i][c - nums[i]] + 1); } } } return f[n][target] \u003e 0 ? f[n][target] : -1; } }; ä»¿ç…§ 0/1 èƒŒåŒ…å¯ä»¥è¿›è¡Œç©ºé—´ä¼˜åŒ–ã€‚\nint lengthOfLongestSubsequence(vector\u003cint\u003e\u0026 nums, int target) { int n = nums.size(); vector\u003cint\u003e f(target + 1, INT_MIN); f[0] = 0; for (int i = 0; i \u003c n; i++) { for (int c = target; c \u003e= nums[i]; c--) { f[c] = max(f[c] , f[c - nums[i]] + 1); } } return f[target] \u003e 0 ? f[target] : -1; } 416. Partition Equal Subset Sum é¢˜ç›®ç½‘å€. ç›¸å½“äºåˆ¤æ–­èƒ½å¦é€‰æ‹©å…ƒç´ ä½¿å¾—å’Œç­‰äºæ•´ä¸ªæ•°ç»„ä¹‹å’Œçš„ä¸€åŠã€‚f è¡¨ç¤ºèƒ½å¦ä»å‰ i ä¸ªæ•°ä¸­è¿›è¡Œé€‰æ‹©ä½¿å¾—å’Œä¸º c.\nclass Solution { public: bool canPartition(vector\u003cint\u003e\u0026 nums) { int n = nums.size(); int s = accumulate(nums.begin(), nums.end(), 0); if (s % 2) return false; int target = s / 2; // f[i][c] = f[i-1][c] || f[i-1][c-nums[i]] // f is can select in first i ele which sum is c vector\u003cvector\u003cbool\u003e\u003e f(n + 1, vector\u003cbool\u003e(target + 1, false)); f[0][0] = true; for (int i = 0; i \u003c n; i++) { for (int c = 0; c \u003c= target; c++) { if (nums[i] \u003e c) { f[i+1][c] = f[i][c]; } else { f[i+1][c] = f[i][c] || f[i][c-nums[i]]; } } } return f[n][target]; } }; 2787. Ways to Express an Integer as Sum of Powers é¢˜ç›®ç½‘å€. æœ¬é¢˜ä¹Ÿæ˜¯æ°å¥½è£…æ»¡å‹ 0/1 èƒŒåŒ…çš„æ–¹æ¡ˆæ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è®¡ç®— pow çš„æ—¶å€™ç”±äºä¿®æ”¹äº†æ•°ç»„ç´¢å¼•é¿å…è´Ÿæ•°ï¼Œåº”è¯¥ä¸º pow(i + 1, x).\nclass Solution { public: int numberOfWays(int n, int x) { int MOD = 1'000'000'007; int m = 0; while (pow(m + 1, x) \u003c= n) { m++; } // f[i][c] = f[i-1][c] + f[i-1][c-i^x]; vector\u003cvector\u003cint\u003e\u003e f(m + 2, vector\u003cint\u003e(n + 1, 0)); f[0][0] = 1; for (int i = 0; i \u003c= m; i++) { int val = pow(i + 1, x); // nums[i] is i+1 for (int c = 0; c \u003c= n; c++) { if (val \u003e c) { f[i+1][c] = f[i][c]; } else { f[i+1][c] = f[i][c] + f[i][c-val]; } } } return f[m+1][n] % MOD; } }; ä¸€ç»´ç©ºé—´ä¼˜åŒ–åä»£ç å¦‚ä¸‹ï¼Œä¸€ç»´æ•°ç»„æ±‚æ–¹æ¡ˆæ•°æ˜¯åœ¨ä¸€ç›´ç´¯åŠ çš„ï¼Œæ‰€ä»¥å¾ªç¯å†…è¦å–æ¨¡ã€‚\nint numberOfWays(int n, int x) { int MOD = 1'000'000'007; int m = 0; while (pow(m + 1, x) \u003c= n) { m++; } // f[i][c] = f[i-1][c] + f[i-1][c-i^x]; vector\u003cint\u003e f(n + 1, 0); f[0] = 1; for (int i = 0; i \u003c= m; i++) { int val = pow(i + 1, x); // nums[i] is i+1 for (int c = n; c \u003e= val; c--) { f[i+1][c] = (f[i][c] + f[i][c-val]) % MOD; } } return f[n] % MOD; } Unbounded Knapsack Problem å®Œå…¨èƒŒåŒ…:æœ‰ n ç§ç‰©å“,ç¬¬ i ç§ç‰©å“çš„ä½“ç§¯ä¸º w[i],ä»·å€¼ä¸º v[i]. æ¯ç§ç‰©å“å¯ä»¥é€‰æ— é™æ¬¡,æ±‚ä½“ç§¯å’Œä¸è¶…è¿‡ capacity æ—¶çš„æœ€å¤§ä»·å€¼å’Œã€‚\nå½“å‰æ“ä½œ: æšä¸¾ç¬¬ i ç§ç‰©å“é€‰ä¸€ä¸ªæˆ–ä¸é€‰ã€‚é€‰ï¼Œå‰©ä½™å®¹é‡å‡å°‘ w[i]ï¼›ä¸é€‰ï¼Œå‰©ä½™å®¹é‡ä¸å˜ã€‚ å­é—®é¢˜: å‰©ä½™å®¹é‡ä¸º c æ—¶ï¼Œä»å‰ i ç§ç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œã€‚ ä¸‹ä¸€ä¸ªå­é—®é¢˜: åˆ†ç±»è®¨è®º ä¸é€‰: å‰©ä½™å®¹é‡ä¸º c æ—¶ï¼Œä»å‰ i-1 ç§ç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œã€‚ é€‰: å‰©ä½™å®¹é‡ä¸º c - w[i] æ—¶ï¼Œä»å‰ i ç§ç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œã€‚ ä»£ç å’Œä¹‹å‰å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯é€‰ç¬¬ i ç§ç‰©å“çš„æ—¶å€™é€’å½’åˆ°çš„è¿˜æ˜¯ i.\n322. è¿™å…¶å®æ˜¯å®Œå…¨èƒŒåŒ…çš„ä¸€ç§å˜å½¢ï¼ŒæŠŠç¡¬å¸çš„ä»·å€¼çœ‹æˆ 1ï¼ŒæŠŠæœ€å¤§æ”¹æˆæ±‚æœ€å°å°±å¯ä»¥å¾—åˆ°\n$dfs(i,c)=\\min\\left(dfs(i-1,c),dfs(i-1,c-coins[i])+1\\right)$.\nclass Solution { public: long long dfs(int i, vector\u003cint\u003e\u0026 coins, long long amount) { if (i \u003c 0) return amount ? INT_MAX : 0; if (coins[i] \u003e amount) return dfs(i - 1, coins, amount); return min(dfs(i - 1, coins, amount), dfs(i, coins, amount - coins[i]) + 1); } int coinChange(vector\u003cint\u003e\u0026 coins, int amount) { int n = coins.size(); long long res = dfs(n - 1, coins, (long long) amount); return res \u003c INT_MAX ? res : -1; } }; ç¿»è¯‘æˆé€’æ¨æƒ…å†µï¼Œä»å›æº¯å¯çŸ¥ï¼Œi = 0 (ç´¢å¼• +1 é˜²æ­¢è´Ÿæ•°) ä¸” amount = 0 æ—¶è¿”å› 0ï¼Œå…¶ä»–æƒ…å†µéƒ½æ˜¯ INT_MAX / 2 (é˜²æ­¢æº¢å‡º).\nint coinChange(vector\u003cint\u003e\u0026 coins, int amount) { int n = coins.size(); vector\u003cvector\u003cint\u003e\u003e f(n + 1, vector\u003cint\u003e(amount + 1, INT_MAX / 2)); f[0][0] = 0; for (int i = 0; i \u003c n; i++) { for (int c = 0; c \u003c= amount; c++) { if (coins[i] \u003e c) { f[i + 1][c] = f[i][c]; } else { f[i + 1][c] = min(f[i][c], f[i + 1][c - coins[i]] + 1); } } } return f[n][amount] \u003c INT_MAX / 2 ? f[n][amount] : -1; } å¯¹äºå®Œå…¨èƒŒåŒ…é—®é¢˜ä½¿ç”¨ä¸€ç»´æ•°ç»„æ—¶ï¼Œå¯ä»¥ä»å‰å¾€åè®¡ç®—ï¼Œå› ä¸ºå½“å‰æ›´æ–°çš„çŠ¶æ€æ¥äºä¸Šä¸€æ­¥åŒæ—¶çš„çŠ¶æ€å’Œè¿™ä¸€æ­¥å·²ç»è®¡ç®—å‡ºæ¥çš„çŠ¶æ€ã€‚åŒæ—¶ç”±äº coins[i] \u003e c æ—¶çŠ¶æ€ä¸å˜ï¼Œæˆ‘ä»¬å¯ä»¥ä» c = coins[i] æ—¶å¼€å§‹æ›´æ–°ã€‚\nint coinChange(vector\u003cint\u003e\u0026 coins, int amount) { int n = coins.size(); vector\u003cint\u003e f(amount + 1, INT_MAX / 2); f[0] = 0; for (int i = 0; i \u003c n; i++) { for (int c = coins[i]; c \u003c= amount; c++) { f[c] = min(f[c], f[c - coins[i]] + 1); } } return f[amount] \u003c INT_MAX / 2 ? f[amount] : -1; } å¸¸è§å˜å½¢\nè‡³å¤šè£… capacityï¼Œæ±‚æ–¹æ¡ˆæ•°/æœ€å¤§ä»·å€¼å’Œ æ°å¥½è£… capacityï¼Œæ±‚æ–¹æ¡ˆæ•°/æœ€å¤§/æœ€å°ä»·å€¼å’Œ è‡³å°‘è£… capacityï¼Œæ±‚æ–¹æ¡ˆæ•°/æœ€å°ä»·å€¼å’Œ 494 å¯¹äºè‡³å¤šçš„æƒ…å†µï¼Œdfs åœ¨è¾¹ç•Œåˆ¤å®šçš„æ—¶å€™å°±ä¸éœ€è¦åˆ¤æ–­ c æ˜¯å¦ç­‰äº 0 äº† (å› ä¸ºä¸è¦æ±‚è£…æ»¡)ï¼ŒåŒæ—¶åˆå§‹åŒ– f æ•°ç»„éƒ½ä¸º 1 (è‡³å°‘æœ‰ä¸€ç§æ–¹æ¡ˆä¹Ÿå°±æ˜¯ä¸è£…).\nå¯¹äºè‡³å°‘çš„æƒ…å†µ dfs åœ¨è¾¹ç•Œåˆ¤å®šçš„æ—¶å€™æ¡ä»¶åˆ¤æ–­å˜ä¸º c \u003c= 0 (å› ä¸ºå¯ä»¥è¶…å‡º). ä½¿ç”¨é€’æ¨æ›´æ–°çŠ¶æ€çš„æ—¶å€™è¦å¾ªç¯åˆ° c = 0 çš„æƒ…å†µ (å› ä¸ºæ¯ä¸ªç‰©å“éƒ½å¯ä»¥é€‰æˆ–ä¸é€‰ï¼Œæœ‰ 2^n ç§æƒ…å†µï¼Œå› æ­¤è¿™æ ·å¾ªç¯æ¯ä¸ªç‰©å“éƒ½èƒ½è€ƒè™‘åˆ°ä¸¤ç§æƒ…å†µ)ï¼ŒåŒæ—¶æ”¹æˆ f[max(c-nums[i], 0)] è¡¨ç¤ºæŠŠ c \u003c= 0 çš„çŠ¶æ€éƒ½è®°å½•åˆ° f[0] é‡Œã€‚\n518. Coin Change II é¢˜ç›®ç½‘å€. å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼Œå®šä¹‰ dfs(i,c) è¡¨ç¤ºç”¨å‰ i ç§ç¡¬å¸ç»„æˆé‡‘é¢ c çš„æ–¹æ¡ˆæ•°ï¼Œè€ƒè™‘ã€Œé€‰æˆ–ä¸é€‰ã€ï¼Œæœ‰ï¼š\nä¸å†ç»§ç»­é€‰ç¬¬ i ç§ç¡¬å¸: dfs(iâˆ’1,c) ç»§ç»­é€‰ä¸€æšç¬¬ i ç§ç¡¬å¸: dfs(i,câˆ’coins[i]) æ ¹æ®åŠ æ³•åŸç†ï¼ŒäºŒè€…ç›¸åŠ å¾— dfs(i,c) = dfs(iâˆ’1,c) + dfs(i,câˆ’coins[i])\né€’å½’è¾¹ç•Œ: dfs(âˆ’1,0) = 1, dfs(âˆ’1, \u003e0) = 0 (éå†å®Œæ‰€æœ‰ç¡¬å¸ä»ç„¶æ‰¾ä¸åˆ°å’Œä¸º c) é€’å½’å…¥å£: dfs(nâˆ’1,amount) class Solution { public: int change(int amount, vector\u003cint\u003e\u0026 coins) { // f[i][c] = f[i-1][c] + f[i][c-coins[i]] int n = coins.size(); vector\u003cvector\u003cunsigned long long\u003e\u003e f(n + 1, vector\u003cunsigned long long\u003e(amount + 1, 0)); f[0][0] = 1; for (int i = 0; i \u003c n; i++) { for (int c = 0; c \u003c= amount; c++) { if (coins[i] \u003e c) { f[i + 1][c] = f[i][c]; } else { f[i + 1][c] = f[i][c] + f[i + 1][c - coins[i]]; } } } return f[n][amount]; } }; ä¸€ç»´æ•°ç»„ç©ºé—´ä¼˜åŒ–ï¼Œå®Œå…¨èƒŒåŒ…é—®é¢˜æ­£å‘æ›´æ–°çŠ¶æ€ã€‚\nint change(int amount, vector\u003cint\u003e\u0026 coins) { // f[i][c] = f[i-1][c] + f[i][c-coins[i]] int n = coins.size(); vector\u003cunsigned long long\u003e f(amount + 1, 0); f[0] = 1; for (int i = 0; i \u003c n; i++) { for (int c = coins[i]; c \u003c= amount; c++) { f[c] = f[c] + f[c - coins[i]]; } } return f[amount]; } 279. Perfect Squares é¢˜ç›®ç½‘å€. å®šä¹‰ dfs(i,c) ä¸ºä»å‰ i ä¸ªå®Œå…¨å¹³æ–¹æ•°ä¸­é€‰ä¸€äº›æ•° (å¯ä»¥é‡å¤é€‰)ï¼Œæ»¡è¶³å…ƒç´ å’Œæ°å¥½ç­‰äº cï¼Œæœ€å°‘è¦é€‰çš„æ•°å­—ä¸ªæ•°ã€‚\né€’å½’è¾¹ç•Œ: dfs(0,0) = 0, dfs(0,\u003e0) = INF (è¦å– minï¼Œåˆå§‹åŒ–ä¸ºæœ€å¤§) é€’å½’å…¥å£: dfs(sqrt(n),n) class Solution { public: int numSquares(int n) { // f[i][c] = min(f[i-1][c], f[i][c - i^2] + 1) int m = sqrt(n); vector\u003cvector\u003cint\u003e\u003e f(m + 2, vector\u003cint\u003e(n + 1, INT_MAX / 2)); f[0][0] = 0; for (int i = 0; i \u003c= m; i++) { int val = (i + 1) * (i + 1); for (int c = 0; c \u003c= n; c++) { if (val \u003e c) { f[i + 1][c] = f[i][c]; } else { f[i + 1][c] = min(f[i][c], f[i + 1][c - val] + 1); } } } return f[m+1][n]; } }; ä¸€ç»´æ•°ç»„ç©ºé—´ä¼˜åŒ–\nint numSquares(int n) { // f[i][c] = min(f[i-1][c], f[i][c - i^2] + 1) int m = sqrt(n); vector\u003cint\u003e f(n + 1, INT_MAX / 2); f[0] = 0; for (int i = 0; i \u003c= m; i++) { int val = (i + 1) * (i + 1); for (int c = val; c \u003c= n; c++) { f[c] = min(f[c], f[c - val] + 1); } } return f[n]; } Linear DP 1143. Longest Common Subsequence é¢˜ç›®ç½‘å€. åœ¨é»˜è®¤æƒ…å†µä¸‹å­ä¸²å’Œå­æ•°ç»„è¦æ±‚è¿ç»­ï¼Œå­åºåˆ—ä¸ä¸€å®šè¿ç»­ã€‚å…¬å…±å­åºåˆ—åˆ™ä¸ºä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­éƒ½æœ‰çš„å­åºåˆ—ã€‚\nè®¾ä¸¤ä¸ªå­—ç¬¦ä¸²åˆ†åˆ«ä¸º s å’Œ tï¼Œé•¿åº¦åˆ†åˆ«ä¸º m å’Œ n. å­åºåˆ—çš„æœ¬è´¨å°±æ˜¯é€‰æˆ–ä¸é€‰ï¼Œè€ƒè™‘æœ€åä¸€å¯¹å­—æ¯ï¼Œä¸¤ä¸¤ç»„åˆå°±æœ‰å››ç§æƒ…å†µã€‚\né€‰x ä¸” é€‰y xå¾…å®š ä¸” ä¸é€‰y ä¸é€‰x ä¸” yå¾…å®š ä¸é€‰x ä¸” ä¸é€‰y ç”±æ­¤å¯ä»¥å¾—åˆ°æˆ‘ä»¬çš„å›æº¯ä¸‰é—®\nå½“å‰æ“ä½œ: è€ƒè™‘ s[i] å’Œ t[j] é€‰æˆ–ä¸é€‰ã€‚ å­é—®é¢˜: s å‰ i ä¸ªå­—æ¯å’Œ t å‰ j ä¸ªå­—æ¯çš„ LCS é•¿åº¦ã€‚ ä¸‹ä¸€ä¸ªå­é—®é¢˜: æ ¹æ®é€‰æ‹©æƒ…å†µè¿›è¡Œåˆ†ç±»è®¨è®º: s å‰ i-1 ä¸ªå­—æ¯å’Œ t å‰ j-1 ä¸ªå­—æ¯çš„ LCS é•¿åº¦ã€‚ s å‰ i-1 ä¸ªå­—æ¯å’Œ t å‰ j ä¸ªå­—æ¯çš„ LCS é•¿åº¦ã€‚ s å‰ i ä¸ªå­—æ¯å’Œ t å‰ j-1 ä¸ªå­—æ¯çš„ LCS é•¿åº¦ã€‚ æ³¨æ„è¿™é‡Œéƒ½é€‰ (å½“ç„¶åªæœ‰ s[i]==t[j] æ—¶æ‰èƒ½éƒ½é€‰) æˆ–è€…éƒ½ä¸é€‰çš„ä¸‹ä¸€ä¸ªå­é—®é¢˜æ˜¯ä¸€æ ·çš„ (å¹¶ä¸”é€‰è‚¯å®šæ¯”ä¸é€‰å¥½)ï¼Œéƒ½å¯¹åº”ç¬¬ä¸€ç§æƒ…å†µã€‚å› æ­¤å¾—åˆ°å›æº¯å…¬å¼å¦‚ä¸‹\n$$ \\begin{aligned} \u0026dfs(i,j)=\\begin{cases} \\max (dfs(i-1,j), dfs(i,j-1), dfs(i-1,j-1)+1)\u0026s[i]=t[j] \\\\ \\max dfs(i-1,j),dfs(i,j-1),dfs(i-1,j-1)\u0026s[i]\\neq t[j] \\end{cases} \\\\ \\implies \u0026dfs(i,j)=\\max\\left(dfs(i-1,j),dfs(i,j-1),dfs(i-1,j-1)+(s[i]= t[j])\\right) \\end{aligned} $$è¿™é‡Œæœ‰ä¸¤ä¸ªä¸èƒ½å¿½ç•¥çš„é—®é¢˜\ns[i] == t[j] æ—¶å€™éœ€è¦è€ƒè™‘ dfs(i-1, j) å’Œ dfs(i, j-1) ä¹Ÿå°±æ˜¯åªé€‰ä¸€ä¸ªçš„æƒ…å†µå—ï¼Ÿ dfs(i-1, j) å’Œ dfs(i, j-1) æ˜¯ä¸è€ƒè™‘å½“å‰å­—ç¬¦ç›¸ç­‰æ—¶å€™å¾—åˆ°çš„ LCS é•¿åº¦ï¼Œ\ns[i] != t[j] æ—¶å€™éœ€è¦è€ƒè™‘ dfs(i-1, j-1) å°±æ˜¯ä¸¤ä¸ªéƒ½ä¸é€‰çš„æƒ…å†µå—ï¼Ÿ æ ¹æ®ä¸‹é¢å¼å­å¯ä»¥å‘ç°ï¼Œå¦‚æœè¿™æ¬¡é€‰æ‹© s[i] é‚£ä¹ˆä¸‹ä¸€æ¬¡é€‰æ‹© t[j] å°±é€’å½’åˆ° dfs(i-1, j-1)ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸¤ä¸ªéƒ½ä¸é€‰çš„æƒ…å†µå·²ç»åŒ…å«åœ¨ä¹‹é€‰ä¸€ä¸ªçš„æƒ…å†µé‡Œé¢äº†ã€‚ $$ dfs(i,j){\\operatorname*{\\longrightarrow}}dfs(i-1,j){\\operatorname*{\\longrightarrow}}dfs(i-1,j-1) $$æ‰€ä»¥æœ€ç»ˆå…¬å¼å¯ä»¥ç®€åŒ–ä¸º\n$$ dfs(i,j)=\\begin{cases}dfs(i-1,j-1)+1\u0026s[i]=t[j]\\\\\\max\\left(dfs(i-1,j),dfs(i,j-1)\\right)\u0026s[i]\\neq t[j]\u0026\\end{cases} $$class Solution { public: int dfs(int i, int j, string text1, string text2) { if (i \u003c 0 || j \u003c 0) return 0; if (text1[i] == text2[j]) return dfs(i - 1, j - 1, text1, text2) + 1; return max(dfs(i - 1, j, text1, text2), dfs(i, j - 1, text1, text2)); } int longestCommonSubsequence(string text1, string text2) { int n = text1.size(); int m = text2.size(); return dfs(n - 1, m - 1, text1, text2); } }; ä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„ç¿»è¯‘æˆé€’æ¨å½¢å¼ã€‚\nint longestCommonSubsequence(string text1, string text2) { int n = text1.size(); int m = text2.size(); vector\u003cvector\u003cint\u003e\u003e f(n + 1, vector\u003cint\u003e(m + 1, 0)); for (int i = 0; i \u003c n; i++) { for (int j = 0; j \u003c m; j++) { if (text1[i] == text2[j]){ f[i + 1][j + 1] = f[i][j] + 1; } else { f[i + 1][j + 1] = max(f[i][j + 1], f[i + 1][j]); } } } return f[n][m]; } è¿›ä¸€æ­¥å¯ä»¥ç”¨ä¸€ç»´æ•°ç»„è¿›è¡Œè½¬æ¢ã€‚æœ¬é¢˜ f[i+1][j+1] éœ€è¦ä» f[i+1][j] è½¬ç§»è¿‡æ¥ï¼Œè¿™åªèƒ½æ­£åºæšä¸¾ j. å€’åºæšä¸¾çš„è¯ï¼Œf[i+1][j] è¿˜æ²¡æœ‰è®¡ç®—å‡ºæ¥ã€‚åŒæ—¶è¦ä¿ç•™ä¸Šä¸€æ¬¡ f[i][j+1] ä¹Ÿå°±æ˜¯æœ¬è½® f[i][j] çš„çŠ¶æ€ï¼Œå› ä¸ºæ­£åºæ›´æ–°çš„æ—¶å€™å·²ç»è¢«è¦†ç›–ã€‚\nint longestCommonSubsequence(string text1, string text2) { int n = text1.size(); int m = text2.size(); vector\u003cint\u003e f(m + 1, 0); for (int i = 0; i \u003c n; i++) { int pre = f[0]; // last j + 1 for (int j = 0; j \u003c m; j++) { int cur = f[j+1]; if (text1[i] == text2[j]){ f[j + 1] = pre + 1; } else { f[j + 1] = max(f[j + 1], f[j]); } pre = cur; } } return f[m]; } 72. Edit Distance é¢˜ç›®ç½‘å€. è¿™é¢˜éœ€è¦æ€è·¯è½¬æ¢ä¸€ä¸‹ï¼Œdfs(i, j) è¡¨ç¤º s å‰ i ä¸ªå­—æ¯å’Œ t å‰ j ä¸ªå­—æ¯å®ŒæˆåŒ¹é…æ‰€éœ€è¦çš„æœ€å°æ“ä½œæ•°ã€‚å¦‚æœ s[i] != t[j] ä¸‹é¢ä¸‰ç§æ“ä½œåˆ†åˆ«ç›¸å½“äº\næ’å…¥: è¦è¿›è¡ŒåŒ¹é…é‚£æ’å…¥çš„è‚¯å®šæ—¶å’Œ t[j] ä¸€æ ·çš„å­—æ¯ï¼Œä¹Ÿå°±ç›¸å½“äºæŠŠ t[j] ç»™æŠ¹å»ï¼Œå› æ­¤é€’å½’åˆ° dfs(i, j-1). åˆ é™¤: é€’å½’åˆ° dfs(j-1, j). æ›¿æ¢: ç›¸å½“äºä¸¤è¾¹éƒ½è¿›è¡ŒæŠ¹å»ï¼Œé€’å½’åˆ° dfs(i-1, j-1). å› æ­¤æˆ‘ä»¬çš„å›æº¯å…¬å¼ä¸º\n$$ dfs(i,j)=\\begin{cases}dfs(i-1,j-1)\u0026s[i]=t[j]\\\\\\min{\\left(dfs(i,j-1),dfs(i-1,j),dfs(i-1,j-1)\\right)+1}\u0026s[i]\\neq t[j]\\end{cases} $$class Solution { public: int dfs(int i, int j, string word1, string word2) { // surplus chars need to be deleted if (i \u003c 0) return j + 1; // 0 - j have j+1 chars if (j \u003c 0) return i + 1; if (word1[i] == word2[j]) // no need operation return dfs(i - 1, j - 1, word1, word2); return min({dfs(i, j-1, word1, word2), // insert dfs(i-1, j, word1, word2), // erase dfs(i-1, j-1, word1, word2)}) // substitute + 1; } int minDistance(string word1, string word2) { int n = word1.size(); int m = word2.size(); return dfs(n-1, m-1, word1, word2); } }; åŒæ ·å¯ä»¥ç¿»è¯‘æˆé€’æ¨ï¼Œæ³¨æ„è¾¹ç•Œæ¡ä»¶çš„ç¿»è¯‘ã€‚\nint minDistance(string word1, string word2) { int n = word1.size(); int m = word2.size(); vector\u003cvector\u003cint\u003e\u003e f(n + 1, vector\u003cint\u003e(m + 1, 0)); for (int j = 0; j \u003c m; j++) f[0][j + 1] = j + 1; for (int i = 0; i \u003c n; i++) f[i + 1][0] = i + 1; for (int i = 0; i \u003c n; i++) { for (int j = 0; j \u003c m; j++) { if (word1[i] == word2[j]) { f[i + 1][j + 1] = f[i][j]; } else { f[i + 1][j + 1] = min({f[i + 1][j], f[i][j + 1], f[i][j]}) + 1; } } } return f[n][m]; } ç”¨ä¸€ç»´æ•°ç»„è¿›è¡Œç©ºé—´ä¼˜åŒ–çš„æ—¶å€™ï¼Œæ³¨æ„ä¿ç•™ä¸Šä¸€çŠ¶æ€ i çš„å‰ä¸€ä¸ªå€¼å¹¶ä¸”æ›´æ–°å½“å‰ i+1 çŠ¶æ€çš„è¾¹ç•Œæ¡ä»¶ã€‚\nint minDistance(string word1, string word2) { int n = word1.size(); int m = word2.size(); vector\u003cint\u003e f(m + 1, 0); for (int j = 0; j \u003c m; j++) f[j + 1] = j + 1; for (int i = 0; i \u003c n; i++) { int pre = f[0]; // last f[j+1] f[0] = i + 1; // cur f[i+1] = i + 1 for (int j = 0; j \u003c m; j++) { int cur = f[j + 1]; if (word1[i] == word2[j]) { f[j + 1] = pre; } else { f[j + 1] = min({f[j], f[j + 1], pre}) + 1; } pre = cur; } } return f[m]; } 583. Delete Operation for Two Strings é¢˜ç›®ç½‘å€. è¾¹ç•Œæ¡ä»¶: å’Œä¸Šä¸€é¢˜ä¸€æ ·ï¼Œå½“æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²éå†å®Œçš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªå­—ç¬¦ä¸²åº”è¯¥å…¨éƒ¨åˆ é™¤ã€‚ é€’å½’æ¡ä»¶: s[i] != t[j] ç”±äºä¸€æ¬¡åªèƒ½åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥å‰©ä½™æ­¥æ•°ä¸ºåˆ†åˆ«åˆ é™¤ä¸¤è€…çš„æœ€å°å€¼å†åŠ ä¸Šå½“å‰åˆ é™¤æ“ä½œçš„ä¸€æ¬¡ min(dfs(i-1, j), dfs(i, j-1)) + 1. ç›¸ç­‰æ—¶åˆ™ä¸ç”¨åˆ é™¤ï¼Œå¾€ä¸‹é€’å½’ä¸€æ¬¡ã€‚\nclass Solution { public: int minDistance(string word1, string word2) { // s[i] != t[j] min(dfs(i-1, j), dfs(i, j-1)) + 1 // = dfs(i-1, j-1) // i = 0 return j+1; j = 0 return i + 1 int n = word1.size(); int m = word2.size(); vector\u003cvector\u003cint\u003e\u003e f(n + 1, vector\u003cint\u003e(m + 1, 0)); for (int j = 0; j \u003c m; j++) f[0][j + 1] = j + 1; for (int i = 0; i \u003c n; i++) { f[i + 1][0] = i + 1; for (int j = 0; j \u003c m; j++) { if (word1[i] == word2[j]) { f[i + 1][j + 1] = f[i][j]; } else { f[i + 1][j + 1] = min(f[i + 1][j], f[i][j + 1]) + 1; } } } return f[n][m]; } }; è½¬å˜æˆä¸€ç»´æ•°ç»„çš„æ€è·¯ä¸ä¸Šé¢˜ä¸€æ ·ï¼Œæ—¶åˆ»è®°ä½è¦å­˜å‚¨ f[i][j] ä¹Ÿå°±æ˜¯å·¦ä¸Šè§’çš„å€¼ï¼Œå› ä¸ºåœ¨æœ¬æ¬¡æ­£åºæ›´æ–°ä¸­å·²ç»è¢«è¦†ç›–ã€‚\nint minDistance(string word1, string word2) { int n = word1.size(); int m = word2.size(); vector\u003cint\u003e f(m + 1, 0); for (int j = 0; j \u003c m; j++) f[j + 1] = j + 1; for (int i = 0; i \u003c n; i++) { int pre = f[0]; // last f[j+1] f[0] = i + 1; for (int j = 0; j \u003c m; j++) { int cur = f[j + 1]; if (word1[i] == word2[j]) { f[j + 1] = pre; } else { f[j + 1] = min(f[j], f[j + 1]) + 1; } pre = cur; } } return f[m]; } 712. Minimum ASCII Delete Sum for Two Strings é¢˜ç›®ç½‘å€. ç›´æ¥å¥—ç”¨ä¸Šä¸€é¢˜æ¨¡æ¿ï¼Œåªä¸è¿‡è¿™é¢˜åˆ é™¤çš„ä»£ä»·å˜æˆäº†å­—æ¯å¯¹åº”çš„äºŒ ASCII å€¼è€Œä¸æ˜¯æ¬¡æ•° 1.\nclass Solution { public: int minimumDeleteSum(string s1, string s2) { // f[i][j] = min(f[i][j-1] + s2[j], f[i-1][j] + s1[i]) int n = s1.size(); int m = s2.size(); vector\u003cint\u003e f(m + 1, 0); for (int j = 0; j \u003c m; j++) f[j + 1] = f[j] + static_cast\u003cint\u003e(s2[j]); for (int i = 0; i \u003c n; i++) { int pre = f[0]; // last f[j+1] f[0] += static_cast\u003cint\u003e(s1[i]); for (int j = 0; j \u003c m; j++) { int cur = f[j + 1]; if (s1[i] == s2[j]) { f[j + 1] = pre; } else { f[j + 1] = min(f[j] + static_cast\u003cint\u003e(s2[j]), f[j + 1] + static_cast\u003cint\u003e(s1[i])); } pre = cur; } } return f[m]; } }; 97. Interleaving String é¢˜ç›®ç½‘å€. é¦–å…ˆè¦æ˜ç¡®å¦‚æœ s1 é•¿åº¦å’Œ s2 é•¿åº¦ä¹‹å’Œä¸ç­‰äº s3 é•¿åº¦ï¼Œé‚£ä¹ˆè‚¯å®šä¸å¯èƒ½æ‹¼æˆåŠŸã€‚ dfs(i, j) è¡¨ç¤º s1 å‰ i ä¸ªå­—æ¯å’Œ s2 å‰ j ä¸ªå­—æ¯èƒ½å¦å’Œ s3 å‰ i+j ä¸ªå­—æ¯åŒ¹é…ä¸Šã€‚å› æ­¤è¦åŒ¹é…çš„ s3 ç´¢å¼•ä¸º k = i+j-1.\né€’å½’è¾¹ç•Œ: i \u003c 0 å¹¶ä¸” j \u003c 0 è¯´æ˜åˆšèƒ½æ‹¼æˆåŠŸã€‚ i \u003c 0 å¹¶ä¸” s2[0]-s2[j] å’Œ s3[0]-s3[j] å…¨éƒ¨ç›¸ç­‰è¯´æ˜èƒ½æˆåŠŸã€‚ j \u003c 0 å¹¶ä¸” s1[0]-s1[i] å’Œ s3[0]-s3[i] å…¨éƒ¨ç›¸ç­‰è¯´æ˜èƒ½æˆåŠŸã€‚ å›æº¯æ¡ä»¶: å½“å‰éƒ½èƒ½åŒ¹é…ä¸Š s1[i] == s3[k] \u0026\u0026 s2[j] == s3[k]ï¼Œéšä¾¿é€‰ä¸€ä¸ªè¿›è¡ŒåŒ¹é…ï¼Œå‰©ä¸‹çš„æœ‰èƒ½åŒ¹é…ä¸Šå°±æˆåŠŸ dfs(i-1, j, k-1) || dfs(i, j-1, k-1). å½“å‰åªæœ‰ä¸€ä¸ªåŒ¹é…ä¸Šå°±é€‰å®ƒ. å½“å‰ä¸¤è€…éƒ½åŒ¹é…ä¸ä¸Šï¼Œç”±äºé•¿åº¦åŠ èµ·æ¥ç›¸ç­‰ï¼Œé‚£ä¹ˆè‚¯å®šåŒ¹é…ä¸ä¸Šï¼Œä¸ç”¨å›æº¯äº†ï¼Œç›´æ¥è¿”å› false. æ‰€ä»¥é€»è¾‘å¯ä»¥ç®€åŒ–ä¸º s1 åŒ¹é…ä¸Šæ—¶é€’å½’æˆåŠŸ æˆ–è€… s2 åŒ¹é…ä¸Šæ—¶é€’å½’æˆåŠŸã€‚\nå› æ­¤è½¬æ¢æˆé€’æ¨ï¼Œåˆå§‹åŒ–çŠ¶æ€æ•°ç»„çš„æ—¶å€™ã€‚æ£€æŸ¥ i=0 è¾¹ç•Œæ¡ä»¶ä¸º å‰é¢çš„éƒ½åŒ¹é…ä¸Šä¸”å½“å‰å­—ç¬¦èƒ½åŒ¹é…ä¸Šã€‚j=0 æ—¶çš„è¾¹ç•Œæ¡ä»¶ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å‰©ä¸‹çš„å°±æ˜¯ç›´æ¥æŠ„ dfs.\nclass Solution { public: bool isInterleave(string s1, string s2, string s3) { int n = s1.size(), m = s2.size(), l = s3.size(); if (n + m != l) return false; // i \u003c 0 \u0026\u0026 j \u003c 0: if k \u003c 0 true, else false // i \u003c 0: while(s2[j--]==s3[j--]) return j==0; // j \u003c 0: while(s1[i--]==s3[i--]) return i==0; // s1[i] == s3[k] \u0026\u0026 s2[j] == s3[k] return dfs(i-1, j, k-1) || dfs(i, j-1, k-1) // == != return dfs(i-1, j, k-1) // != == return dfs(i, j-1, k-1) // != != return false vector\u003cvector\u003cbool\u003e\u003e f(n + 1, vector\u003cbool\u003e(m + 1, false)); f[0][0] = true; for (int j = 0; j \u003c m; j++) { // previous are all equal and current is equal f[0][j+1] = f[0][j] \u0026\u0026 (s2[j] == s3[j]); } for (int i = 0; i \u003c n; i++) { f[i+1][0] = f[i][0] \u0026\u0026 (s1[i] == s3[i]); for (int j = 0; j \u003c m; j++) { int k = i + j + 1; f[i+1][j+1] = (s1[i] == s3[k] \u0026\u0026 f[i][j+1]) || (s2[j] == s3[k] \u0026\u0026 f[i+1][j]); } } return f[n][m]; } }; ä¼˜åŒ–æˆä¸€ç»´æ•°ç»„ï¼Œè¿™é‡Œè§‚å¯Ÿåˆ°æ›´æ–°çŠ¶æ€çš„æ—¶å€™æ²¡æœ‰ç”¨åˆ° dfs(i-1, j-1) ä¹Ÿå°±ä¸éœ€è¦è¿›è¡Œä¿å­˜ã€‚\nclass Solution { public: bool isInterleave(string s1, string s2, string s3) { int n = s1.size(), m = s2.size(), l = s3.size(); if (n + m != l) return false; vector\u003cbool\u003e f(m + 1, false); f[0] = true; for (int j = 0; j \u003c m; j++) { // previous are all equal and current is equal f[j+1] = f[j] \u0026\u0026 (s2[j] == s3[j]); } for (int i = 0; i \u003c n; i++) { f[0] = f[0] \u0026\u0026 (s1[i] == s3[i]); for (int j = 0; j \u003c m; j++) { int k = i + j + 1; f[j+1] = (f[j+1] \u0026\u0026 s1[i] == s3[k]) || (f[j] \u0026\u0026 s2[j] == s3[k]); } } return f[m]; } }; 1458. Max Dot Product of Two Subsequences é¢˜ç›®ç½‘å€. dfs(i,j) è¡¨ç¤ºï¼šnums1 çš„å‰ i ä¸ªå…ƒç´ å’Œ nums2 çš„å‰ j ä¸ªå…ƒç´ æ‰€èƒ½æ„æˆçš„æœ€å¤§ç‚¹ç§¯ã€‚\nè¾¹ç•Œæ¡ä»¶: æˆ‘ä»¬éœ€è¦è®©é€’å½’å‡½æ•°çŸ¥é“ä¸€ä¸ªè‡³å…³é‡è¦çš„ä¿¡æ¯ï¼šâ€œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ˜¯å¦å·²ç»é€‰æ‹©è¿‡è‡³å°‘ä¸€å¯¹å…ƒç´ ï¼Ÿâ€ ä¸ºæ­¤ï¼Œæˆ‘ä»¬è¦ç»™å‡½æ•°å¢åŠ ä¸€ä¸ªçŠ¶æ€ dfs(i, j, has_taken):\nhas_taken == trueï¼šè¯´æ˜æˆ‘ä»¬å·²ç»æˆåŠŸæ„æˆäº†ä¸€ä¸ªéç©ºçš„å­åºåˆ—ï¼Œé€’å½’èµ°åˆ°äº†å°½å¤´ã€‚åç»­ä¸å¯èƒ½å†äº§ç”Ÿä»»ä½•ç‚¹ç§¯äº†ã€‚ æ­¤æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥è¿”å› 0ï¼Œå› ä¸ºå®ƒå¯¹ä¹‹å‰çš„ç‚¹ç§¯æ€»å’Œæ²¡æœ‰è´¡çŒ®ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿå½±å“ã€‚ has_taken == falseï¼šè¯´æ˜é€’å½’èµ°åˆ°äº†å°½å¤´ï¼Œä½†ä¸€æ¬¡å…ƒç´ é…å¯¹éƒ½æ²¡æœ‰é€‰æ‹©è¿‡ã€‚æ ¹æ®é¢˜æ„ï¼Œå­åºåˆ—å¿…é¡»æ˜¯éç©ºçš„ï¼Œæ‰€ä»¥è¿™æ¡â€œå…¨ç¨‹è·³è¿‡â€çš„è·¯å¾„æ˜¯æ— æ•ˆè·¯å¾„ã€‚ä¸ºäº†åœ¨ max æ¯”è¾ƒä¸­æ·˜æ±°æ‰è¿™æ¡æ— æ•ˆè·¯å¾„ï¼Œæˆ‘ä»¬å¿…é¡»è¿”å›ä¸€ä¸ªæå°å€¼ (æ¯”å¦‚ -Infinity æˆ– C++ é‡Œçš„ INT_MIN)ã€‚è¿™æ ·ä»»ä½•ä¸€ä¸ªæœ‰æ•ˆçš„ç‚¹ç§¯ (å“ªæ€•æ˜¯è´Ÿæ•°)éƒ½ä¼šæ¯”å®ƒå¤§ã€‚ å›æº¯è¿‡ç¨‹: é€’å½’åˆ° dfs(i, j) æ—¶æˆ‘ä»¬è€ƒè™‘ nums1[i-1] å’Œ nums2[j-1] è¿™ä¸¤ä¸ªå…ƒç´ ã€‚æˆ‘ä»¬æœ‰ä»¥ä¸‹å‡ ç§é€‰æ‹©ï¼š\nä¸ä½¿ç”¨ nums1[i-1]ï¼šé‚£ä¹ˆæœ€å¤§ç‚¹ç§¯å°±ç­‰äºåªè€ƒè™‘ nums1 å‰ i-1 ä¸ªå…ƒç´ å’Œ nums2 å‰ j ä¸ªå…ƒç´ çš„ç»“æœï¼Œå³ dfs(i-1, j). ä¸ä½¿ç”¨ nums2[j-1]ï¼šåŒç†ï¼Œç»“æœä¸º dfs(i, j-1). åŒæ—¶ä½¿ç”¨ nums1[i-1] å’Œ nums2[j-1]ï¼Œå®ƒä»¬çš„ç‚¹ç§¯æ˜¯ product = nums1[i-1] * nums2[j-1]. ç»§ç»­é€’å½’å¦‚æœ dfs(i-1, j-1) å¾—åˆ°çš„å‰©ä¸‹å­åºåˆ—çš„æœ€å¤§ç‚¹ç§¯æ˜¯ä¸€ä¸ªè´Ÿæ•° (æ¯”å¦‚ï¼Œæˆ‘ä»¬å®æ„¿ä¸è¦å®ƒï¼Œè€Œæ˜¯åªç”¨ product è‡ªå·±ã€‚è¿™ä¸ªå†³ç­–å¯ä»¥ç”¨ product + max(dfs(i-1, j-1), 0) æ¥å·§å¦™åœ°å®ç°ã€‚ class Solution { public: int maxDotProduct(vector\u003cint\u003e\u0026 nums1, vector\u003cint\u003e\u0026 nums2) { // i \u003c 0 || j \u003c 0 return -inf // i not j: dfs(i-1, j) // j not i: dfs(i, j-1) // not i not j: dfs(i-1, j-1) // in the situation of i not j --\u003e j not j // i and j : nums1[i]*nums2[j] + max(dfs(i-1, j-1), 0); // max in all int n = nums1.size(); int m = nums2.size(); vector\u003cvector\u003clong long\u003e\u003e f(n + 1, vector\u003clong long\u003e(m + 1, -1e18)); for (int i = 0; i \u003c n; i++) { for (int j = 0; j \u003c m; j++) { long long product = nums1[i] * nums2[j]; f[i + 1][j + 1] = max({f[i][j+1], f[i+1][j], product + max(f[i][j], 0LL)}); } } return f[n][m]; } }; ä¸€ç»´æ•°ç»„ç©ºé—´ä¼˜åŒ–å\nint maxDotProduct(vector\u003cint\u003e\u0026 nums1, vector\u003cint\u003e\u0026 nums2) { int n = nums1.size(); int m = nums2.size(); vector\u003clong long\u003e f(m + 1, -1e18); for (int i = 0; i \u003c n; i++) { long long pre = f[0]; for (int j = 0; j \u003c m; j++) { long long cur = f[j + 1]; long long product = nums1[i] * nums2[j]; f[j + 1] = max({f[j+1], f[j], product + max(pre, 0LL)}); pre = cur; } } return f[m]; } 300. Longest Increasing Subsequence é¢˜ç›®ç½‘å€. æœ€é•¿é€’å¢å­åºåˆ— (Longest Increasing Subsequence, LIS) å±äºå­é›†å‹å›æº¯ï¼Œæœ‰ä¸¤ä¸ªæ€è·¯ã€‚\né€‰æˆ–ä¸é€‰: ä¸ºäº†æ¯”è¾ƒå¤§å°ï¼Œéœ€è¦çŸ¥é“ä¸Šä¸€ä¸ªé€‰çš„æ•°å­—ã€‚ æšä¸¾é€‰å“ªä¸ª: æ¯”è¾ƒå½“å‰é€‰çš„æ•°å­—å’Œä¸‹ä¸€ä¸ªé€‰çš„æ•°å­—ï¼Œåªç”¨å½“å‰ä¸‹æ ‡è¿™ä¸€ä¸ªå‚æ•°ã€‚ é—®ï¼šä»€ä¹ˆæ ·çš„é¢˜ç›®é€‚åˆã€Œé€‰æˆ–ä¸é€‰ã€ï¼Œä»€ä¹ˆæ ·çš„é¢˜ç›®é€‚åˆã€Œæšä¸¾é€‰å“ªä¸ªã€ï¼Ÿ\nç­”ï¼šæˆ‘åˆ†æˆä¸¤ç±»é—®é¢˜ï¼š\nç›¸é‚»æ— å…³å­åºåˆ—é—®é¢˜ (æ¯”å¦‚ 0-1 èƒŒåŒ…)ï¼Œé€‚åˆã€Œé€‰æˆ–ä¸é€‰ã€ã€‚æ¯ä¸ªå…ƒç´ äº’ç›¸ç‹¬ç«‹ï¼Œåªéœ€ä¾æ¬¡è€ƒè™‘æ¯ä¸ªç‰©å“é€‰æˆ–ä¸é€‰ã€‚ ç›¸é‚»ç›¸å…³å­åºåˆ—é—®é¢˜ (æ¯”å¦‚æœ¬é¢˜)ï¼Œé€‚åˆã€Œæšä¸¾é€‰å“ªä¸ªã€ã€‚æˆ‘ä»¬éœ€è¦çŸ¥é“å­åºåˆ—ä¸­çš„ç›¸é‚»ä¸¤ä¸ªæ•°çš„å…³ç³»ã€‚å¯¹äºæœ¬é¢˜æ¥è¯´ï¼Œæšä¸¾ nums[i] å¿…é€‰ï¼Œç„¶åæšä¸¾å‰ä¸€ä¸ªå¿…é€‰çš„æ•°ï¼Œæ–¹ä¾¿æ¯”å¤§å°ã€‚å¦‚æœç¡¬è¦ç”¨ã€Œé€‰æˆ–ä¸é€‰ã€ï¼Œéœ€è¦é¢å¤–è®°å½•ä¸Šä¸€ä¸ªé€‰çš„æ•°çš„ä¸‹æ ‡ï¼Œç®—æ³•æ€»ä½“çš„ç©ºé—´å¤æ‚åº¦ä¸º $O(n^2)$ï¼Œè€Œæšä¸¾é€‰å“ªä¸ªåªéœ€è¦ $O(n)$ çš„ç©ºé—´ã€‚ å®šä¹‰ dfs(i) ä¸ºä»¥ nums[i] ä¸ºç»“å°¾çš„ LIS é•¿åº¦ï¼Œé‚£ä¹ˆéœ€è¦æšä¸¾ nums[j] ä½œä¸ºå€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œè¿™é‡Œè¦æ±‚ j \u003c i å¹¶ä¸” nums[j] \u003c nums[i]. ç”±æ­¤å¾—åˆ°å›æº¯ä¸‰é—®:\nå½“å‰æ“ä½œ: æšä¸¾ nums[j]. å­é—®é¢˜: ä»¥ nums[i] ä¸ºç»“å°¾çš„ LIS é•¿åº¦ã€‚ ä¸‹ä¸€ä¸ªå­é—®é¢˜: ä»¥ nums[j] ä¸ºç»“å°¾çš„ LIS é•¿åº¦ã€‚ ç”±æ­¤å¾—åˆ°æˆ‘ä»¬çš„é€’å½’æ¨¡å‹ $dfs(i)=\\max\\left\\{dfs(j)\\right\\}+1,\\quad j",
  "wordCount" : "9561",
  "inLanguage": "en",
  "datePublished": "2025-08-07T09:28:01+08:00",
  "dateModified": "2025-09-19T09:20:48+08:00",
  "author":[{
    "@type": "Person",
    "name": "WITHER"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/blogs/leetcode/07_dynamicprogramming/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "WITHER",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="WITHER (Alt + H)">WITHER</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="http://localhost:1313/zh/" title="ç®€ä½“ä¸­æ–‡"
                            aria-label="ç®€ä½“ä¸­æ–‡">ç®€ä½“ä¸­æ–‡</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="ğŸ  Home">
                    <span>ğŸ  Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about_me/" title="ğŸ™‹ğŸ»â€â™‚ï¸ Me">
                    <span>ğŸ™‹ğŸ»â€â™‚ï¸ Me</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/blogs/" title="ğŸ“š Blogs">
                    <span>ğŸ“š Blogs</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories/" title="ğŸ§© Categories">
                    <span>ğŸ§© Categories</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="ğŸ”– Tags">
                    <span>ğŸ”– Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="â± Archive">
                    <span>â± Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="ğŸ” Search (Alt &#43; /)" accesskey=/>
                    <span>ğŸ” Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/friends/" title="ğŸ¤ Friends">
                    <span>ğŸ¤ Friends</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;Â»&nbsp;<a href="http://localhost:1313/blogs/">Blogs</a>&nbsp;Â»&nbsp;<a href="http://localhost:1313/blogs/leetcode/">Leetcode</a></div>
    <h1 class="post-title entry-hint-parent">
      07 DynamicProgramming
    </h1>
    <div class="post-description">
      Algorithm questions about dynamic programming.
    </div>
    <div class="post-meta"><span title='2025-08-07 09:28:01 +0800 CST'>Aug-07-2025</span>&nbsp;Â·&nbsp;20 min&nbsp;Â·&nbsp;9561 words&nbsp;Â·&nbsp;WITHER

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#preliminary-198-house-robber" aria-label="Preliminary 198. House Robber">Preliminary 198. House Robber</a><ul>
                            
                    <li>
                        <a href="#70-climbing-stairs" aria-label="70. Climbing Stairs">70. Climbing Stairs</a></li>
                    <li>
                        <a href="#746-min-cost-climbing-stairs" aria-label="746. Min Cost Climbing Stairs">746. Min Cost Climbing Stairs</a></li>
                    <li>
                        <a href="#213-house-robber-ii" aria-label="213. House Robber II">213. House Robber II</a></li>
                    <li>
                        <a href="#740-delete-and-earn" aria-label="740. Delete and Earn">740. Delete and Earn</a></li>
                    <li>
                        <a href="#2466-count-ways-to-build-good-strings" aria-label="2466. Count Ways to Build Good Strings">2466. Count Ways to Build Good Strings</a></li></ul>
                    </li>
                    <li>
                        <a href="#01-knapsack-problem" aria-label="0/1 knapsack Problem">0/1 knapsack Problem</a><ul>
                            
                    <li>
                        <a href="#494-target-sum" aria-label="494. Target Sum">494. Target Sum</a></li>
                    <li>
                        <a href="#2915-length-of-the-longest-subsequence-that-sums-to-target" aria-label="2915. Length of the Longest Subsequence that Sums to Target">2915. Length of the Longest Subsequence that Sums to Target</a></li>
                    <li>
                        <a href="#416-partition-equal-subset-sum" aria-label="416. Partition Equal Subset Sum">416. Partition Equal Subset Sum</a></li>
                    <li>
                        <a href="#2787-ways-to-express-an-integer-as-sum-of-powers" aria-label="2787. Ways to Express an Integer as Sum of Powers">2787. Ways to Express an Integer as Sum of Powers</a></li></ul>
                    </li>
                    <li>
                        <a href="#unbounded-knapsack-problem" aria-label="Unbounded Knapsack Problem">Unbounded Knapsack Problem</a><ul>
                            
                    <li>
                        <a href="#322" aria-label="322.">322.</a></li>
                    <li>
                        <a href="#518-coin-change-ii" aria-label="518. Coin Change II">518. Coin Change II</a></li>
                    <li>
                        <a href="#279-perfect-squares" aria-label="279. Perfect Squares">279. Perfect Squares</a></li></ul>
                    </li>
                    <li>
                        <a href="#linear-dp" aria-label="Linear DP">Linear DP</a><ul>
                            
                    <li>
                        <a href="#1143-longest-common-subsequence" aria-label="1143. Longest Common Subsequence">1143. Longest Common Subsequence</a></li>
                    <li>
                        <a href="#72-edit-distance" aria-label="72. Edit Distance">72. Edit Distance</a></li>
                    <li>
                        <a href="#583-delete-operation-for-two-strings" aria-label="583. Delete Operation for Two Strings">583. Delete Operation for Two Strings</a></li>
                    <li>
                        <a href="#712-minimum-ascii-delete-sum-for-two-strings" aria-label="712. Minimum ASCII Delete Sum for Two Strings">712. Minimum ASCII Delete Sum for Two Strings</a></li>
                    <li>
                        <a href="#97-interleaving-string" aria-label="97. Interleaving String">97. Interleaving String</a></li>
                    <li>
                        <a href="#1458-max-dot-product-of-two-subsequences" aria-label="1458. Max Dot Product of Two Subsequences">1458. Max Dot Product of Two Subsequences</a></li>
                    <li>
                        <a href="#300-longest-increasing-subsequence" aria-label="300. Longest Increasing Subsequence">300. Longest Increasing Subsequence</a></li>
                    <li>
                        <a href="#282" aria-label="282.">282.</a></li>
                    <li>
                        <a href="#1964" aria-label="1964.">1964.</a></li>
                    <li>
                        <a href="#1671" aria-label="1671.">1671.</a></li>
                    <li>
                        <a href="#2111" aria-label="2111.">2111.</a></li>
                    <li>
                        <a href="#1626" aria-label="1626.">1626.</a></li></ul>
                    </li>
                    <li>
                        <a href="#fsm-dp" aria-label="FSM DP">FSM DP</a><ul>
                            
                    <li>
                        <a href="#122-unlimited-transaction-times" aria-label="122. (Unlimited Transaction Times)">122. (Unlimited Transaction Times)</a></li>
                    <li>
                        <a href="#309" aria-label="309.">309.</a></li>
                    <li>
                        <a href="#188-at-most-k-times" aria-label="188. (at most k times)">188. (at most k times)</a></li>
                    <li>
                        <a href="#follow-up" aria-label="Follow Up">Follow Up</a></li>
                    <li>
                        <a href="#121" aria-label="121.">121.</a></li>
                    <li>
                        <a href="#123" aria-label="123.">123.</a></li>
                    <li>
                        <a href="#714" aria-label="714.">714.</a></li>
                    <li>
                        <a href="#2786" aria-label="2786.">2786.</a></li>
                    <li>
                        <a href="#1911" aria-label="1911.">1911.</a></li></ul>
                    </li>
                    <li>
                        <a href="#interval-dp" aria-label="Interval DP">Interval DP</a><ul>
                            
                    <li>
                        <a href="#516-longest-alindromic-subsequence" aria-label="516. Longest alindromic Subsequence">516. Longest alindromic Subsequence</a></li>
                    <li>
                        <a href="#1039-minimum-score-triangulation-of-polygon" aria-label="1039. Minimum Score Triangulation of Polygon">1039. Minimum Score Triangulation of Polygon</a></li>
                    <li>
                        <a href="#375-guess-number-highe-or-lower-ii" aria-label="375. Guess Number Highe or Lower II">375. Guess Number Highe or Lower II</a></li>
                    <li>
                        <a href="#132-palindrome-partitioning-ii" aria-label="132. Palindrome Partitioning II">132. Palindrome Partitioning II</a></li>
                    <li>
                        <a href="#3040-maximum-number-of-operations-with-the-same-score-ii" aria-label="3040. Maximum Number of Operations with the Same Score II">3040. Maximum Number of Operations with the Same Score II</a></li>
                    <li>
                        <a href="#1547-minimum-cost-to-cut-a-stick" aria-label="1547. Minimum Cost to Cut a Stick">1547. Minimum Cost to Cut a Stick</a></li>
                    <li>
                        <a href="#1771-maximize-palindrome-length-from-subsequences" aria-label="1771. Maximize Palindrome Length from Subsequences">1771. Maximize Palindrome Length from Subsequences</a></li></ul>
                    </li>
                    <li>
                        <a href="#tree-dp" aria-label="Tree DP">Tree DP</a><ul>
                            
                    <li>
                        <a href="#543-diameter-of-binary-tree" aria-label="543. Diameter of Binary Tree">543. Diameter of Binary Tree</a></li>
                    <li>
                        <a href="#124-binary-tree-maximum-path-sum" aria-label="124. binary Tree Maximum Path Sum">124. binary Tree Maximum Path Sum</a></li>
                    <li>
                        <a href="#2246-longest-path-with-different-adjacent-characters" aria-label="2246. Longest Path with Different Adjacent Characters">2246. Longest Path with Different Adjacent Characters</a></li>
                    <li>
                        <a href="#687-longest-univalue-path" aria-label="687. Longest Univalue Path">687. Longest Univalue Path</a></li>
                    <li>
                        <a href="#3203-find-minimum-diameter-after-merging-two-trees" aria-label="3203. Find Minimum Diameter After Merging Two Trees">3203. Find Minimum Diameter After Merging Two Trees</a></li>
                    <li>
                        <a href="#1617-count-subtrees-with-max-distance-between-cities" aria-label="1617. Count Subtrees With Max Distance Between Cities">1617. Count Subtrees With Max Distance Between Cities</a></li>
                    <li>
                        <a href="#337-house-robber-iii-maximum-independent-set" aria-label="337. House Robber III (Maximum Independent Set)">337. House Robber III (Maximum Independent Set)</a></li>
                    <li>
                        <a href="#1377-frog-position-after-t-seconds" aria-label="1377. Frog Position After T Seconds">1377. Frog Position After T Seconds</a></li>
                    <li>
                        <a href="#2646" aria-label="2646.">2646.</a></li>
                    <li>
                        <a href="#968-binary-tree-cameras-minimum-dominating-set" aria-label="968. Binary Tree Cameras (Minimum Dominating Set)">968. Binary Tree Cameras (Minimum Dominating Set)</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    
    document.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();
    
        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        if (elements.length > 0) {
            
            activeElement = elements[0];
            const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
            document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
        }
    
        
        const topLink = document.getElementById('top-link');
        if (topLink) {
            topLink.addEventListener('click', (event) => {
                
                event.preventDefault();
    
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }
    }, false);
    
    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);
    
    window.addEventListener('scroll', () => {
        
        const scrollPosition = window.pageYOffset || document.documentElement.scrollTop;
    
        
        if (scrollPosition === 0) {
            return;
        }
    
        
        if (elements && elements.length > 0) {
            
            activeElement = Array.from(elements).find((element) => {
                if ((getOffsetTop(element) - scrollPosition) > 0 && 
                    (getOffsetTop(element) - scrollPosition) < window.innerHeight / 2) {
                    return element;
                }
            }) || activeElement;
    
            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                const tocLink = document.querySelector(`.inner ul li a[href="#${id}"]`);
                if (element === activeElement){
                    tocLink.classList.add('active');
    
                    
                    const tocContainer = document.querySelector('.toc .inner');
                    const linkOffsetTop = tocLink.offsetTop;
                    const containerHeight = tocContainer.clientHeight;
                    const linkHeight = tocLink.clientHeight;
    
                    
                    const scrollPosition = linkOffsetTop - (containerHeight / 2) + (linkHeight / 2);
                    tocContainer.scrollTo({ top: scrollPosition, behavior: 'smooth' });
                } else {
                    tocLink.classList.remove('active');
                }
            });
        }
    }, false);
    
    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);
    
    function checkTocPosition() {
        const width = document.body.scrollWidth;
    
        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }
    
    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
    
</script>

  <div class="post-content"><h1 id="preliminary-198-house-robber">Preliminary 198. House Robber<a hidden class="anchor" aria-hidden="true" href="#preliminary-198-house-robber">#</a></h1>
<p><a href="https://leetcode.cn/problems/house-robber">é¢˜ç›®ç½‘å€</a>. åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ˜¯çŠ¶æ€å®šä¹‰å’ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå¯¹äºå­é›†å‹å›æº¯æœ‰é€‰/ä¸é€‰ä»¥åŠé€‰å“ªä¸ªè¿™ä¸¤ç§æ€è·¯ï¼Œå¯¹äº DP ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å¯¹äºæœ¬é¢˜ä»ç¬¬ä¸€ä¸ªæˆ–è€…æœ€åä¸€ä¸ªæˆ¿å­è¿›è¡Œæ€è€ƒæ˜¯æœ€å®¹æ˜“çš„ã€‚å¦‚æœé€‰ï¼Œé‚£ä¹ˆå‰©ä¸‹ n-2 ä¸ªæˆ¿å­ï¼›å¦‚æœä¸é€‰ï¼Œé‚£ä¹ˆå‰©ä¸‹ n-1 ä¸ªæˆ¿å­ã€‚</p>
<p>è¿™é‡Œä»æœ€åä¸€ä¸ªæˆ¿å­å¼€å§‹ï¼Œå› æ­¤æˆ‘ä»¬çš„å›æº¯ä¸‰é—®å°±æ˜¯</p>
<ul>
<li>å½“å‰æ“ä½œ: æšä¸¾<strong>ç¬¬</strong> i ä¸ªæˆ¿å­é€‰ä¸é€‰ã€‚</li>
<li>å­é—®é¢˜: ä»<strong>å‰</strong> i ä¸ªæˆ¿å­ä¸­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œã€‚</li>
<li>ä¸‹ä¸€ä¸ªå­é—®é¢˜: åˆ†ç±»è®¨è®º:
<ul>
<li>é€‰: ä»<strong>å‰</strong> i-1 ä¸ªæˆ¿å­ä¸­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œã€‚</li>
<li>ä¸é€‰: ä»<strong>å‰</strong> i-2 ä¸ªæˆ¿å­ä¸­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œã€‚</li>
</ul>
</li>
</ul>
<p>æˆ‘ä»¬çš„å›æº¯æ¨¡æ¿å¯ä»¥å†™ä½œ dfs(i) = max(dfs(i-1), dfs(i-2) + nums[i]).</p>
<p>åœ¨å®šä¹‰ DFS æˆ–è€… DP æ•°ç»„çš„å«ä¹‰æ—¶ï¼Œåªèƒ½è¡¨ç¤ºä»ä¸€äº›å…ƒç´ ä¸­ç®—å‡ºçš„ç»“æœï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç»“æœä¸­ç®—å‡ºçš„ç»“æœã€‚æ³¨æ„è¿™é‡Œæ²¡æœ‰æŠŠå¾—åˆ°çš„é‡‘é¢ä½œä¸ºé€’å½’çš„è¾“å…¥å‚æ•°ï¼Œè€Œæ˜¯ä½œä¸ºè¿”å›å€¼ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">max</span><span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">nums</span><span class="p">),</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="n">nums</span><span class="p">)</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">rob</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">nums</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ç”±äºå›æº¯çš„æ—¶é—´å¤æ‚åº¦æ˜¯æŒ‡æ•°çº§åˆ«çš„ï¼Œä¸Šè¿°ç®—æ³•ä¼šè¶…æ—¶ã€‚ä»”ç»†è§‚å¯Ÿæœç´¢æ ‘ä¼šå‘ç°ï¼Œç¬¬ä¸€æ¬¡é€‰äº†åä¼šè¿›è¡Œ dfs(2)ï¼Œç¬¬ä¸€æ¬¡ä¸é€‰ç¬¬äºŒæ¬¡ä¹Ÿä¸é€‰åˆä¼šè¿›è¡Œ dfs(2)ï¼Œå¯¼è‡´äº†é‡å¤è®¡ç®—ã€‚ä¼˜åŒ–æ–¹æ³•æ˜¯ç¬¬ä¸€æ¬¡è®¡ç®—çš„æ—¶å€™å¯ä»¥é€šè¿‡ä¸€ä¸ªæ•°ç»„æ¥è®°å½•ç»“æœï¼Œå°†é€’å½’è®¡ç®—çš„ç»“æœä¿ç•™ä¸‹æ¥ï¼Œé‚£ä¹ˆä¸‹æ¬¡é€’å½’åˆ°åŒæ ·å…¥å‚çš„æ—¶å€™ï¼Œå°±ç›´æ¥è¿”å›å…ˆå‰ä¿å­˜çš„ç»“æœã€‚è¿™æ ·æ ‘ä¸­åªæœ‰ n ä¸ªèŠ‚ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦å¾—åˆ°ä¼˜åŒ–ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">cache</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">cache</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">// find in cache
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">return</span> <span class="n">cache</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">nums</span><span class="p">,</span> <span class="n">cache</span><span class="p">),</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="n">nums</span><span class="p">,</span> <span class="n">cache</span><span class="p">)</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="n">cache</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="p">;</span>  <span class="c1">// reserve result
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">rob</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">cache</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">nums</span><span class="p">,</span> <span class="n">cache</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>å…³äºæ—¶é—´å¤æ‚åº¦çš„è®¡ç®—æœ‰ä¸€ä¸ªå…¬å¼: <strong>çŠ¶æ€ä¸ªæ•° x å•æ¬¡çŠ¶æ€è®¡ç®—æ—¶é—´</strong>ã€‚è¿™é‡ŒçŠ¶æ€ä¸ªæ•°æ˜¯ $O(n)$ï¼Œå•è¯çŠ¶æ€è®¡ç®—æ—¶é—´æ˜¯ $O(1)$ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$. ä½¿ç”¨äº†ä¸€ä¸ª cache æ•°ç»„ï¼Œç©ºé—´å¤æ‚åº¦ä¸º $O(n)$.</p>
<p>è§‚å¯Ÿå¯å‘ç°è¿™é‡Œçš„ max è®¡ç®—å‘ç”Ÿåœ¨ dfs è°ƒç”¨ç»“æŸä¹‹åï¼Œä¹Ÿå°±æ˜¯é€’å½’ä¸­å½’çš„è¿‡ç¨‹ã€‚å†æ¬¡è§‚å¯Ÿæœç´¢æ ‘ä¼šå‘ç° dfs(0) å’Œ dfs(1) å½’åˆ° dfs(2)ï¼Œdfs(1) å’Œ dfs(2) å½’åˆ° dfs(3). æ—¢ç„¶çŸ¥é“å“ªäº›ç‚¹ä¼šå½’åˆ°å“ªä¸ªç‚¹ï¼Œå¹²è„†ç›´æ¥å»æ‰é€’å½’ä¸­çš„é€’ï¼Œåªä¿ç•™å½’çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥ä»æœ€ä¸‹é¢å‘ä¸Šè®¡ç®—ï¼Œè¿™å°±æ˜¯é€’æ¨ã€‚å…·ä½“æ¥è¯´å°±æ˜¯å°† dfs æ”¹æˆæ•°ç»„ï¼Œé€’å½’æ”¹æˆå¾ªç¯çš„å½¢å¼ï¼Œä½†è¿™æ ·éœ€è¦å¯¹é€’å½’è¾¹ç•Œä¹Ÿå°±æ˜¯ i=0 å’Œ i=1 ç‰¹æ®Šå¤„ç†ï¼Œå¦åˆ™ä¼šå‡ºç°è´Ÿæ•°ä¸‹æ ‡ã€‚</p>
$$
\begin{aligned}
dfs(i)&=\max\left(dfs(i-1),dfs(i-2)+nums[i]\right)\\
f[i]&=\max\left(f[i-1],f[i-2]+nums[i]\right)\\
f[i+2]&=\max\left(f[i+1],f[i]+nums[i]\right)\end{aligned}
$$<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">rob</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ä¸Šè¿°åšæ³•çš„ç©ºé—´å¤æ‚åº¦ä»ä¸º $O(n)$ï¼Œå†è§‚å¯Ÿé€’æ¨å…¬å¼å¯å‘ç°å½“å‰çŠ¶æ€çš„å€¼åªä¾èµ–äºä¸Šä¸€ä¸ªçŠ¶æ€å’Œä¸Šä¸Šä¸ªçŠ¶æ€ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åªä¿ç•™ä¸¤ä¸ªçŠ¶æ€å€¼ï¼Œåœ¨åœ°æ¨è¿‡ç¨‹ä¸­ä¸æ–­æ›´æ–°ã€‚æœ€åè¿”å› f1ï¼Œå› ä¸ºå®ƒæ˜¯æœ€åä¸€æ¬¡ç®—å‡ºçš„ newF.</p>
$$
\begin{aligned}&\text{å½“å‰}=\max (\text{ä¸Šä¸€ä¸ª,ä¸Šä¸Šä¸€ä¸ª}+nums[i])\\&f_0\text{ è¡¨ç¤ºä¸Šä¸Šä¸€ä¸ª,}f_1\text{ è¡¨ç¤ºä¸Šä¸€ä¸ª}\\&newF=\max\left(f_1,f_0+nums[i]\right)\\&f_0=f_1\\&f_1=newF\end{aligned}
$$<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">rob</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">f0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">newF</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">f0</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="n">f0</span> <span class="o">=</span> <span class="n">f1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">f1</span> <span class="o">=</span> <span class="n">newF</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="70-climbing-stairs">70. Climbing Stairs<a hidden class="anchor" aria-hidden="true" href="#70-climbing-stairs">#</a></h2>
<p><a href="https://leetcode.cn/problems/climbing-stairs">é¢˜ç›®ç½‘å€</a>. çˆ¬ n é˜¶æ¥¼æ¢¯çš„æ–¹æ³•æ•°é‡ï¼Œç­‰äº 2 éƒ¨åˆ†ä¹‹å’Œï¼š</p>
<ol>
<li>å…ˆçˆ¬ä¸€æ­¥ï¼ŒåŠ ä¸Šåé¢çš„ n-1 é˜¶æ¥¼æ¢¯çˆ¬æ³•ã€‚</li>
<li>å…ˆçˆ¬ä¸¤æ­¥ï¼ŒåŠ ä¸Šåé¢çš„ n-2 é˜¶æ¥¼æ¢¯çˆ¬æ³•ã€‚</li>
</ol>
<p>å› æ­¤é€’æ¨å…¬å¼æœ‰ <code>f(n) = f(n-1) + f(n-2)</code>. åˆå§‹åŒ– <code>f0=0</code> å¯ä»¥ç†è§£ä¸ºå¼€å§‹ä¸ç”¨çˆ¬å°± 1 ç§æ–¹æ³•ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">climbStairs</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// çˆ¬åˆ° n-1 é˜¶çš„æ–¹å¼ + çˆ¬åˆ° n-2 é˜¶çš„æ–¹å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// f(n) = f(n-1) + f(n-2)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">f0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">newF</span> <span class="o">=</span> <span class="n">f0</span> <span class="o">+</span> <span class="n">f1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">f0</span> <span class="o">=</span> <span class="n">f1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">f1</span> <span class="o">=</span> <span class="n">newF</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="746-min-cost-climbing-stairs">746. Min Cost Climbing Stairs<a hidden class="anchor" aria-hidden="true" href="#746-min-cost-climbing-stairs">#</a></h2>
<p><a href="https://leetcode.cn/problems/min-cost-climbing-stairs">é¢˜ç›®ç½‘å€</a>. çˆ¬ n é˜¶æ¥¼æ¢¯çš„æœ€å°èŠ±è´¹ï¼Œç­‰äºä¸‹é¢ 2 ç§æƒ…å†µçš„è¾ƒå°è€…ï¼š</p>
<ol>
<li>çˆ¬åˆ° n-1 é˜¶çš„æœ€å°èŠ±è´¹ + cost[n-1].</li>
<li>çˆ¬åˆ° n-2 é˜¶çš„æœ€å°èŠ±è´¹ + cost[n-2].</li>
</ol>
<p>å› æ­¤é€’æ¨å…¬å¼æœ‰ <code>f(n) = min(f(n-1) + cost[n-1], f(n-2) + cost[n-2])</code>. å› ä¸ºå¯ä»¥ä»ç¬¬ 0 é˜¶æˆ–è€… ç¬¬ 1 é˜¶å¼€å§‹çˆ¬ï¼Œå› æ­¤ åˆå§‹åŒ– <code>f0=f1=0</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">minCostClimbingStairs</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">cost</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// f(n) = min(f(n-1) + cost[n-1], f(n-2) + cost[n-2])
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">f0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">cost</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// nums[n-1] needs climb
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kt">int</span> <span class="n">newF</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">f1</span> <span class="o">+</span> <span class="n">cost</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">f0</span> <span class="o">+</span> <span class="n">cost</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="n">f0</span> <span class="o">=</span> <span class="n">f1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">f1</span> <span class="o">=</span> <span class="n">newF</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="213-house-robber-ii">213. House Robber II<a hidden class="anchor" aria-hidden="true" href="#213-house-robber-ii">#</a></h2>
<p><a href="https://leetcode.cn/problems/house-robber-ii">é¢˜ç›®ç½‘å€</a>. æ€è·¯è·Ÿ 198 ä¸€æ ·ï¼Œåªä¸è¿‡è¿™é‡Œæ˜¯å›´æˆä¸€åœˆï¼Œåˆ†æˆå·ç¬¬ä¸€å®¶å’Œå·æœ€åä¸€å®¶è¿›è¡Œé€’æ¨ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">rob</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">f0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">robFirst</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">robLast</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">robFirst</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f0</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">f1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">f0</span> <span class="o">=</span> <span class="n">f1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">f1</span> <span class="o">=</span> <span class="n">robFirst</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">f0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">f1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span> <span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">robLast</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f0</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">f1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">f0</span> <span class="o">=</span> <span class="n">f1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">f1</span> <span class="o">=</span> <span class="n">robLast</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">max</span><span class="p">(</span><span class="n">robFirst</span><span class="p">,</span> <span class="n">robLast</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="740-delete-and-earn">740. Delete and Earn<a hidden class="anchor" aria-hidden="true" href="#740-delete-and-earn">#</a></h2>
<p><a href="https://leetcode.cn/problems/delete-and-earn">é¢˜ç›®ç½‘å€</a>. æ•°ç»„ä¸­çš„æ¯ä¸ªæ•°å­— num éƒ½ä¼šè´¡çŒ®ä¸€å®šçš„ç‚¹æ•°ï¼Œä½†é€‰æ‹© num åï¼Œä¼šå¯¼è‡´ num-1 å’Œ num+1 çš„æ•°å­—æ— æ³•é€‰æ‹©ã€‚è¿™ç§é™åˆ¶ç±»ä¼¼äºâ€œæ‰“å®¶åŠ«èˆâ€é—®é¢˜ä¸­ä¸èƒ½é€‰æ‹©ç›¸é‚»çš„æˆ¿å­ã€‚éœ€è¦å°†é—®é¢˜è½¬åŒ–ä¸ºé€‰æ‹©ä¸€ç»„ä¸ç›¸é‚»çš„æ•°å­— (åœ¨å€¼åŸŸä¸Šä¸ç›¸é‚»)ï¼Œå¹¶æœ€å¤§åŒ–ç‚¹æ•°å’Œã€‚</p>
<ul>
<li>
<p>é¦–å…ˆç»Ÿè®¡æ¯ä¸ªæ•°å­—å‡ºç°çš„é¢‘ç‡ã€‚ä¾‹å¦‚ï¼Œå¯¹äº nums = [3,4,2]ï¼Œå¯ä»¥è®¡ç®—å‡º 2 å‡ºç° 1 æ¬¡ï¼Œ3 å‡ºç° 1 æ¬¡ï¼Œ4 å‡ºç° 1 æ¬¡ã€‚</p>
</li>
<li>
<p>å°†æ¯ä¸ªæ•°å­— i çš„ç‚¹æ•°å®šä¹‰ä¸º i * freq[i]ï¼Œå…¶ä¸­ freq[i] æ˜¯æ•°å­— i å‡ºç°çš„æ¬¡æ•°ã€‚è¿™æ ·ï¼Œé—®é¢˜è½¬åŒ–ä¸ºé€‰æ‹©ä¸€ç»„å€¼åŸŸä¸Šä¸ç›¸é‚»çš„æ•°å­—ï¼Œä½¿å¾—æ€»ç‚¹æ•°æœ€å¤§ã€‚</p>
</li>
<li>
<p>å‡è®¾æ•°ç»„ä¸­çš„æœ€å¤§å€¼ä¸º maxValï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä» 0 åˆ° maxVal çš„æ‰€æœ‰æ•°å­— (å³ä½¿æŸäº›æ•°å­—çš„é¢‘ç‡ä¸º 0)ã€‚</p>
</li>
</ul>
<p>å®šä¹‰çŠ¶æ€ f[i] è¡¨ç¤ºåœ¨å€¼åŸŸ [0, i] ä¸Šé€‰æ‹©æ•°å­—æ‰€èƒ½è·å¾—çš„æœ€å¤§ç‚¹æ•°ï¼Œä¸”æœ€åä¸€ä¸ªé€‰æ‹©çš„æ•°å­—å¯ä»¥æ˜¯ i æˆ–ä¸é€‰ i. å¯¹äºæ¯ä¸ªæ•°å­— iï¼Œæœ‰ä¸¤ç§é€‰æ‹©ï¼š</p>
<ul>
<li>ä¸é€‰: æœ€å¤§ç‚¹æ•°ä¸º dp[i-1] (å‰ i-1 ä¸ªæ•°å­—çš„æœ€å¤§ç‚¹æ•°)ã€‚</li>
<li>é€‰: è·å¾— i * freq[i] çš„ç‚¹æ•°ï¼Œä½†ä¸èƒ½é€‰ i-1ï¼Œå› æ­¤æœ€å¤§ç‚¹æ•°ä¸º dp[i-2] + i * freq[i].</li>
</ul>
<p>å› æ­¤æœ‰ <code>f[i] = max(f[i-1], f[i-2] + i * f[i])</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">deleteAndEarn</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">maxVal</span> <span class="o">=</span> <span class="n">ranges</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">nums</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">freq</span><span class="p">(</span><span class="n">maxVal</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="nl">num</span><span class="p">:</span> <span class="n">nums</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">freq</span><span class="p">[</span><span class="n">num</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">f0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">freq</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">maxVal</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">newF</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f0</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">freq</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">f1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">f0</span> <span class="o">=</span> <span class="n">f1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">f1</span> <span class="o">=</span> <span class="n">newF</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="2466-count-ways-to-build-good-strings">2466. Count Ways to Build Good Strings<a hidden class="anchor" aria-hidden="true" href="#2466-count-ways-to-build-good-strings">#</a></h2>
<p><a href="https://leetcode.cn/problems/count-ways-to-build-good-strings">é¢˜ç›®ç½‘å€</a>. ç›¸å½“äºä¸€æ¬¡å¯ä»¥çˆ¬ zero ä¸ªå°é˜¶æˆ–è€…ä¸€æ¬¡å¯ä»¥çˆ¬ one ä¸ªå°é˜¶ï¼Œç»Ÿè®¡çˆ¬ [low, high] å†…çš„å°é˜¶ä¸€å…±æœ‰å‡ ç§æ–¹æ³•ã€‚æ³¨æ„æ›´æ–°çš„æ—¶å€™é¿å…æ•°ç»„ä¸‹æ ‡æœªè´Ÿæ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">countGoodStrings</span><span class="p">(</span><span class="kt">int</span> <span class="n">low</span><span class="p">,</span> <span class="kt">int</span> <span class="n">high</span><span class="p">,</span> <span class="kt">int</span> <span class="n">zero</span><span class="p">,</span> <span class="kt">int</span> <span class="n">one</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// f[high - one] + f[high - zero]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">const</span> <span class="kt">int</span> <span class="n">MOD</span> <span class="o">=</span> <span class="mi">1000000007</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">high</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">minLen</span> <span class="o">=</span> <span class="n">zero</span> <span class="o">&lt;</span> <span class="n">one</span> <span class="o">?</span> <span class="nl">zero</span> <span class="p">:</span> <span class="n">one</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">minLen</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">high</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="n">zero</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="n">zero</span><span class="p">])</span> <span class="o">%</span> <span class="n">MOD</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="n">one</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="n">one</span><span class="p">])</span> <span class="o">%</span> <span class="n">MOD</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">low</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">high</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">ans</span> <span class="o">=</span> <span class="p">(</span><span class="n">ans</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">%</span> <span class="n">MOD</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h1 id="01-knapsack-problem">0/1 knapsack Problem<a hidden class="anchor" aria-hidden="true" href="#01-knapsack-problem">#</a></h1>
<p>0-1 èƒŒåŒ…:æœ‰ n ä¸ªç‰©å“,ç¬¬ i ä¸ªç‰©å“çš„ä½“ç§¯ä¸º w[i],ä»·å€¼ä¸º v[i]. æ¯ä¸ªç‰©å“è‡³å¤šé€‰ä¸€ä¸ª,æ±‚ä½“ç§¯å’Œä¸è¶…è¿‡ capacity æ—¶çš„æœ€å¤§ä»·å€¼å’Œã€‚</p>
<ul>
<li>å½“å‰æ“ä½œ: æšä¸¾ç¬¬ i ä¸ªç‰©å“é€‰æˆ–ä¸é€‰ã€‚é€‰ï¼Œå‰©ä½™å®¹é‡å‡å°‘ w[i]ï¼›ä¸é€‰ï¼Œå‰©ä½™å®¹é‡ä¸å˜ã€‚</li>
<li>å­é—®é¢˜: å‰©ä½™å®¹é‡ä¸º c æ—¶ï¼Œä»å‰ i ä¸ªç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œã€‚</li>
<li>ä¸‹ä¸€ä¸ªå­é—®é¢˜: åˆ†ç±»è®¨è®º
<ul>
<li>ä¸é€‰: å‰©ä½™å®¹é‡ä¸º c æ—¶ï¼Œä»å‰ i-1 ä¸ªç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œã€‚</li>
<li>é€‰: å‰©ä½™å®¹é‡ä¸º c - w[i] æ—¶ï¼Œä»å‰ i-1 ä¸ªç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œã€‚</li>
</ul>
</li>
</ul>
<p>å› æ­¤é€’å½’æ¨¡å‹ä¸º $dfs(i,c)=\max\left(dfs(i-1,c),dfs(i-1,c-w[i])+v[i]\right)$.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">capacity</span><span class="p">,</span>  <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">weights</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">values</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">weights</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">capacity</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">capacity</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">max</span><span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">capacity</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">                <span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">capacity</span> <span class="o">-</span> <span class="n">weights</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">zeroOneKnapsack</span><span class="p">(</span><span class="kt">int</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">weights</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">values</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">weights</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">values</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>å’Œä¸Šä¸€èŠ‚ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ•°ç»„æ¥è®°å½•é€’å½’è¿‡ç¨‹ä¸­æ¯ä¸ªå­é—®é¢˜çš„è§£ã€‚ç”±äºè¿™é‡Œé€’å½’éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œåˆå§‹åŒ–ä¸€ä¸ªäºŒç»´æ•°ç»„ <code>memo[n][capacity + 1]</code> è¡¨ç¤ºåœ¨å‰©ä½™å®¹é‡ capacity ä¸‹é€‰æ‹© i ä¸ªç‰©å“çš„æœ€å¤§ä»·å€¼ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">weights</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">values</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">memo</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">capacity</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">capacity</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">weights</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">capacity</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">capacity</span><span class="p">]</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">memo</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">capacity</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">memo</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                                   <span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">capacity</span> <span class="o">-</span> <span class="n">weights</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">weights</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">memo</span><span class="p">)</span> <span class="o">+</span> <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="494-target-sum">494. Target Sum<a hidden class="anchor" aria-hidden="true" href="#494-target-sum">#</a></h2>
<p><a href="https://leetcode.cn/problems/target-sum">é¢˜ç›®ç½‘å€</a>. å‡è®¾æ•°ç»„æ€»å’Œä¸º sï¼Œæ­£æ•°å’Œä¸º pï¼Œè´Ÿæ•°å’Œçš„ç»å¯¹å€¼ä¸º nï¼Œåˆ™ï¼š</p>
<ul>
<li>p - n = target</li>
<li>p + n = s</li>
</ul>
<p>æ¨å¯¼å¾— p = (target + s) / 2. å› æ­¤ï¼Œé—®é¢˜ç­‰ä»·äºåœ¨ nums ä¸­é€‰æ‹©ä¸€äº›æ•°ï¼Œä½¿å…¶å’Œæ°å¥½ä¸º (target + s) / 2. è¿™ç§é€‰æˆ–ä¸é€‰é—®é¢˜æ­£å¥½å¯ä»¥ç”¨ 01 èƒŒåŒ…çš„æ€è·¯è§£å†³ã€‚</p>
<p>ç”±äº p æ˜¯æ­£æ•´æ•° æ‰€ä»¥å¦‚æœ (target + s) / 2 &lt; 0 æˆ–è€… target + s æ˜¯å¥‡æ•°é‚£ä¹ˆè‚¯å®šæ‰¾ä¸åˆ°æ–¹æ¡ˆã€‚æ ¹æ®äº’æ–¥åŸç†ï¼Œæ€»çš„æ–¹æ¡ˆæ•°å¯ä»¥åˆ†æˆé€‰ç¬¬ i ä¸ªæ•°å’Œä¸é€‰ä¸¤ç§æƒ…å†µçš„æ–¹æ¡ˆæ•°ç›®ä¹‹å’Œã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// choose nums[i] as pos or not
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">target</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">target</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">nums</span><span class="p">,</span> <span class="n">target</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">nums</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span> <span class="o">+</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">nums</span><span class="p">,</span> <span class="n">target</span> <span class="o">-</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">findTargetSumWays</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// p: sum of positive nums
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// n: abs of sum of negative nums
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// then we have p - n = t p + n = sum(nums)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// p = (t + sum(nums)) / 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">s</span> <span class="o">=</span> <span class="n">accumulate</span><span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">nums</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">target</span> <span class="o">+=</span> <span class="n">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">target</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">target</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">target</span> <span class="o">/=</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">target</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">n</span><span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">nums</span><span class="p">,</span> <span class="n">target</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>è®° c = (target + s) / 2ï¼Œç”¨ä¸Šè®°å¿†åŒ–æœç´¢å¹¶ä¸”é¿å…ç´¢å¼•ä¸ºè´Ÿæ•°æˆ‘ä»¬æœ‰. f æ•°ç»„è¡¨ç¤ºå‰ i ä¸ªæ•°ä¸­è¿›è¡Œé€‰æ‹©ä½¿å’Œä¸º c çš„æ–¹æ¡ˆæ•°ç›®ã€‚</p>
$$
\begin{aligned}
dfs(i,c)&=dfs(i-1,c)+dfs(i-1,c-nums[i])\\
f[i][c]&=f[i-1][c]+f[i-1][c-nums[i]]\\
f[i+1][c]&=f[i][c]+f[i][c-nums[i]]
\end{aligned}
$$<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">findTargetSumWays</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">s</span> <span class="o">=</span> <span class="n">accumulate</span><span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">nums</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">target</span> <span class="o">+=</span> <span class="n">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">target</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">target</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">target</span> <span class="o">/=</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">target</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">target</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="o">-</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">target</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>ä»é€’æ¨å…¬å¼å¯ä»¥çœ‹å‡ºæ¯æ¬¡è®¡ç®—å®Œ f[i+1] åå°±ä¸éœ€è¦ç”¨åˆ° f[i] äº†ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯æ—¶æ¯åˆ»åªæœ‰ä¸¤ä¸ªæ•°ç»„çš„å…ƒç´ åœ¨å‚ä¸çŠ¶æ€è½¬ç§»ï¼Œå› æ­¤å¯ä»¥ç”¨ä¸¤ä¸ªæ•°ç»„æ¥å­˜å‚¨çŠ¶æ€ã€‚$f[(i+1)\%2][c]=f[i\%2][c]+f[i\%2][c-nums[i]]$</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">findTargetSumWays</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">s</span> <span class="o">=</span> <span class="n">accumulate</span><span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">nums</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">target</span> <span class="o">+=</span> <span class="n">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">target</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">target</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">target</span> <span class="o">/=</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">target</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">target</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">%</span><span class="mi">2</span><span class="p">][</span><span class="n">c</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">%</span><span class="mi">2</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">%</span><span class="mi">2</span><span class="p">][</span><span class="n">c</span><span class="o">-</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="o">%</span><span class="mi">2</span><span class="p">][</span><span class="n">target</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>æ›´è¿›ä¸€æ­¥ï¼Œå¯ä»¥åªç”¨ä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨çŠ¶æ€ã€‚ä½†ç”±äºåé¢çš„çŠ¶æ€å€¼ä¾èµ–äºå‰é¢çš„ï¼Œå› æ­¤æˆ‘ä»¬è¦ä»åå¾€å‰æ›´æ–°çŠ¶æ€ï¼Œé¿å…è¦†ç›–ã€‚ç”±äº nums[i] &gt; c çš„æ—¶å€™æ•°ç»„çš„çŠ¶æ€æ˜¯ä¸å˜çš„ï¼Œå› æ­¤åªç”¨æ›´æ–°ä» target åˆ° nums[i] çš„æƒ…å†µã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">findTargetSumWays</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">s</span> <span class="o">=</span> <span class="n">accumulate</span><span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">nums</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">target</span> <span class="o">+=</span> <span class="n">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">target</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">target</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">target</span> <span class="o">/=</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">target</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">target</span><span class="p">;</span> <span class="n">c</span> <span class="o">&gt;=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="n">c</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">c</span><span class="o">-</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">target</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="2915-length-of-the-longest-subsequence-that-sums-to-target">2915. Length of the Longest Subsequence that Sums to Target<a hidden class="anchor" aria-hidden="true" href="#2915-length-of-the-longest-subsequence-that-sums-to-target">#</a></h2>
<p><a href="https://leetcode.cn/problems/length-of-the-longest-subsequence-that-sums-to-target">é¢˜ç›®ç½‘å€</a>. f è¡¨ç¤ºä»å‰ i ä¸ªæ•°ä¸­è¿›è¡Œé€‰æ‹©ä½¿å¾—å’Œä¸º c çš„å­æ•°ç»„ä¸­æœ€é•¿çš„é•¿åº¦ã€‚é€’å½’çš„è¾¹ç•Œæ¡ä»¶ä¸º i = 0 æ—¶ è‹¥ target = 0 è¡¨ç¤ºèƒ½æ‰¾åˆ°ï¼Œè¿”å› 0 (ç©ºæ•°ç»„é•¿åº¦)ï¼›å¦åˆ™è¿”å› INT_MIN è¡¨ç¤ºæ‰¾ä¸åˆ°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">lengthOfLongestSubsequence</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// f[i][c] = max(f[i-1][c] , f[i-1][c - nums[i]] + 1)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// f is max sub seq len in first i nums which sum is c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">target</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MIN</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">target</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span> <span class="o">-</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">target</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">target</span><span class="p">]</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ä»¿ç…§ 0/1 èƒŒåŒ…å¯ä»¥è¿›è¡Œç©ºé—´ä¼˜åŒ–ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">lengthOfLongestSubsequence</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">target</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MIN</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">target</span><span class="p">;</span> <span class="n">c</span> <span class="o">&gt;=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="n">c</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="n">c</span> <span class="o">-</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">target</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="n">f</span><span class="p">[</span><span class="n">target</span><span class="p">]</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="416-partition-equal-subset-sum">416. Partition Equal Subset Sum<a hidden class="anchor" aria-hidden="true" href="#416-partition-equal-subset-sum">#</a></h2>
<p><a href="https://leetcode.cn/problems/partition-equal-subset-sum">é¢˜ç›®ç½‘å€</a>. ç›¸å½“äºåˆ¤æ–­èƒ½å¦é€‰æ‹©å…ƒç´ ä½¿å¾—å’Œç­‰äºæ•´ä¸ªæ•°ç»„ä¹‹å’Œçš„ä¸€åŠã€‚f è¡¨ç¤ºèƒ½å¦ä»å‰ i ä¸ªæ•°ä¸­è¿›è¡Œé€‰æ‹©ä½¿å¾—å’Œä¸º c.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="n">canPartition</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">s</span> <span class="o">=</span> <span class="n">accumulate</span><span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">nums</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">target</span> <span class="o">=</span> <span class="n">s</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// f[i][c] = f[i-1][c] || f[i-1][c-nums[i]]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// f is can select in first i ele which sum is c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">target</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">false</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">target</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">||</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="o">-</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">target</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="2787-ways-to-express-an-integer-as-sum-of-powers">2787. Ways to Express an Integer as Sum of Powers<a hidden class="anchor" aria-hidden="true" href="#2787-ways-to-express-an-integer-as-sum-of-powers">#</a></h2>
<p><a href="https://leetcode.cn/problems/ways-to-express-an-integer-as-sum-of-powers">é¢˜ç›®ç½‘å€</a>. æœ¬é¢˜ä¹Ÿæ˜¯æ°å¥½è£…æ»¡å‹ 0/1 èƒŒåŒ…çš„æ–¹æ¡ˆæ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è®¡ç®— pow çš„æ—¶å€™ç”±äºä¿®æ”¹äº†æ•°ç»„ç´¢å¼•é¿å…è´Ÿæ•°ï¼Œåº”è¯¥ä¸º <code>pow(i + 1, x)</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">numberOfWays</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">MOD</span> <span class="o">=</span> <span class="mi">1&#39;000&#39;000&#39;007</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="p">(</span><span class="n">pow</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">m</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// f[i][c] = f[i-1][c] + f[i-1][c-i^x];
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">val</span> <span class="o">=</span> <span class="n">pow</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>  <span class="c1">// nums[i] is i+1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="o">-</span><span class="n">val</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">m</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">n</span><span class="p">]</span> <span class="o">%</span> <span class="n">MOD</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ä¸€ç»´ç©ºé—´ä¼˜åŒ–åä»£ç å¦‚ä¸‹ï¼Œä¸€ç»´æ•°ç»„æ±‚æ–¹æ¡ˆæ•°æ˜¯åœ¨ä¸€ç›´ç´¯åŠ çš„ï¼Œæ‰€ä»¥å¾ªç¯å†…è¦å–æ¨¡ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">numberOfWays</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">MOD</span> <span class="o">=</span> <span class="mi">1&#39;000&#39;000&#39;007</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="n">pow</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">m</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// f[i][c] = f[i-1][c] + f[i-1][c-i^x];
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">val</span> <span class="o">=</span> <span class="n">pow</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>  <span class="c1">// nums[i] is i+1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span> <span class="n">c</span> <span class="o">&gt;=</span> <span class="n">val</span><span class="p">;</span> <span class="n">c</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="o">-</span><span class="n">val</span><span class="p">])</span> <span class="o">%</span> <span class="n">MOD</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">%</span> <span class="n">MOD</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h1 id="unbounded-knapsack-problem">Unbounded Knapsack Problem<a hidden class="anchor" aria-hidden="true" href="#unbounded-knapsack-problem">#</a></h1>
<p>å®Œå…¨èƒŒåŒ…:æœ‰ n <strong>ç§</strong>ç‰©å“,ç¬¬ i ç§ç‰©å“çš„ä½“ç§¯ä¸º w[i],ä»·å€¼ä¸º v[i]. æ¯ç§ç‰©å“å¯ä»¥é€‰æ— é™æ¬¡,æ±‚ä½“ç§¯å’Œä¸è¶…è¿‡ capacity æ—¶çš„æœ€å¤§ä»·å€¼å’Œã€‚</p>
<ul>
<li>å½“å‰æ“ä½œ: æšä¸¾ç¬¬ i ç§ç‰©å“é€‰ä¸€ä¸ªæˆ–ä¸é€‰ã€‚é€‰ï¼Œå‰©ä½™å®¹é‡å‡å°‘ w[i]ï¼›ä¸é€‰ï¼Œå‰©ä½™å®¹é‡ä¸å˜ã€‚</li>
<li>å­é—®é¢˜: å‰©ä½™å®¹é‡ä¸º c æ—¶ï¼Œä»å‰ i ç§ç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œã€‚</li>
<li>ä¸‹ä¸€ä¸ªå­é—®é¢˜: åˆ†ç±»è®¨è®º
<ul>
<li>ä¸é€‰: å‰©ä½™å®¹é‡ä¸º c æ—¶ï¼Œä»å‰ i-1 ç§ç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œã€‚</li>
<li>é€‰: å‰©ä½™å®¹é‡ä¸º c - w[i] æ—¶ï¼Œä»å‰ i ç§ç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œã€‚</li>
</ul>
</li>
</ul>
<p>ä»£ç å’Œä¹‹å‰å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯é€‰ç¬¬ i ç§ç‰©å“çš„æ—¶å€™é€’å½’åˆ°çš„è¿˜æ˜¯ i.</p>
<h2 id="322">322.<a hidden class="anchor" aria-hidden="true" href="#322">#</a></h2>
<p>è¿™å…¶å®æ˜¯å®Œå…¨èƒŒåŒ…çš„ä¸€ç§å˜å½¢ï¼ŒæŠŠç¡¬å¸çš„ä»·å€¼çœ‹æˆ 1ï¼ŒæŠŠæœ€å¤§æ”¹æˆæ±‚æœ€å°å°±å¯ä»¥å¾—åˆ°</p>
<p>$dfs(i,c)=\min\left(dfs(i-1,c),dfs(i-1,c-coins[i])+1\right)$.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">long</span> <span class="kt">long</span> <span class="n">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">coins</span><span class="p">,</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">amount</span> <span class="o">?</span> <span class="nl">INT_MAX</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">coins</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">amount</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">coins</span><span class="p">,</span> <span class="n">amount</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">min</span><span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">coins</span><span class="p">,</span> <span class="n">amount</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">                    <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">coins</span><span class="p">,</span> <span class="n">amount</span> <span class="o">-</span> <span class="n">coins</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">coinChange</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">coins</span><span class="p">,</span> <span class="kt">int</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">coins</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">long</span> <span class="kt">long</span>  <span class="n">res</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">coins</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span> <span class="kt">long</span><span class="p">)</span> <span class="n">amount</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">res</span> <span class="o">&lt;</span> <span class="n">INT_MAX</span> <span class="o">?</span> <span class="nl">res</span> <span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ç¿»è¯‘æˆé€’æ¨æƒ…å†µï¼Œä»å›æº¯å¯çŸ¥ï¼Œi = 0 (ç´¢å¼• +1 é˜²æ­¢è´Ÿæ•°) ä¸” amount = 0 æ—¶è¿”å› 0ï¼Œå…¶ä»–æƒ…å†µéƒ½æ˜¯ INT_MAX / 2 (é˜²æ­¢æº¢å‡º).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">coinChange</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">coins</span><span class="p">,</span> <span class="kt">int</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">coins</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">amount</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span> <span class="o">/</span> <span class="mi">2</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">amount</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">coins</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">c</span> <span class="o">-</span> <span class="n">coins</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">amount</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">INT_MAX</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">?</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">amount</span><span class="p">]</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>å¯¹äºå®Œå…¨èƒŒåŒ…é—®é¢˜ä½¿ç”¨ä¸€ç»´æ•°ç»„æ—¶ï¼Œå¯ä»¥ä»å‰å¾€åè®¡ç®—ï¼Œå› ä¸ºå½“å‰æ›´æ–°çš„çŠ¶æ€æ¥äºä¸Šä¸€æ­¥åŒæ—¶çš„çŠ¶æ€å’Œè¿™ä¸€æ­¥å·²ç»è®¡ç®—å‡ºæ¥çš„çŠ¶æ€ã€‚åŒæ—¶ç”±äº coins[i] &gt; c æ—¶çŠ¶æ€ä¸å˜ï¼Œæˆ‘ä»¬å¯ä»¥ä» c = coins[i] æ—¶å¼€å§‹æ›´æ–°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">coinChange</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">coins</span><span class="p">,</span> <span class="kt">int</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">coins</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">amount</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">coins</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">amount</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">c</span> <span class="o">-</span> <span class="n">coins</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">amount</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">INT_MAX</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">?</span> <span class="n">f</span><span class="p">[</span><span class="n">amount</span><span class="p">]</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>å¸¸è§å˜å½¢</p>
<ul>
<li>è‡³å¤šè£… capacityï¼Œæ±‚æ–¹æ¡ˆæ•°/æœ€å¤§ä»·å€¼å’Œ</li>
<li>æ°å¥½è£… capacityï¼Œæ±‚æ–¹æ¡ˆæ•°/æœ€å¤§/æœ€å°ä»·å€¼å’Œ</li>
<li>è‡³å°‘è£… capacityï¼Œæ±‚æ–¹æ¡ˆæ•°/æœ€å°ä»·å€¼å’Œ</li>
</ul>
<p>494 å¯¹äºè‡³å¤šçš„æƒ…å†µï¼Œdfs åœ¨è¾¹ç•Œåˆ¤å®šçš„æ—¶å€™å°±ä¸éœ€è¦åˆ¤æ–­ c æ˜¯å¦ç­‰äº 0 äº† (å› ä¸ºä¸è¦æ±‚è£…æ»¡)ï¼ŒåŒæ—¶åˆå§‹åŒ– f æ•°ç»„éƒ½ä¸º 1 (è‡³å°‘æœ‰ä¸€ç§æ–¹æ¡ˆä¹Ÿå°±æ˜¯ä¸è£…).</p>
<p>å¯¹äºè‡³å°‘çš„æƒ…å†µ dfs åœ¨è¾¹ç•Œåˆ¤å®šçš„æ—¶å€™æ¡ä»¶åˆ¤æ–­å˜ä¸º c &lt;= 0 (å› ä¸ºå¯ä»¥è¶…å‡º). ä½¿ç”¨é€’æ¨æ›´æ–°çŠ¶æ€çš„æ—¶å€™è¦å¾ªç¯åˆ° c = 0 çš„æƒ…å†µ (å› ä¸ºæ¯ä¸ªç‰©å“éƒ½å¯ä»¥é€‰æˆ–ä¸é€‰ï¼Œæœ‰ 2^n ç§æƒ…å†µï¼Œå› æ­¤è¿™æ ·å¾ªç¯æ¯ä¸ªç‰©å“éƒ½èƒ½è€ƒè™‘åˆ°ä¸¤ç§æƒ…å†µ)ï¼ŒåŒæ—¶æ”¹æˆ f[max(c-nums[i], 0)] è¡¨ç¤ºæŠŠ c &lt;= 0 çš„çŠ¶æ€éƒ½è®°å½•åˆ° f[0] é‡Œã€‚</p>
<h2 id="518-coin-change-ii">518. Coin Change II<a hidden class="anchor" aria-hidden="true" href="#518-coin-change-ii">#</a></h2>
<p><a href="https://leetcode.cn/problems/coin-change-ii">é¢˜ç›®ç½‘å€</a>. å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼Œå®šä¹‰ dfs(i,c) è¡¨ç¤ºç”¨å‰ i ç§ç¡¬å¸ç»„æˆé‡‘é¢ c çš„æ–¹æ¡ˆæ•°ï¼Œè€ƒè™‘ã€Œé€‰æˆ–ä¸é€‰ã€ï¼Œæœ‰ï¼š</p>
<ul>
<li>ä¸å†ç»§ç»­é€‰ç¬¬ i ç§ç¡¬å¸: <code>dfs(iâˆ’1,c)</code></li>
<li>ç»§ç»­é€‰ä¸€æšç¬¬ i ç§ç¡¬å¸: <code>dfs(i,câˆ’coins[i])</code></li>
</ul>
<p>æ ¹æ®åŠ æ³•åŸç†ï¼ŒäºŒè€…ç›¸åŠ å¾— <code>dfs(i,c) = dfs(iâˆ’1,c) + dfs(i,câˆ’coins[i])</code></p>
<ul>
<li>é€’å½’è¾¹ç•Œ: <code>dfs(âˆ’1,0) = 1</code>, <code>dfs(âˆ’1, &gt;0) = 0</code> (éå†å®Œæ‰€æœ‰ç¡¬å¸ä»ç„¶æ‰¾ä¸åˆ°å’Œä¸º c)</li>
<li>é€’å½’å…¥å£: <code>dfs(nâˆ’1,amount)</code></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">change</span><span class="p">(</span><span class="kt">int</span> <span class="n">amount</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">coins</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// f[i][c] = f[i-1][c] + f[i][c-coins[i]]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">coins</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="o">&gt;</span><span class="p">(</span><span class="n">amount</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">amount</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">coins</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">c</span> <span class="o">-</span> <span class="n">coins</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">amount</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ä¸€ç»´æ•°ç»„ç©ºé—´ä¼˜åŒ–ï¼Œå®Œå…¨èƒŒåŒ…é—®é¢˜æ­£å‘æ›´æ–°çŠ¶æ€ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">change</span><span class="p">(</span><span class="kt">int</span> <span class="n">amount</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">coins</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// f[i][c] = f[i-1][c] + f[i][c-coins[i]]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">coins</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">amount</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">coins</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">amount</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">c</span> <span class="o">-</span> <span class="n">coins</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">amount</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="279-perfect-squares">279. Perfect Squares<a hidden class="anchor" aria-hidden="true" href="#279-perfect-squares">#</a></h2>
<p><a href="https://leetcode.cn/problems/perfect-squares">é¢˜ç›®ç½‘å€</a>. å®šä¹‰ dfs(i,c) ä¸ºä»å‰ i ä¸ªå®Œå…¨å¹³æ–¹æ•°ä¸­é€‰ä¸€äº›æ•° (å¯ä»¥é‡å¤é€‰)ï¼Œæ»¡è¶³å…ƒç´ å’Œæ°å¥½ç­‰äº cï¼Œæœ€å°‘è¦é€‰çš„æ•°å­—ä¸ªæ•°ã€‚</p>
<ul>
<li>é€’å½’è¾¹ç•Œ: <code>dfs(0,0) = 0</code>, <code>dfs(0,&gt;0) = INF</code> (è¦å– minï¼Œåˆå§‹åŒ–ä¸ºæœ€å¤§)</li>
<li>é€’å½’å…¥å£: <code>dfs(sqrt(n),n)</code></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">numSquares</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// f[i][c] = min(f[i-1][c], f[i][c - i^2] + 1)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span> <span class="o">/</span> <span class="mi">2</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">c</span> <span class="o">-</span> <span class="n">val</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">m</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">n</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ä¸€ç»´æ•°ç»„ç©ºé—´ä¼˜åŒ–</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">numSquares</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// f[i][c] = min(f[i-1][c], f[i][c - i^2] + 1)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">val</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">c</span> <span class="o">-</span> <span class="n">val</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h1 id="linear-dp">Linear DP<a hidden class="anchor" aria-hidden="true" href="#linear-dp">#</a></h1>
<h2 id="1143-longest-common-subsequence">1143. Longest Common Subsequence<a hidden class="anchor" aria-hidden="true" href="#1143-longest-common-subsequence">#</a></h2>
<p><a href="https://leetcode.cn/problems/longest-common-subsequence">é¢˜ç›®ç½‘å€</a>. åœ¨é»˜è®¤æƒ…å†µä¸‹å­ä¸²å’Œå­æ•°ç»„è¦æ±‚è¿ç»­ï¼Œå­åºåˆ—ä¸ä¸€å®šè¿ç»­ã€‚å…¬å…±å­åºåˆ—åˆ™ä¸ºä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­éƒ½æœ‰çš„å­åºåˆ—ã€‚</p>
<p>è®¾ä¸¤ä¸ªå­—ç¬¦ä¸²åˆ†åˆ«ä¸º s å’Œ tï¼Œé•¿åº¦åˆ†åˆ«ä¸º m å’Œ n. å­åºåˆ—çš„æœ¬è´¨å°±æ˜¯é€‰æˆ–ä¸é€‰ï¼Œè€ƒè™‘æœ€åä¸€å¯¹å­—æ¯ï¼Œä¸¤ä¸¤ç»„åˆå°±æœ‰å››ç§æƒ…å†µã€‚</p>
<ol>
<li>é€‰x ä¸” é€‰y</li>
<li>xå¾…å®š ä¸” ä¸é€‰y</li>
<li>ä¸é€‰x ä¸” yå¾…å®š</li>
<li>ä¸é€‰x ä¸” ä¸é€‰y</li>
</ol>
<p>ç”±æ­¤å¯ä»¥å¾—åˆ°æˆ‘ä»¬çš„å›æº¯ä¸‰é—®</p>
<ul>
<li>å½“å‰æ“ä½œ: è€ƒè™‘ s[i] å’Œ t[j] é€‰æˆ–ä¸é€‰ã€‚</li>
<li>å­é—®é¢˜: s å‰ i ä¸ªå­—æ¯å’Œ t å‰ j ä¸ªå­—æ¯çš„ LCS é•¿åº¦ã€‚</li>
<li>ä¸‹ä¸€ä¸ªå­é—®é¢˜: æ ¹æ®é€‰æ‹©æƒ…å†µè¿›è¡Œåˆ†ç±»è®¨è®º:
<ul>
<li>s å‰ i-1 ä¸ªå­—æ¯å’Œ t å‰ j-1 ä¸ªå­—æ¯çš„ LCS é•¿åº¦ã€‚</li>
<li>s å‰ i-1 ä¸ªå­—æ¯å’Œ t å‰ j ä¸ªå­—æ¯çš„ LCS é•¿åº¦ã€‚</li>
<li>s å‰ i ä¸ªå­—æ¯å’Œ t å‰ j-1 ä¸ªå­—æ¯çš„ LCS é•¿åº¦ã€‚</li>
</ul>
</li>
</ul>
<p>æ³¨æ„è¿™é‡Œéƒ½é€‰ (å½“ç„¶åªæœ‰ <code>s[i]==t[j]</code> æ—¶æ‰èƒ½éƒ½é€‰) æˆ–è€…éƒ½ä¸é€‰çš„ä¸‹ä¸€ä¸ªå­é—®é¢˜æ˜¯ä¸€æ ·çš„ (å¹¶ä¸”é€‰è‚¯å®šæ¯”ä¸é€‰å¥½)ï¼Œéƒ½å¯¹åº”ç¬¬ä¸€ç§æƒ…å†µã€‚å› æ­¤å¾—åˆ°å›æº¯å…¬å¼å¦‚ä¸‹</p>
$$
\begin{aligned}
&dfs(i,j)=\begin{cases}
    \max (dfs(i-1,j), dfs(i,j-1),  dfs(i-1,j-1)+1)&s[i]=t[j] \\
\max dfs(i-1,j),dfs(i,j-1),dfs(i-1,j-1)&s[i]\neq t[j] \end{cases} \\
\implies &dfs(i,j)=\max\left(dfs(i-1,j),dfs(i,j-1),dfs(i-1,j-1)+(s[i]= t[j])\right)
\end{aligned}
$$<p>è¿™é‡Œæœ‰ä¸¤ä¸ªä¸èƒ½å¿½ç•¥çš„é—®é¢˜</p>
<ol>
<li><code>s[i] == t[j]</code> æ—¶å€™éœ€è¦è€ƒè™‘ dfs(i-1, j) å’Œ dfs(i, j-1) ä¹Ÿå°±æ˜¯åªé€‰ä¸€ä¸ªçš„æƒ…å†µå—ï¼Ÿ</li>
</ol>
<p>dfs(i-1, j) å’Œ dfs(i, j-1) æ˜¯ä¸è€ƒè™‘å½“å‰å­—ç¬¦ç›¸ç­‰æ—¶å€™å¾—åˆ°çš„ LCS é•¿åº¦ï¼Œ</p>
<ol start="2">
<li><code>s[i] != t[j]</code> æ—¶å€™éœ€è¦è€ƒè™‘ dfs(i-1, j-1) å°±æ˜¯ä¸¤ä¸ªéƒ½ä¸é€‰çš„æƒ…å†µå—ï¼Ÿ</li>
</ol>
<p>æ ¹æ®ä¸‹é¢å¼å­å¯ä»¥å‘ç°ï¼Œå¦‚æœè¿™æ¬¡é€‰æ‹© s[i] é‚£ä¹ˆä¸‹ä¸€æ¬¡é€‰æ‹© t[j] å°±é€’å½’åˆ° dfs(i-1, j-1)ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸¤ä¸ªéƒ½ä¸é€‰çš„æƒ…å†µå·²ç»åŒ…å«åœ¨ä¹‹é€‰ä¸€ä¸ªçš„æƒ…å†µé‡Œé¢äº†ã€‚
</p>
$$
dfs(i,j){\operatorname*{\longrightarrow}}dfs(i-1,j){\operatorname*{\longrightarrow}}dfs(i-1,j-1)
$$<p>æ‰€ä»¥æœ€ç»ˆå…¬å¼å¯ä»¥ç®€åŒ–ä¸º</p>
$$
dfs(i,j)=\begin{cases}dfs(i-1,j-1)+1&s[i]=t[j]\\\max\left(dfs(i-1,j),dfs(i,j-1)\right)&s[i]\neq t[j]&\end{cases}
$$<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">,</span> <span class="n">string</span> <span class="n">text1</span><span class="p">,</span> <span class="n">string</span> <span class="n">text2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">text1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">text2</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">max</span><span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">),</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">longestCommonSubsequence</span><span class="p">(</span><span class="n">string</span> <span class="n">text1</span><span class="p">,</span> <span class="n">string</span> <span class="n">text2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">text1</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">text2</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„ç¿»è¯‘æˆé€’æ¨å½¢å¼ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">longestCommonSubsequence</span><span class="p">(</span><span class="n">string</span> <span class="n">text1</span><span class="p">,</span> <span class="n">string</span> <span class="n">text2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">text1</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">text2</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">text1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">text2</span><span class="p">[</span><span class="n">j</span><span class="p">]){</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">m</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>è¿›ä¸€æ­¥å¯ä»¥ç”¨ä¸€ç»´æ•°ç»„è¿›è¡Œè½¬æ¢ã€‚æœ¬é¢˜ <code>f[i+1][j+1]</code> éœ€è¦ä» <code>f[i+1][j]</code> è½¬ç§»è¿‡æ¥ï¼Œè¿™åªèƒ½æ­£åºæšä¸¾ j. å€’åºæšä¸¾çš„è¯ï¼Œ<code>f[i+1][j]</code> è¿˜æ²¡æœ‰è®¡ç®—å‡ºæ¥ã€‚åŒæ—¶è¦ä¿ç•™ä¸Šä¸€æ¬¡ <code>f[i][j+1]</code> ä¹Ÿå°±æ˜¯æœ¬è½® <code>f[i][j]</code> çš„çŠ¶æ€ï¼Œå› ä¸ºæ­£åºæ›´æ–°çš„æ—¶å€™å·²ç»è¢«è¦†ç›–ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">longestCommonSubsequence</span><span class="p">(</span><span class="n">string</span> <span class="n">text1</span><span class="p">,</span> <span class="n">string</span> <span class="n">text2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">text1</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">text2</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">pre</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>  <span class="c1">// last j + 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">text1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">text2</span><span class="p">[</span><span class="n">j</span><span class="p">]){</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pre</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">pre</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">m</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="72-edit-distance">72. Edit Distance<a hidden class="anchor" aria-hidden="true" href="#72-edit-distance">#</a></h2>
<p><a href="https://leetcode.cn/problems/edit-distance">é¢˜ç›®ç½‘å€</a>. è¿™é¢˜éœ€è¦æ€è·¯è½¬æ¢ä¸€ä¸‹ï¼Œdfs(i, j) è¡¨ç¤º s å‰ i ä¸ªå­—æ¯å’Œ t å‰ j ä¸ªå­—æ¯å®ŒæˆåŒ¹é…æ‰€éœ€è¦çš„æœ€å°æ“ä½œæ•°ã€‚å¦‚æœ <code>s[i] != t[j]</code> ä¸‹é¢ä¸‰ç§æ“ä½œåˆ†åˆ«ç›¸å½“äº</p>
<ul>
<li>æ’å…¥: è¦è¿›è¡ŒåŒ¹é…é‚£æ’å…¥çš„è‚¯å®šæ—¶å’Œ t[j] ä¸€æ ·çš„å­—æ¯ï¼Œä¹Ÿå°±ç›¸å½“äºæŠŠ t[j] ç»™æŠ¹å»ï¼Œå› æ­¤é€’å½’åˆ° dfs(i, j-1).</li>
<li>åˆ é™¤: é€’å½’åˆ° dfs(j-1, j).</li>
<li>æ›¿æ¢: ç›¸å½“äºä¸¤è¾¹éƒ½è¿›è¡ŒæŠ¹å»ï¼Œé€’å½’åˆ° dfs(i-1, j-1).</li>
</ul>
<p>å› æ­¤æˆ‘ä»¬çš„å›æº¯å…¬å¼ä¸º</p>
$$
dfs(i,j)=\begin{cases}dfs(i-1,j-1)&s[i]=t[j]\\\min{\left(dfs(i,j-1),dfs(i-1,j),dfs(i-1,j-1)\right)+1}&s[i]\neq t[j]\end{cases}
$$<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">,</span> <span class="n">string</span> <span class="n">word1</span><span class="p">,</span> <span class="n">string</span> <span class="n">word2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// surplus chars need to be deleted
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">// 0 - j have j+1 chars
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="n">j</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">word1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">word2</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>  <span class="c1">// no need operation
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">min</span><span class="p">({</span><span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">),</span> <span class="c1">// insert
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">),</span>     <span class="c1">// erase
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">)})</span>  <span class="c1">// substitute
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">minDistance</span><span class="p">(</span><span class="n">string</span> <span class="n">word1</span><span class="p">,</span> <span class="n">string</span> <span class="n">word2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">word1</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">word2</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>åŒæ ·å¯ä»¥ç¿»è¯‘æˆé€’æ¨ï¼Œæ³¨æ„è¾¹ç•Œæ¡ä»¶çš„ç¿»è¯‘ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">minDistance</span><span class="p">(</span><span class="n">string</span> <span class="n">word1</span><span class="p">,</span> <span class="n">string</span> <span class="n">word2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">word1</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">word2</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">word1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">word2</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">({</span><span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]})</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">m</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>ç”¨ä¸€ç»´æ•°ç»„è¿›è¡Œç©ºé—´ä¼˜åŒ–çš„æ—¶å€™ï¼Œæ³¨æ„ä¿ç•™ä¸Šä¸€çŠ¶æ€ i çš„å‰ä¸€ä¸ªå€¼å¹¶ä¸”æ›´æ–°å½“å‰ i+1 çŠ¶æ€çš„è¾¹ç•Œæ¡ä»¶ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">minDistance</span><span class="p">(</span><span class="n">string</span> <span class="n">word1</span><span class="p">,</span> <span class="n">string</span> <span class="n">word2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">word1</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">word2</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">pre</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>  <span class="c1">// last f[j+1]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">// cur f[i+1] = i + 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">word1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">word2</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pre</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">({</span><span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">pre</span><span class="p">})</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">pre</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">m</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="583-delete-operation-for-two-strings">583. Delete Operation for Two Strings<a hidden class="anchor" aria-hidden="true" href="#583-delete-operation-for-two-strings">#</a></h2>
<p><a href="https://leetcode.cn/problems/delete-operation-for-two-strings">é¢˜ç›®ç½‘å€</a>. è¾¹ç•Œæ¡ä»¶: å’Œä¸Šä¸€é¢˜ä¸€æ ·ï¼Œå½“æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²éå†å®Œçš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªå­—ç¬¦ä¸²åº”è¯¥å…¨éƒ¨åˆ é™¤ã€‚
é€’å½’æ¡ä»¶: <code>s[i] != t[j]</code> ç”±äºä¸€æ¬¡åªèƒ½åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥å‰©ä½™æ­¥æ•°ä¸ºåˆ†åˆ«åˆ é™¤ä¸¤è€…çš„æœ€å°å€¼å†åŠ ä¸Šå½“å‰åˆ é™¤æ“ä½œçš„ä¸€æ¬¡ <code>min(dfs(i-1, j), dfs(i, j-1)) + 1</code>. ç›¸ç­‰æ—¶åˆ™ä¸ç”¨åˆ é™¤ï¼Œå¾€ä¸‹é€’å½’ä¸€æ¬¡ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">minDistance</span><span class="p">(</span><span class="n">string</span> <span class="n">word1</span><span class="p">,</span> <span class="n">string</span> <span class="n">word2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// s[i] != t[j] min(dfs(i-1, j), dfs(i, j-1)) + 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//       =      dfs(i-1, j-1)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// i = 0 return j+1; j = 0 return i + 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">word1</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">word2</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">word1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">word2</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">m</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>è½¬å˜æˆä¸€ç»´æ•°ç»„çš„æ€è·¯ä¸ä¸Šé¢˜ä¸€æ ·ï¼Œæ—¶åˆ»è®°ä½è¦å­˜å‚¨ <code>f[i][j]</code> ä¹Ÿå°±æ˜¯å·¦ä¸Šè§’çš„å€¼ï¼Œå› ä¸ºåœ¨æœ¬æ¬¡æ­£åºæ›´æ–°ä¸­å·²ç»è¢«è¦†ç›–ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">minDistance</span><span class="p">(</span><span class="n">string</span> <span class="n">word1</span><span class="p">,</span> <span class="n">string</span> <span class="n">word2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">word1</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">word2</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">pre</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>  <span class="c1">// last f[j+1]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">word1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">word2</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pre</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">pre</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">m</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="712-minimum-ascii-delete-sum-for-two-strings">712. Minimum ASCII Delete Sum for Two Strings<a hidden class="anchor" aria-hidden="true" href="#712-minimum-ascii-delete-sum-for-two-strings">#</a></h2>
<p><a href="https://leetcode.cn/problems/minimum-ascii-delete-sum-for-two-strings">é¢˜ç›®ç½‘å€</a>. ç›´æ¥å¥—ç”¨ä¸Šä¸€é¢˜æ¨¡æ¿ï¼Œåªä¸è¿‡è¿™é¢˜åˆ é™¤çš„ä»£ä»·å˜æˆäº†å­—æ¯å¯¹åº”çš„äºŒ ASCII å€¼è€Œä¸æ˜¯æ¬¡æ•° 1.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">minimumDeleteSum</span><span class="p">(</span><span class="n">string</span> <span class="n">s1</span><span class="p">,</span> <span class="n">string</span> <span class="n">s2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// f[i][j] = min(f[i][j-1] + s2[j], f[i-1][j] + s1[i])
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s1</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">s2</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">s2</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">pre</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>  <span class="c1">// last f[j+1]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s2</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pre</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">s2</span><span class="p">[</span><span class="n">j</span><span class="p">]),</span> 
</span></span><span class="line"><span class="cl">                                <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="n">pre</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">m</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="97-interleaving-string">97. Interleaving String<a hidden class="anchor" aria-hidden="true" href="#97-interleaving-string">#</a></h2>
<p><a href="https://leetcode.cn/problems/interleaving-string">é¢˜ç›®ç½‘å€</a>. é¦–å…ˆè¦æ˜ç¡®å¦‚æœ s1 é•¿åº¦å’Œ s2 é•¿åº¦ä¹‹å’Œä¸ç­‰äº s3 é•¿åº¦ï¼Œé‚£ä¹ˆè‚¯å®šä¸å¯èƒ½æ‹¼æˆåŠŸã€‚
dfs(i, j) è¡¨ç¤º s1 å‰ i ä¸ªå­—æ¯å’Œ s2 å‰ j ä¸ªå­—æ¯èƒ½å¦å’Œ s3 å‰ i+j ä¸ªå­—æ¯åŒ¹é…ä¸Šã€‚å› æ­¤è¦åŒ¹é…çš„ s3 ç´¢å¼•ä¸º k = i+j-1.</p>
<ul>
<li>é€’å½’è¾¹ç•Œ:
<ul>
<li>i &lt; 0 å¹¶ä¸” j &lt; 0 è¯´æ˜åˆšèƒ½æ‹¼æˆåŠŸã€‚</li>
<li>i &lt; 0 å¹¶ä¸” <code>s2[0]-s2[j]</code> å’Œ <code>s3[0]-s3[j]</code> å…¨éƒ¨ç›¸ç­‰è¯´æ˜èƒ½æˆåŠŸã€‚</li>
<li>j &lt; 0 å¹¶ä¸” <code>s1[0]-s1[i]</code> å’Œ <code>s3[0]-s3[i]</code> å…¨éƒ¨ç›¸ç­‰è¯´æ˜èƒ½æˆåŠŸã€‚</li>
</ul>
</li>
<li>å›æº¯æ¡ä»¶:
<ul>
<li>å½“å‰éƒ½èƒ½åŒ¹é…ä¸Š <code>s1[i] == s3[k] &amp;&amp; s2[j] == s3[k]</code>ï¼Œéšä¾¿é€‰ä¸€ä¸ªè¿›è¡ŒåŒ¹é…ï¼Œå‰©ä¸‹çš„æœ‰èƒ½åŒ¹é…ä¸Šå°±æˆåŠŸ <code>dfs(i-1, j, k-1) || dfs(i, j-1, k-1)</code>.</li>
<li>å½“å‰åªæœ‰ä¸€ä¸ªåŒ¹é…ä¸Šå°±é€‰å®ƒ.</li>
<li>å½“å‰ä¸¤è€…éƒ½åŒ¹é…ä¸ä¸Šï¼Œç”±äºé•¿åº¦åŠ èµ·æ¥ç›¸ç­‰ï¼Œé‚£ä¹ˆè‚¯å®šåŒ¹é…ä¸ä¸Šï¼Œä¸ç”¨å›æº¯äº†ï¼Œç›´æ¥è¿”å› false.</li>
</ul>
</li>
</ul>
<p>æ‰€ä»¥é€»è¾‘å¯ä»¥ç®€åŒ–ä¸º s1 åŒ¹é…ä¸Šæ—¶é€’å½’æˆåŠŸ æˆ–è€… s2 åŒ¹é…ä¸Šæ—¶é€’å½’æˆåŠŸã€‚</p>
<p>å› æ­¤è½¬æ¢æˆé€’æ¨ï¼Œåˆå§‹åŒ–çŠ¶æ€æ•°ç»„çš„æ—¶å€™ã€‚æ£€æŸ¥ i=0 è¾¹ç•Œæ¡ä»¶ä¸º å‰é¢çš„éƒ½åŒ¹é…ä¸Šä¸”å½“å‰å­—ç¬¦èƒ½åŒ¹é…ä¸Šã€‚j=0 æ—¶çš„è¾¹ç•Œæ¡ä»¶ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å‰©ä¸‹çš„å°±æ˜¯ç›´æ¥æŠ„ dfs.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="n">isInterleave</span><span class="p">(</span><span class="n">string</span> <span class="n">s1</span><span class="p">,</span> <span class="n">string</span> <span class="n">s2</span><span class="p">,</span> <span class="n">string</span> <span class="n">s3</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s1</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">m</span> <span class="o">=</span> <span class="n">s2</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">l</span> <span class="o">=</span> <span class="n">s3</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="n">m</span> <span class="o">!=</span> <span class="n">l</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// i &lt; 0 &amp;&amp; j &lt; 0: if k &lt; 0 true, else false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// i &lt; 0: while(s2[j--]==s3[j--]) return j==0;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// j &lt; 0: while(s1[i--]==s3[i--]) return i==0;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="c1">// s1[i] == s3[k] &amp;&amp; s2[j] == s3[k] return dfs(i-1, j, k-1) || dfs(i, j-1, k-1)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//       ==                !=       return dfs(i-1, j, k-1)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//       !=                ==       return                     dfs(i, j-1, k-1)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//       !=                !=       return false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">false</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// previous are all equal and current is equal
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">s2</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">s3</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s3</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s3</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">||</span> <span class="p">(</span><span class="n">s2</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">s3</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">m</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ä¼˜åŒ–æˆä¸€ç»´æ•°ç»„ï¼Œè¿™é‡Œè§‚å¯Ÿåˆ°æ›´æ–°çŠ¶æ€çš„æ—¶å€™æ²¡æœ‰ç”¨åˆ° dfs(i-1, j-1) ä¹Ÿå°±ä¸éœ€è¦è¿›è¡Œä¿å­˜ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="n">isInterleave</span><span class="p">(</span><span class="n">string</span> <span class="n">s1</span><span class="p">,</span> <span class="n">string</span> <span class="n">s2</span><span class="p">,</span> <span class="n">string</span> <span class="n">s3</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s1</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">m</span> <span class="o">=</span> <span class="n">s2</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">l</span> <span class="o">=</span> <span class="n">s3</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="n">m</span> <span class="o">!=</span> <span class="n">l</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// previous are all equal and current is equal
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">s2</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">s3</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s3</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s3</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="o">||</span> <span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">s2</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">s3</span><span class="p">[</span><span class="n">k</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">m</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="1458-max-dot-product-of-two-subsequences">1458. Max Dot Product of Two Subsequences<a hidden class="anchor" aria-hidden="true" href="#1458-max-dot-product-of-two-subsequences">#</a></h2>
<p><a href="https://leetcode.cn/problems/max-dot-product-of-two-subsequences">é¢˜ç›®ç½‘å€</a>. dfs(i,j) è¡¨ç¤ºï¼šnums1 çš„å‰ i ä¸ªå…ƒç´ å’Œ nums2 çš„å‰ j ä¸ªå…ƒç´ æ‰€èƒ½æ„æˆçš„æœ€å¤§ç‚¹ç§¯ã€‚</p>
<ul>
<li>
<p>è¾¹ç•Œæ¡ä»¶: æˆ‘ä»¬éœ€è¦è®©é€’å½’å‡½æ•°çŸ¥é“ä¸€ä¸ªè‡³å…³é‡è¦çš„ä¿¡æ¯ï¼šâ€œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ˜¯å¦å·²ç»é€‰æ‹©è¿‡è‡³å°‘ä¸€å¯¹å…ƒç´ ï¼Ÿâ€ ä¸ºæ­¤ï¼Œæˆ‘ä»¬è¦ç»™å‡½æ•°å¢åŠ ä¸€ä¸ªçŠ¶æ€ <code>dfs(i, j, has_taken)</code>:</p>
<ol>
<li>has_taken == trueï¼šè¯´æ˜æˆ‘ä»¬å·²ç»æˆåŠŸæ„æˆäº†ä¸€ä¸ªéç©ºçš„å­åºåˆ—ï¼Œé€’å½’èµ°åˆ°äº†å°½å¤´ã€‚åç»­ä¸å¯èƒ½å†äº§ç”Ÿä»»ä½•ç‚¹ç§¯äº†ã€‚ æ­¤æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥è¿”å› 0ï¼Œå› ä¸ºå®ƒå¯¹ä¹‹å‰çš„ç‚¹ç§¯æ€»å’Œæ²¡æœ‰è´¡çŒ®ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿå½±å“ã€‚</li>
<li>has_taken == falseï¼šè¯´æ˜é€’å½’èµ°åˆ°äº†å°½å¤´ï¼Œä½†ä¸€æ¬¡å…ƒç´ é…å¯¹éƒ½æ²¡æœ‰é€‰æ‹©è¿‡ã€‚æ ¹æ®é¢˜æ„ï¼Œå­åºåˆ—å¿…é¡»æ˜¯éç©ºçš„ï¼Œæ‰€ä»¥è¿™æ¡â€œå…¨ç¨‹è·³è¿‡â€çš„è·¯å¾„æ˜¯æ— æ•ˆè·¯å¾„ã€‚ä¸ºäº†åœ¨ max æ¯”è¾ƒä¸­æ·˜æ±°æ‰è¿™æ¡æ— æ•ˆè·¯å¾„ï¼Œæˆ‘ä»¬å¿…é¡»è¿”å›ä¸€ä¸ªæå°å€¼ (æ¯”å¦‚ -Infinity æˆ– C++ é‡Œçš„ INT_MIN)ã€‚è¿™æ ·ä»»ä½•ä¸€ä¸ªæœ‰æ•ˆçš„ç‚¹ç§¯ (å“ªæ€•æ˜¯è´Ÿæ•°)éƒ½ä¼šæ¯”å®ƒå¤§ã€‚</li>
</ol>
</li>
<li>
<p>å›æº¯è¿‡ç¨‹: é€’å½’åˆ° dfs(i, j) æ—¶æˆ‘ä»¬è€ƒè™‘ nums1[i-1] å’Œ nums2[j-1] è¿™ä¸¤ä¸ªå…ƒç´ ã€‚æˆ‘ä»¬æœ‰ä»¥ä¸‹å‡ ç§é€‰æ‹©ï¼š</p>
<ol>
<li>ä¸ä½¿ç”¨ nums1[i-1]ï¼šé‚£ä¹ˆæœ€å¤§ç‚¹ç§¯å°±ç­‰äºåªè€ƒè™‘ nums1 å‰ i-1 ä¸ªå…ƒç´ å’Œ nums2 å‰ j ä¸ªå…ƒç´ çš„ç»“æœï¼Œå³ dfs(i-1, j).</li>
<li>ä¸ä½¿ç”¨ nums2[j-1]ï¼šåŒç†ï¼Œç»“æœä¸º dfs(i, j-1).</li>
<li>åŒæ—¶ä½¿ç”¨ nums1[i-1] å’Œ nums2[j-1]ï¼Œå®ƒä»¬çš„ç‚¹ç§¯æ˜¯ <code>product = nums1[i-1] * nums2[j-1]</code>. ç»§ç»­é€’å½’å¦‚æœ dfs(i-1, j-1) å¾—åˆ°çš„å‰©ä¸‹å­åºåˆ—çš„æœ€å¤§ç‚¹ç§¯æ˜¯ä¸€ä¸ªè´Ÿæ•° (æ¯”å¦‚ï¼Œæˆ‘ä»¬å®æ„¿ä¸è¦å®ƒï¼Œè€Œæ˜¯åªç”¨ product è‡ªå·±ã€‚è¿™ä¸ªå†³ç­–å¯ä»¥ç”¨ <code>product + max(dfs(i-1, j-1), 0)</code> æ¥å·§å¦™åœ°å®ç°ã€‚</li>
</ol>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">maxDotProduct</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// i &lt; 0 || j &lt; 0 return -inf
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// i not j: dfs(i-1, j)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// j not i: dfs(i, j-1)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// not i not j: dfs(i-1, j-1)  // in the situation of i not j --&gt; j not j
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// i and j : nums1[i]*nums2[j] + max(dfs(i-1, j-1), 0);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// max in all
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums1</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">nums2</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">long</span> <span class="kt">long</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">long</span> <span class="kt">long</span><span class="o">&gt;</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mf">1e18</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">long</span> <span class="kt">long</span> <span class="n">product</span> <span class="o">=</span> <span class="n">nums1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">nums2</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">({</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">product</span> <span class="o">+</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="mi">0LL</span><span class="p">)});</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">m</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ä¸€ç»´æ•°ç»„ç©ºé—´ä¼˜åŒ–å</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">maxDotProduct</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums1</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">nums2</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">long</span> <span class="kt">long</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mf">1e18</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">long</span> <span class="kt">long</span> <span class="n">pre</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">long</span> <span class="kt">long</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="kt">long</span> <span class="kt">long</span> <span class="n">product</span> <span class="o">=</span> <span class="n">nums1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">nums2</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">({</span><span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">product</span> <span class="o">+</span> <span class="n">max</span><span class="p">(</span><span class="n">pre</span><span class="p">,</span> <span class="mi">0LL</span><span class="p">)});</span>
</span></span><span class="line"><span class="cl">            <span class="n">pre</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">m</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="300-longest-increasing-subsequence">300. Longest Increasing Subsequence<a hidden class="anchor" aria-hidden="true" href="#300-longest-increasing-subsequence">#</a></h2>
<p><a href="https://leetcode.cn/problems/longest-increasing-subsequence">é¢˜ç›®ç½‘å€</a>. æœ€é•¿é€’å¢å­åºåˆ— (Longest Increasing Subsequence, LIS) å±äºå­é›†å‹å›æº¯ï¼Œæœ‰ä¸¤ä¸ªæ€è·¯ã€‚</p>
<ol>
<li>é€‰æˆ–ä¸é€‰: ä¸ºäº†æ¯”è¾ƒå¤§å°ï¼Œéœ€è¦çŸ¥é“ä¸Šä¸€ä¸ªé€‰çš„æ•°å­—ã€‚</li>
<li>æšä¸¾é€‰å“ªä¸ª: æ¯”è¾ƒå½“å‰é€‰çš„æ•°å­—å’Œä¸‹ä¸€ä¸ªé€‰çš„æ•°å­—ï¼Œåªç”¨å½“å‰ä¸‹æ ‡è¿™ä¸€ä¸ªå‚æ•°ã€‚</li>
</ol>
<blockquote>
<p>é—®ï¼šä»€ä¹ˆæ ·çš„é¢˜ç›®é€‚åˆã€Œé€‰æˆ–ä¸é€‰ã€ï¼Œä»€ä¹ˆæ ·çš„é¢˜ç›®é€‚åˆã€Œæšä¸¾é€‰å“ªä¸ªã€ï¼Ÿ</p>
<p>ç­”ï¼šæˆ‘åˆ†æˆä¸¤ç±»é—®é¢˜ï¼š</p>
<ul>
<li>ç›¸é‚»æ— å…³å­åºåˆ—é—®é¢˜ (æ¯”å¦‚ 0-1 èƒŒåŒ…)ï¼Œé€‚åˆã€Œé€‰æˆ–ä¸é€‰ã€ã€‚æ¯ä¸ªå…ƒç´ äº’ç›¸ç‹¬ç«‹ï¼Œåªéœ€ä¾æ¬¡è€ƒè™‘æ¯ä¸ªç‰©å“é€‰æˆ–ä¸é€‰ã€‚</li>
<li>ç›¸é‚»ç›¸å…³å­åºåˆ—é—®é¢˜ (æ¯”å¦‚æœ¬é¢˜)ï¼Œé€‚åˆã€Œæšä¸¾é€‰å“ªä¸ªã€ã€‚æˆ‘ä»¬éœ€è¦çŸ¥é“å­åºåˆ—ä¸­çš„ç›¸é‚»ä¸¤ä¸ªæ•°çš„å…³ç³»ã€‚å¯¹äºæœ¬é¢˜æ¥è¯´ï¼Œæšä¸¾ nums[i] å¿…é€‰ï¼Œç„¶åæšä¸¾å‰ä¸€ä¸ªå¿…é€‰çš„æ•°ï¼Œæ–¹ä¾¿æ¯”å¤§å°ã€‚å¦‚æœç¡¬è¦ç”¨ã€Œé€‰æˆ–ä¸é€‰ã€ï¼Œéœ€è¦é¢å¤–è®°å½•ä¸Šä¸€ä¸ªé€‰çš„æ•°çš„ä¸‹æ ‡ï¼Œç®—æ³•æ€»ä½“çš„ç©ºé—´å¤æ‚åº¦ä¸º $O(n^2)$ï¼Œè€Œæšä¸¾é€‰å“ªä¸ªåªéœ€è¦ $O(n)$ çš„ç©ºé—´ã€‚</li>
</ul></blockquote>
<p>å®šä¹‰ dfs(i) ä¸ºä»¥ nums[i] ä¸ºç»“å°¾çš„ LIS é•¿åº¦ï¼Œé‚£ä¹ˆéœ€è¦æšä¸¾ nums[j] ä½œä¸ºå€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œè¿™é‡Œè¦æ±‚ j &lt; i å¹¶ä¸” nums[j] &lt; nums[i]. ç”±æ­¤å¾—åˆ°å›æº¯ä¸‰é—®:</p>
<ul>
<li>å½“å‰æ“ä½œ: æšä¸¾ nums[j].</li>
<li>å­é—®é¢˜: ä»¥ nums[i] ä¸ºç»“å°¾çš„ LIS é•¿åº¦ã€‚</li>
<li>ä¸‹ä¸€ä¸ªå­é—®é¢˜: ä»¥ nums[j] ä¸ºç»“å°¾çš„ LIS é•¿åº¦ã€‚</li>
</ul>
<p>ç”±æ­¤å¾—åˆ°æˆ‘ä»¬çš„é€’å½’æ¨¡å‹ $dfs(i)=\max\left\{dfs(j)\right\}+1,\quad j<i\text{ ä¸” }nums[j]<nums[i]$.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">len</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">len</span><span class="p">,</span> <span class="n">dfs</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">nums</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">len</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">// add nums[i] itself
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">lengthOfLIS</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">maxLen</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">maxLen</span><span class="p">,</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">nums</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">maxLen</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>å’Œä¹‹å‰ä¸€æ ·è¿™é‡Œä¹Ÿæœ‰é‡å¤é€’å½’æŸä¸€ä¸ªçŠ¶æ€çš„æƒ…å†µ (æ¯”å¦‚ç¤ºä¾‹1 ä¸­ 18 å’Œ 101 éƒ½ä¼šé€’å½’åˆ°é€‰ 17 ä½œä¸ºå€’æ•°ç¬¬äºŒä¸ªå…ƒç´ çš„æƒ…å†µ)ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªæ•°ç»„æ¥è®°å½•ä»¥ nums[j] ä¸ºç»“å°¾çš„ LIS é•¿åº¦ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">memo</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">memo</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">len</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">len</span><span class="p">,</span> <span class="n">memo</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">len</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">len</span><span class="p">,</span> <span class="n">dfs</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">nums</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">                    <span class="n">memo</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">len</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">len</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">// add nums[i] itself
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">lengthOfLIS</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">memo</span> <span class="o">=</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">maxLen</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">maxLen</span><span class="p">,</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">nums</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">maxLen</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ç¿»è¯‘æˆé€’æ¨çš„ä»£ç å¦‚ä¸‹:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">lengthOfLIS</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">ranges</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>å…³äºæ—¶é—´å¤æ‚åº¦ï¼Œè¿™é‡Œä¸€å…±æœ‰ $O(n)$ ä¸ªçŠ¶æ€ï¼Œæ¯ä¸ªçŠ¶æ€è®¡ç®—çš„æ—¶é—´ä¹Ÿä¸º $O(n)$ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º $O(n^2)$. ç©ºé—´å¤æ‚åº¦ä¸º $O(n)$.</p>
<p>å¦‚æœè¿™é‡Œå…è®¸å­åºåˆ—ä¸­æœ‰ç›¸åŒå…ƒç´ ï¼Œå°±å¯ä»¥æŠŠæšä¸¾è¿‡ç¨‹ä¸­æ”¹æˆ <code>nums[j] &lt;= nums[i]</code>. åŒæ—¶ LIS å’Œ LCS æ˜¯æœ‰è”ç³»çš„ã€‚æŠŠä¸€ä¸ªæ•°ç»„å’Œå…¶æ’åºå»é‡å (ä¸€ä¸ªä¸¥æ ¼é€’å¢çš„åºåˆ—) å– LCS å°±å¾—åˆ°çš„æ˜¯ LIS. å¦‚æœå…è®¸æœ‰ç›¸åŒå…ƒç´ çš„è¯åˆ™ä¸éœ€è¦å»é‡ã€‚</p>
<p>å¯¹äº DPï¼Œæƒ³ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦çš„ä¸€ä¸ªæŠ€å·§æ˜¯<strong>äº¤æ¢çŠ¶æ€ä¸çŠ¶æ€å€¼</strong>ã€‚ä¹‹å‰å®šä¹‰ f[i] ä¸ºæœ«å°¾å…ƒç´ ä¸º nums[i] çš„ LIS é•¿åº¦ã€‚è¿™é‡Œå®šä¹‰ <strong>g[i] ä¸º é•¿åº¦ä¸º i+1 çš„é€’å¢å­åºåˆ—çš„æœ«å°¾å…ƒç´ çš„æœ€å°å€¼</strong>ã€‚å› ä¸ºæ ¹æ®å‰é¢ä»£ç  nums[j] è¶Šå°å°±è¶Šå®¹æ˜“æ»¡è¶³æ¡ä»¶ï¼Œé•¿åº¦ç›¸åŒæ—¶æˆ‘ä»¬é€‰æ‹©ä¿ç•™æœ«å°¾å…ƒç´ æœ€å°çš„ nums[j]. ä¾‹å¦‚å¯¹äºå¦‚ä¸‹ nums éå†è¿‡ç¨‹ä¸­ g æ•°ç»„å˜åŒ–å¦‚ä¸‹ã€‚</p>
$$
\begin{aligned}nums&=[1,6,7,2,4,5,3]\\g&=[1]\\g&=[1,6]\\g&=[1,6,7]\\g&=[1,2,7]\\g&=[1,2,4]\\g&=[1,2,4,5]\\g&=[1,2,3,5]\end{aligned}
$$<p>æŒ‰ç…§è¿™ç§å®šä¹‰æ–¹å¼æ²¡æœ‰é‡å å­é—®é¢˜ï¼Œä¸èƒ½è¢«ç®—ä½œåŠ¨æ€è§„åˆ’ï¼Œè€Œå˜æˆä¸€ä¸ªè´ªå¿ƒçš„é—®é¢˜ã€‚éå†è¿‡ç¨‹ä¸­å¯ä»¥å‘ç° g æ˜¯ä¸€ä¸ªä¸¥æ ¼é€’å¢çš„å­åºåˆ—ï¼Œå¹¶ä¸”æ¯æ¬¡æ›´æ–°è¦ä¹ˆæ·»åŠ ä¸€ä¸ªæ•°è¦ä¹ˆä¿®æ”¹ä¸€ä¸ªæ•°ï¼Œæ›´æ–°çš„ä½ç½®æ˜¯ç¬¬ä¸€ä¸ª <code>&gt;= nums[i]</code> çš„ä¸‹æ ‡ã€‚</p>
<ul>
<li>å®šç†: g æ˜¯<strong>ä¸¥æ ¼é€’å¢çš„</strong>ã€‚</li>
</ul>
<p>è¯æ˜:å‡è®¾æœ‰ <code>g[i] &gt;= g[j]</code> ä¸” i &lt; j,é‚£ä¹ˆ gjå¯¹åº”çš„ IS çš„ç¬¬ i ä¸ªæ•°å°±åº”è¯¥ <code>&lt; g[j]</code>ï¼Œè¿™ä¸ <code>g[i] &gt;= g[j]</code> çŸ›ç›¾ã€‚</p>
<ul>
<li>æ¨è®º 1: ä¸€æ¬¡åªèƒ½æ›´æ–°<strong>ä¸€ä¸ª</strong>ä½ç½®ã€‚</li>
</ul>
<p>è¯æ˜: å‡è®¾æ›´æ–°äº†ä¸¤ä¸ªä½ç½®ï¼Œä¼šå¯¼è‡´ g ä¸æ˜¯ä¸¥æ ¼é€’å¢çš„å› ä¸ºå•è°ƒé€’å¢åºåˆ—ä¸èƒ½æœ‰ç›¸åŒå…ƒç´ ã€‚</p>
<ul>
<li>æ¨è®º 2: æ›´æ–°çš„ä½ç½®æ˜¯<strong>ç¬¬ä¸€ä¸ª</strong> <code>&gt;= nums[i]</code> çš„æ•°çš„ä¸‹æ ‡ã€‚
å¦‚æœ numsi æ¯”æœ€åä¸€ä¸ªæ•°éƒ½å¤§ï¼Œé‚£å°±åŠ åˆ° g çš„æœ«å°¾ã€‚</li>
</ul>
<p>è¯æ˜:è®¾æ›´æ–°äº† g[j]ï¼Œå¦‚æœ <code>g[j]&lt; nums[i]</code> ç›¸å½“äºæŠŠå°çš„æ•°ç»™å˜å¤§äº†ï¼Œè¿™æ˜¾ç„¶ä¸å¯èƒ½ã€‚å¦å¤–ï¼Œå¦‚æœ g[j] ä¸æ˜¯ç¬¬ä¸€ä¸ª <code>&gt;= nums[i]</code> çš„æ•°,é‚£å°±ç ´åäº† g çš„æœ‰åºæ€§ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬çš„ç®—æ³•ä¸ºåœ¨ g ä¸Šç”¨<strong>äºŒåˆ†æŸ¥æ‰¾</strong>å¿«é€Ÿæ‰¾åˆ°ç¬¬ä¸€ä¸ª <code>&gt;= nums[i]</code> çš„ä¸‹æ ‡ j. å¦‚æœ j ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆ nums[i] ç›´æ¥åŠ åˆ° g æœ«å°¾; å¦åˆ™ä¿®æ”¹ g[j] ä¸º nums[i]. è¿™æ ·å°±å¯ä»¥åšåˆ° $O(n\log n)$ çš„æ—¶é—´å¤æ‚åº¦ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">lowerBound</span><span class="p">(</span><span class="kt">int</span> <span class="n">target</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="p">(</span><span class="n">right</span> <span class="o">-</span> <span class="n">left</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">left</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">right</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">lengthOfLIS</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">g</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">ng</span> <span class="o">=</span> <span class="n">g</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">lowerBound</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">g</span><span class="p">,</span> <span class="n">ng</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">!=</span> <span class="n">ng</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">g</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">g</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="n">ng</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">ng</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>è¿›ä¸€æ­¥å¯ä»¥ç›´æ¥åœ¨ nums æ•°ç»„ä¸Šå°±åœ°ä¿®æ”¹ï¼Œä»¥è¾¾åˆ° $O(1)$ çš„ç©ºé—´å¤æ‚åº¦ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">lengthOfLIS</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">ng</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">lowerBound</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">nums</span><span class="p">,</span> <span class="n">ng</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">nums</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">==</span> <span class="n">ng</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">ng</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">ng</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>å¦‚æœæ˜¯éä¸¥æ ¼é€’å¢ç§€å¨¥</p>
<h2 id="282">282.<a hidden class="anchor" aria-hidden="true" href="#282">#</a></h2>
<p>æ•°ç»„ä¸­çš„å…ƒç´ åªæœ‰ 1/2/3 ä¸‰ç§å€¼ï¼Œéé€’å‡æ„å‘³ç€æ•°ç»„å¯ä»¥åˆ†ä¸ºè‹¥å¹²æ®µï¼Œæ¯æ®µå†…çš„å…ƒç´ å€¼ç›¸åŒï¼Œä¸”æ®µçš„å€¼ä¾æ¬¡é€’å¢ã€‚æ¯æ¬¡æ“ä½œå¯ä»¥ç§»é™¤ä¸€ä¸ªå…ƒç´ ï¼Œç§»é™¤çš„å…ƒç´ å¯ä»¥çœ‹ä½œæ˜¯å°†è¯¥å…ƒç´ æ”¹ä¸ºä¸ç›®æ ‡æ®µçš„å€¼ä¸€è‡´ã€‚å®šä¹‰çŠ¶æ€ <code>f[i][j]</code> è¡¨ç¤ºå¤„ç†å‰ i ä¸ªå…ƒç´ ï¼Œä¸”ç¬¬ i ä¸ªå…ƒç´ å±äºç¬¬ j <code>(j = 1, 2, 3)</code> ç»„çš„æœ€å°æ“ä½œæ¬¡æ•°ã€‚</p>
<ul>
<li><code>f[i][1] = f[i-1][1] + (nums[i] != 1)</code>: å› ä¸ºæˆ‘ä»¬åªèƒ½æŠŠå‰ i-1 ä¸ªå…ƒç´ å˜æˆ 1 æ‰èƒ½ä½¿å¾— nums[0&hellip;i] éé€’å‡ï¼Œå› ä¸ºæ ¹æ®å®šä¹‰è¦æ±‚ <code>nums[i] = 1</code>.</li>
<li><code>f[i][2] = min(f[i-1][1], f[i-1][2]) + (nums[i] != 2)</code> æˆ‘ä»¬å¯ä»¥æŠŠ 0 åˆ° i-1 å˜æˆåªæœ‰ 1 çš„æ®µæˆ–è€… 1 å’Œ 2 ç»„æˆçš„æ®µã€‚</li>
<li><code>f[i][3] = min({f[i-1][1], f[i-1][2], f[i-1][3]}) + (nums[i] != 3)</code>: é“ç†åŒä¸Šã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">minimumOperations</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">nums</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">({</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]})</span> <span class="o">+</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">min</span><span class="p">({</span><span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="mi">3</span><span class="p">]});</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>æ›´æ–°æ—¶åªç”¨åˆ°äº†ä¸Šä¸€æ¬¡çš„çŠ¶æ€ï¼Œå¯ä»¥åªç”¨ä¸¤ä¸ªçŠ¶æ€æ•°ç»„æ¥ç®€åŒ–ç©ºé—´å¤æ‚åº¦åˆ° $O(1)$.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">minimumOperations</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">nums</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f0</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">f1</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">f1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">f0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">f1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">f0</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">f0</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">f1</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">({</span><span class="n">f0</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">f0</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">f0</span><span class="p">[</span><span class="mi">3</span><span class="p">]})</span> <span class="o">+</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">f0</span> <span class="o">=</span> <span class="n">f1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">min</span><span class="p">({</span><span class="n">f1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">f1</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">f1</span><span class="p">[</span><span class="mi">3</span><span class="p">]});</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="1964">1964.<a hidden class="anchor" aria-hidden="true" href="#1964">#</a></h2>
<p>éä¸¥æ ¼é€’å¢çš„ LIS. æ¯æ¬¡äºŒåˆ†æŸ¥æ‰¾çš„ç´¢å¼•å³ä¸ºè¯¥å…ƒç´ ä¸ºç»ˆç‚¹æ‰€æ„æˆçš„ LIS ä¸‹æ ‡ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">longestObstacleCourseAtEachPosition</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">obstacles</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ans</span><span class="p">(</span><span class="n">obstacles</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">ng</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">obstacles</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">lowerBound</span><span class="p">(</span><span class="n">obstacles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">obstacles</span><span class="p">,</span> <span class="n">ng</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">obstacles</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">obstacles</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">==</span> <span class="n">ng</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">ng</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="1671">1671.<a hidden class="anchor" aria-hidden="true" href="#1671">#</a></h2>
<p>å±±å½¢æ•°ç»„éœ€è¦æ»¡è¶³å·¦ä¾§ä¸¥æ ¼é€’å¢ï¼Œå³ä¾§ä¸¥æ ¼é€’å‡ï¼Œä¸”å·¦å³ä¸¤ä¾§éƒ½æœ‰å…ƒç´  (é•¿åº¦ &gt;= 3). æšä¸¾æ¯ä¸ªå¯èƒ½çš„å³° <code>i (0 &lt; i &lt; n-1)</code>ï¼Œéœ€è¦è®¡ç®—</p>
<ul>
<li><code>pre[i]</code>: ä»¥ nums[i] ç»“å°¾çš„æœ€é•¿ä¸¥æ ¼é€’å¢å­åºåˆ—é•¿åº¦ã€‚</li>
<li><code>suf[i]</code>: ä»¥ nums[i] å¼€å¤´çš„æœ€é•¿ä¸¥æ ¼é€’å‡å­åºåˆ—é•¿åº¦ã€‚</li>
</ul>
<p>è‹¥ <code>pre[i] â‰¥ 2</code> ä¸” <code>suf[i] â‰¥ 2</code>ï¼Œå±±å½¢å­åºåˆ—é•¿åº¦ä¸º <code>pre[i] + suf[i] - 1</code>ï¼Œç­”æ¡ˆä¸º n - æœ€å¤§å±±å½¢é•¿åº¦ã€‚</p>
<p>ä¸ºäº†å¾—åˆ° LDS çš„é•¿åº¦ï¼Œæˆ‘ä»¬éœ€è¦åå‘éå†ï¼Œç­‰ä»·äºå¤„ç†æ•°ç»„ <code>[nums[n-1], nums[n-2], ..., nums[0]]</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">minimumMountainRemovals</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">pre</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">suf</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">ng</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">g</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// LIS from 0 - i
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">lowerBound</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">g</span><span class="p">,</span> <span class="n">ng</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">==</span> <span class="n">ng</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">g</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                <span class="n">ng</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">g</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">pre</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">ng</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">g</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// LDS from i - n-1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">lowerBound</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">g</span><span class="p">,</span> <span class="n">ng</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">==</span> <span class="n">ng</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">g</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                <span class="n">ng</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">g</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">suf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// update
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="p">(</span><span class="n">pre</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="n">suf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">ans</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="n">pre</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">suf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">n</span> <span class="o">-</span> <span class="n">ans</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="2111">2111.<a hidden class="anchor" aria-hidden="true" href="#2111">#</a></h2>
<p>æœ¬é¢˜å¯ä»¥çœ‹æˆå°†åŸæ•°ç»„åˆ†åˆ«ä»¥ <code>arr[0,...k-1]</code> å¼€å§‹é—´éš”ä¸º k çš„å­åºåˆ—çš„ LIS é—®é¢˜ã€‚åˆ†åˆ«å°†ä»–ä»¬çš„é•¿åº¦å‡å»ä»–ä»¬çš„ LIS ç„¶åæ±‚å’Œå°±æ˜¯æœ¬é¢˜ç­”æ¡ˆã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">kIncreasing</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">arr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">arr</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">g</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">ng</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">k</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// for each subsequence
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span> <span class="o">+=</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// calculate its LIS len
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">lowerBound</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">ng</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">==</span> <span class="n">ng</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">g</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">ng</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">g</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">ans</span> <span class="o">+=</span> <span class="p">((</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">/</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">ng</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">ng</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">g</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="1626">1626.<a hidden class="anchor" aria-hidden="true" href="#1626">#</a></h2>
<p>å…ˆæŒ‰ç…§åˆ†æ•°æ’åºï¼Œåˆ†æ•°ç›¸åŒçš„æŒ‰ç…§å¹´é¾„æ’åºï¼Œåˆ™é—®é¢˜è½¬æ¢æˆä»æ’åºåçš„ ages ä¸­é€‰æ‹©ä¸€ä¸ªå¾—åˆ†ä¹‹å’Œæœ€å¤§çš„éä¸¥æ ¼é€’å¢å­åºåˆ—é—®é¢˜ã€‚f[i] çš„å®šä¹‰ä¸ºä»¥ ages[i] ä¸ºç»“å°¾çš„é€’å¢å­åºåˆ—ç»„æˆçƒé˜Ÿçš„æœ€å¤§å¾—åˆ†ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">bestTeamScore</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">scores</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">ages</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">ages</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">players</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">players</span><span class="p">.</span><span class="n">push_back</span><span class="p">({</span><span class="n">scores</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ages</span><span class="p">[</span><span class="n">i</span><span class="p">]});</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">sort</span><span class="p">(</span><span class="n">players</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">players</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">players</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">second</span> <span class="o">&lt;=</span> <span class="n">players</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">second</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">players</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">first</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ranges</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h1 id="fsm-dp">FSM DP<a hidden class="anchor" aria-hidden="true" href="#fsm-dp">#</a></h1>
<h2 id="122-unlimited-transaction-times">122. (Unlimited Transaction Times)<a hidden class="anchor" aria-hidden="true" href="#122-unlimited-transaction-times">#</a></h2>
<p>ä»ç¬¬ 0 å¤©å¼€å§‹åˆ°ç¬¬ 5 å¤©ç»“æŸæ—¶çš„åˆ©æ¶¦ = ä»ç¬¬ 0 å¤©å¼€å§‹åˆ°ç¬¬ 4 å¤©ç»“æŸæ—¶çš„åˆ©æ¶¦ + ç¬¬ 5 å¤©çš„åˆ©æ¶¦</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„çŠ¶æ€æœºæ¥è¡¨ç¤ºã€‚ç¬¬ i å¤©å¼€å§‹æ—¶æŒæœ‰è‚¡ç¥¨å¯ä»¥é€‰æ‹©ä»€ä¹ˆä¹Ÿä¸åšæˆ–è€…å–å‡ºï¼›è‹¥æœªæŒæœ‰å¯ä»¥é€‰æ‹©ä»€ä¹ˆä¹Ÿä¸åšå’Œä¹°å…¥ã€‚</p>
<ul>
<li>å®šä¹‰ dfs(i,0) è¡¨ç¤ºåˆ°ç¬¬ i å¤©<strong>ç»“æŸ</strong>æ—¶ï¼ŒæœªæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦</li>
<li>å®šä¹‰ dfs(i,1) è¡¨ç¤ºåˆ°ç¬¬ i å¤©<strong>ç»“æŸ</strong>æ—¶ï¼ŒæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦</li>
</ul>
<p>ç”±äºç¬¬ i-1 å¤©çš„ç»“æŸå°±æ˜¯ç¬¬ i å¤©çš„<em>å¼€å§‹</em> dfs(i-1,Â·) ä¹Ÿè¡¨ç¤ºåˆ°ç¬¬ i å¤©<strong>å¼€å§‹</strong>æ—¶çš„æœ€å¤§åˆ©æ¶¦ã€‚</p>
<ul>
<li>å½“å‰æ“ä½œ:</li>
</ul>
<pre tabindex="0"><code class="language-mermaid" data-lang="mermaid">---
title: FSM 
---
stateDiagram-v2 
    hold --&gt; noHold: sell dfs(i, 0) = dfs(i-1, 1) + prices[i]
    noHold --&gt; hold: buy dfs(i, 1) = dfs(i-1, 0) - prices[i]
    hold --&gt; hold: do nothing dfs(i, 1) = dfs(i-1, 1)
    noHold --&gt; noHold: do nothing dfs(i, 0) = dfs(i-1, 0)
</code></pre><ul>
<li>å­é—®é¢˜: åˆ°ç¬¬ iå¤©ç»“æŸæ—¶ï¼ŒæŒæœ‰/æœªæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ã€‚</li>
<li>ä¸‹ä¸€ä¸ªå­é—®é¢˜: åˆ°ç¬¬ i-1 å¤©ç»“æŸæ—¶ï¼ŒæŒæœ‰/æœªæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ã€‚</li>
</ul>
<p>å› æ­¤æˆ‘ä»¬æœ‰å¦‚ä¸‹é€’æ¨å¼</p>
$$
dfs(i,0)=\max\left(dfs(i-1,0),dfs(i-1,1)+prices[i]\right)\\dfs(i,1)=\max\left(dfs(i-1,1),dfs(i-1,0)-prices[i]\right)
$$<p>é€’å½’è¾¹ç•Œ</p>
<ul>
<li><code>dfs(-1, 0) = 0</code>: ç¬¬ 0 å¤©å¼€å§‹æœªæŒæœ‰è‚¡ç¥¨ï¼Œåˆ©æ¶¦ä¸º 0.</li>
<li><code>dfs(-1, 1) = -inf</code>: ç¬¬ 0 å¤©å¼€å§‹ä¸å¯èƒ½æœ‰è‚¡ç¥¨ï¼Œå®šä¹‰æˆä¸€ä¸ªéæ³•çŠ¶æ€ã€‚</li>
</ul>
<p>é€’å½’å…¥å£: ç”±äºæœ€åä¸€å¤©æŒæœ‰è‚¡ç¥¨å¹¶å°†å®ƒå–å‡º (ç¬¬ n-1 å¤©ç»“æŸæ—¶æœªæŒæœ‰è‚¡ç¥¨) çš„åˆ©æ¶¦è‚¯å®šæ¯”ä¸å–å‡ºå¤§ï¼Œå› æ­¤ç›´æ¥ä» dfs(n-1, 0) å¼€å§‹é€’å½’ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">hold</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">prices</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">hold</span> <span class="o">?</span> <span class="nl">INT_MIN</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">hold</span><span class="p">)</span>  <span class="c1">// hold at the end of ith day
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">return</span> <span class="n">max</span><span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">prices</span><span class="p">),</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">prices</span><span class="p">)</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">max</span><span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">prices</span><span class="p">),</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">prices</span><span class="p">)</span> <span class="o">+</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">maxProfit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">prices</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">prices</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ä¸€å…±æœ‰ 2n ä¸ªä¹Ÿå°±æ˜¯ $O(n)$ ä¸ªçŠ¶æ€ï¼Œæ¯ä¸ªçŠ¶æ€è®¡ç®—çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(1)$ çš„ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$. ç©ºé—´å¤æ‚åº¦ä¸º $O(n)$.</p>
<p>ç¿»è¯‘æˆé€’æ¨å¦‚ä¸‹ï¼Œè¿™é‡Œä¸ºäº†æ•°ç»„ä¸‹æ ‡ä¸ä¸ºè´Ÿæ•°ï¼ŒåŒä¸€å‘å³ç§»åŠ¨ä¸€ä¸ªçŠ¶æ€ã€‚æœ€ç»ˆç­”æ¡ˆä¸º $f[n][0]$.</p>
$$
\begin{aligned}
f[0][0]&=0\\
f[0][1]&=-\infty\\
f[i+1][0]&=\max\left(f[i][0],f[i][1]+prices[i]\right)\\
f[i+1][1]&=\max\left(f[i][1],f[i][0]-prices[i])\right.\end{aligned}
$$<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">maxProfit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">prices</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">INT_MIN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>ç”±äºè¿™æ›´æ–°å½“å‰çŠ¶æ€åªç”¨åˆ°äº†ä¸Šä¸ªçŠ¶æ€ï¼Œå¯ä»¥ç”¨ä¸€ç»´æ•°ç»„è¿›è¡Œç©ºé—´å‹ç¼© (è¿™é‡Œå°± 2 ä¸ªçŠ¶æ€).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">maxProfit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">prices</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">f0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">=</span> <span class="n">INT_MIN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">new_f1</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">f0</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="n">f0</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">+</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="n">f1</span> <span class="o">=</span> <span class="n">new_f1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="309">309.<a hidden class="anchor" aria-hidden="true" href="#309">#</a></h2>
<p>è¿™ä¸€é¢˜å’Œå‰é¢æ‰€è®²çš„æ‰“å®¶åŠ«èˆé—®é¢˜å¾ˆåƒï¼Œé‚£ä¸€é¢˜ä¸­å¦‚æœæ‰“åŠ«äº†ç¬¬ i å®¶æˆ¿å­å°±ä¸èƒ½æ‰“åŠ«ç¬¬ i-1 å®¶ï¼Œç›´æ¥é€’å½’åˆ° i-2. è¿™é‡Œä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œå¦‚æœç¬¬ i å¤©ç»“æŸæ—¶æŒæœ‰è‚¡ç¥¨ï¼Œä¸€å®šæ˜¯ä»ç¬¬ i-2 å¤©æœªæŒæœ‰çš„çŠ¶æ€ (å–å‡º/ä¸åŠ¨) è½¬ç§»è¿‡æ¥ã€‚å› æ­¤ç›´æ¥æŠŠä¸Šä¸€é¢˜é€’å½’æ”¹æˆ <code>dfs(i-2, 0, prices) - prices[i]</code>.</p>
<p>ç¿»è¯‘æˆé€’æ¨è¿›è¡Œç©ºé—´ä¼˜åŒ–æ—¶å°±éœ€è¦å¤šç”¨ä¸€ä¸ªå˜é‡æ¥è®°ä½ç¬¬ i-2 å¤©ç»“æŸæ—¶æœªæŒæœ‰çš„çŠ¶æ€ï¼Œæ›´æ–°æ—¶å…ˆæ›´æ–° f0 é¿å…è¢« f1 çš„æ›´æ–°è¦†ç›–ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">maxProfit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">prices</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">pre0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">f0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">=</span> <span class="n">INT_MIN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">new_f0</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">+</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="n">f1</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">pre0</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pre0</span> <span class="o">=</span> <span class="n">f0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">f0</span> <span class="o">=</span> <span class="n">new_f0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="188-at-most-k-times">188. (at most k times)<a hidden class="anchor" aria-hidden="true" href="#188-at-most-k-times">#</a></h2>
<p>æ—¢ç„¶æœ‰æ¬¡æ•°é™åˆ¶é‚£ä¹ˆé€’å½’çš„æ—¶å€™å°±éœ€è¦å¤šä¼ å…¥ä¸€ä¸ªå‚æ•°æ¥è¡¨ç¤ºå½“å‰è‡³å¤šå®Œæˆçš„äº¤æ˜“æ¬¡æ•°ã€‚</p>
<ul>
<li>å®šä¹‰ dfs(i,j,0) è¡¨ç¤ºåˆ°ç¬¬ i å¤©<strong>ç»“æŸ</strong>æ—¶å®Œæˆ<strong>è‡³å¤š</strong> j ç¬”äº¤æ˜“ï¼ŒæœªæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ã€‚</li>
<li>å®šä¹‰ dfs(i,j,1) è¡¨ç¤ºåˆ°ç¬¬ i å¤©<strong>ç»“æŸ</strong>æ—¶å®Œæˆ<strong>è‡³å¤š</strong> j ç¬”äº¤æ˜“ï¼ŒæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ã€‚</li>
</ul>
<p>è½¬ç§»æ–¹ç¨‹éœ€è¦ä¿®æ”¹çš„åœ°æ–¹å°±æ˜¯è¿›è¡Œä¹°å…¥æˆ–è€…å–å‡º (ä¹°å…¥+å–å‡ºç®—ä½œä¸€æ¬¡äº¤æ˜“) çš„æ—¶å€™å°†äº¤æ˜“æ¬¡æ•° -1. ç”±äºæœ€åæœªæŒæœ‰è‚¡ç¥¨ï¼Œæ‰‹ä¸Šçš„è‚¡ç¥¨ä¸€å®šä¼šå–æ‰ï¼Œæ‰€ä»¥ä»£ç ä¸­çš„ j-1 å¯ä»¥å†™åœ¨ä¹°è‚¡ç¥¨çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥å†™åœ¨å–è‚¡ç¥¨çš„æ—¶å€™ã€‚</p>
<p>é€’å½’è¾¹ç•Œ:</p>
<ul>
<li><code>dfs(Â·, -1, Â·) = -inf</code>: ä»»ä½•æƒ…å†µä¸‹ï¼Œj éƒ½ä¸èƒ½ä¸ºè´Ÿã€‚</li>
<li><code>dfs(-1,j,0) = 0</code>: ç¬¬ 0 å¤©å¼€å§‹æœªæŒæœ‰è‚¡ç¥¨ï¼Œåˆ©æ¶¦ä¸º 0.</li>
<li><code>dfs(-1,j,1) = -inf</code>: ç¬¬ 0 å¤©å¼€å§‹ä¸å¯èƒ½æŒæœ‰è‚¡ç¥¨ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">,</span> <span class="kt">int</span> <span class="n">hold</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">prices</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">j</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">INT_MIN</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">hold</span> <span class="o">?</span> <span class="nl">INT_MIN</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">hold</span><span class="p">)</span>  <span class="c1">// hold at the end of ith day
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">return</span> <span class="n">max</span><span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">prices</span><span class="p">),</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">prices</span><span class="p">)</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">max</span><span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">prices</span><span class="p">),</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">prices</span><span class="p">)</span> <span class="o">+</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">maxProfit</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">prices</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">prices</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>åœ¨è®°å¿†åŒ–æœç´¢ä¸­ï¼Œj çš„èŒƒå›´æ˜¯ <code>[âˆ’1,k]</code>ï¼Œè¿™ä¸€å…±æœ‰ k+2 ä¸ªæ•°ã€‚ç¿»è¯‘æˆé€’æ¨å°±éœ€è¦ k+2 çš„æ•°ç»„å¤§å°ã€‚åŒæ—¶è¦åœ¨ f å’Œæ¯ä¸ª f[i] æœ€å‰é¢æ’å…¥ä¸€ä¸ªçŠ¶æ€é¿å…è´Ÿæ•°ä¸‹æ ‡ã€‚æœ€ç»ˆç­”æ¡ˆä¸º f[n][k+1][0]. è¿™é‡Œçš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½ä¸º $O(nk)$.</p>
$$
\begin{aligned}{l}
f[\cdot][0][\cdot]&=-\infty \\
f[0][j][0]&=0 \quad \\
f[0][j][1]&=-\infty \quad j \geq 1 \\
f[i+1][j+1][0]&=\max (f[i][j][0], f[i][j+1][1]+\operatorname{prices}[i]) \\
f[i+1][j+1][1]&=\max (f[i][j][1], f[i][j][0]-\operatorname{prices}[i])
\end{aligned}
$$<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">maxProfit</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">prices</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="mi">2</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="p">{</span><span class="n">INT_MIN</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">INT_MIN</span> <span class="o">/</span> <span class="mi">2</span><span class="p">}));</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">k</span> <span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">k</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>åŒæ ·ä¹Ÿå¯ä»¥å‹ç¼©æˆäºŒç»´æ•°ç»„å°†ç©ºé—´å¤æ‚åº¦é™ä¸º $O(k)$.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">maxProfit</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">prices</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="mi">2</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="p">{</span><span class="n">INT_MIN</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">INT_MIN</span> <span class="o">/</span> <span class="mi">2</span><span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">k</span> <span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">k</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="follow-up">Follow Up<a hidden class="anchor" aria-hidden="true" href="#follow-up">#</a></h2>
<p>æ”¹æˆã€Œæ°å¥½ã€å®Œæˆ k ç¬”äº¤æ˜“åˆ™é€’å½’åˆ° i &lt; 0 æ—¶ï¼Œåªæœ‰ j = 0 æ‰æ˜¯åˆæ³•çš„ï¼Œj &gt; 0 æ˜¯ä¸åˆæ³•çš„ã€‚å¯¹äºé€’æ¨åˆ™æ˜¯åªæœ‰ <code>f[0][1][0] = 0</code>.</p>
<p>æ”¹æˆã€Œè‡³å°‘ã€å®Œæˆ k ç¬”äº¤æ˜“: è‡³å°‘ -1 æ¬¡å’Œè‡³å°‘ 0 æ¬¡æ˜¯ä¸€æ ·çš„ï¼Œæ¯ä¸ª f[i] å‰å°±ä¸ç”¨å†æ’å…¥çŠ¶æ€ï¼Œè¾¹ç•Œæ¡ä»¶ä¸º <code>f[0][0][0] = 0</code>.é€’å½’åˆ°ã€Œè‡³å°‘ 0 æ¬¡ã€æ—¶ï¼Œå®ƒç­‰ä»·äºã€Œäº¤æ˜“æ¬¡æ•°æ²¡æœ‰é™åˆ¶ã€ï¼Œé‚£ä¹ˆè¿™ä¸ªçŠ¶æ€çš„è½¬ç§»æ–¹ç¨‹éœ€è¦ä¸ 122 é¢˜ä¸€æ ·ã€‚</p>
<h2 id="121">121.<a hidden class="anchor" aria-hidden="true" href="#121">#</a></h2>
<p>ä»å·¦å¾€å³éå†ï¼Œç»´æŠ¤å‰ i-1 å¤©ä¸­è‚¡ç¥¨çš„æœ€å°å€¼ç”¨äºä¹°å…¥ï¼Œå¹¶ä¸æ–­æ›´æ–°åœ¨å½“å¤©å–å‡ºèƒ½å¾—åˆ°çš„åˆ©æ¶¦çš„æœ€å¤§å€¼ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">maxProfit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">prices</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">minPrice</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">ans</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">minPrice</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">minPrice</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">minPrice</span><span class="p">,</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="123">123.<a hidden class="anchor" aria-hidden="true" href="#123">#</a></h2>
<p>ç›¸å½“äº 188. ä¸­ k=2 çš„æƒ…å†µã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">maxProfit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">prices</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// same as k = 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">INT_MIN</span> <span class="o">/</span> <span class="mi">2</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">k</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">k</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="714">714.<a hidden class="anchor" aria-hidden="true" href="#714">#</a></h2>
<p>å’Œ 122. é¢˜æ€è·¯ä¸€æ ·ï¼Œåœ¨ä¹°å…¥/å–å‡ºå‡å»çš„æ—¶å€™å‡å»æ‰‹ç»­è´¹å³å¯ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">maxProfit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">prices</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fee</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">f0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">=</span> <span class="n">INT_MIN</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">new_f1</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">f0</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="n">f0</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f0</span><span class="p">,</span> <span class="n">f1</span> <span class="o">+</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">fee</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">f1</span> <span class="o">=</span> <span class="n">new_f1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="2786">2786.<a hidden class="anchor" aria-hidden="true" href="#2786">#</a></h2>
<p>å½“å‰é€‰æ‹©çš„æ•°å­—çš„å¥‡å¶æ€§ï¼Œä¼šå½±å“åˆ°ä¸‹ä¸€æ­¥æ˜¯å¦ä¼šäº§ç”Ÿé¢å¤–çš„å¼€é”€ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨åšå†³ç­–æ—¶ï¼Œéœ€è¦çŸ¥é“ä»¥å¶æ•°ç»“å°¾çš„å­åºåˆ—èƒ½è·å¾—çš„æœ€å¤§åˆ†æ•°ï¼Œä»¥åŠä»¥å¥‡æ•°ç»“å°¾çš„å­åºåˆ—èƒ½è·å¾—çš„æœ€å¤§åˆ†æ•°ã€‚</p>
<p>å®šä¹‰ä¸¤ä¸ªå˜é‡ï¼Œåœ¨éå†åˆ°æ•°ç»„çš„ç¬¬ i ä¸ªä½ç½®æ—¶ï¼š</p>
<ul>
<li>max_even: è¡¨ç¤ºåœ¨ <code>nums[0...i]</code> è¿™ä¸ªå­æ•°ç»„ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©çš„å­åºåˆ—ä»¥<strong>å¶æ•°</strong>ç»“å°¾æ—¶ï¼Œå¯ä»¥è·å¾—çš„æœ€å¤§åˆ†æ•°ã€‚</li>
<li>max_odd: è¡¨ç¤ºåœ¨ <code>nums[0...i]</code> è¿™ä¸ªå­æ•°ç»„ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©çš„å­åºåˆ—ä»¥<strong>å¥‡æ•°</strong>ç»“å°¾æ—¶ï¼Œå¯ä»¥è·å¾—çš„æœ€å¤§åˆ†æ•°ã€‚</li>
</ul>
<p>è¾¹ç•Œæ¡ä»¶:</p>
<ul>
<li>å¦‚æœ nums[0] æ˜¯å¶æ•°ï¼Œé‚£ä¹ˆåˆå§‹çš„ max_even å°±æ˜¯ nums[0]ï¼Œè€Œ max_odd è®¾ç½®æˆè´Ÿæ•° (é¢˜ç›®ä¸­ nums å…ƒç´ ä¸ºæ­£æ•´æ•°).</li>
<li>å¦‚æœ nums[0] æ˜¯å¥‡æ•°çš„æƒ…å†µåŒç†ã€‚</li>
</ul>
<p>æˆ‘ä»¬ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹ä»å·¦åˆ°å³éå†æ•°ç»„ nums (å› ä¸ºç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å¿…é€‰çš„)ã€‚å¯¹äºå½“å‰éå†åˆ°çš„</p>
<ul>
<li>å¦‚æœ nums[i] æ˜¯å¶æ•°: è¦æ„æˆä¸€ä¸ªä»¥ nums[i] è¿™ä¸ªå¶æ•°ç»“å°¾çš„å­åºåˆ—ï¼Œå®ƒçš„å‰ä¸€ä¸ªå…ƒç´ å¯ä»¥æ˜¯å¶æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å¥‡æ•°ã€‚
<ul>
<li>å¦‚æœå‰ä¸€ä¸ªå…ƒç´ æ˜¯å¶æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥åœ¨ max_even çš„åŸºç¡€ä¸ŠåŠ ä¸Š nums[i] å³å¯ï¼Œæ€»åˆ†ä¸º max_even + nums[i]ã€‚</li>
<li>å¦‚æœå‰ä¸€ä¸ªå…ƒç´ æ˜¯å¥‡æ•°ï¼Œæˆ‘ä»¬éœ€è¦ä» max_odd è½¬ç§»è¿‡æ¥ï¼Œä½†å› ä¸ºå¥‡å¶æ€§å‘ç”Ÿäº†å˜åŒ–ï¼Œéœ€è¦å‡å» xï¼Œæ€»åˆ†ä¸º <code>max_odd + nums[i] - x</code>.</li>
</ul>
</li>
</ul>
<p>å› æ­¤ï¼Œæ›´æ–°åçš„ max_even åº”è¯¥æ˜¯è¿™ä¸¤è€…ä¸­çš„è¾ƒå¤§å€¼ï¼š<code>max_even = nums[i] + max(max_even, max_odd - x)</code>.</p>
<p>å¦‚æœ nums[i] æ˜¯å¥‡æ•°æ—¶çš„æ›´æ–°æƒ…å†µåŒç†ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">long</span> <span class="kt">long</span> <span class="n">maxScore</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">long</span> <span class="kt">long</span> <span class="n">max_even</span><span class="p">,</span> <span class="n">max_odd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">max_odd</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="n">max_even</span> <span class="o">=</span> <span class="n">INT_MIN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">max_odd</span> <span class="o">=</span> <span class="n">INT_MIN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">max_even</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">max_even</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">max</span><span class="p">(</span><span class="n">max_even</span><span class="p">,</span> <span class="n">max_odd</span> <span class="o">-</span> <span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">max_odd</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">max</span><span class="p">(</span><span class="n">max_odd</span><span class="p">,</span> <span class="n">max_even</span> <span class="o">-</span> <span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">max</span><span class="p">(</span><span class="n">max_even</span><span class="p">,</span> <span class="n">max_odd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="1911">1911.<a hidden class="anchor" aria-hidden="true" href="#1911">#</a></h2>
<p>è®¾ f[i][j] è¡¨ç¤ºä»¥ nums[i] ä¸ºç»“å°¾çš„å­åºåˆ—ï¼Œä¸­ i æ˜¯å¥‡æ•°/å¶æ•°ç´¢å¼• (j=1/0) æˆ–æ—¶çš„æœ€å¤§äº¤æ›¿å’Œã€‚</p>
<p>å¯¹äºæ¯ä¸ªä½ç½® iï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§é€‰æ‹©ï¼š</p>
<ul>
<li>ä¸é€‰æ‹©å½“å‰å…ƒç´ ï¼šç›´æ¥ç»§æ‰¿å‰ i-1 ä¸ªå…ƒç´ çš„çŠ¶æ€ã€‚</li>
<li>é€‰æ‹©å½“å‰å…ƒç´ ï¼š
<ul>
<li><code>j = 0</code>: åˆ™éœ€è¦ä» <code>j = 1</code> è½¬ç§»è¿‡æ¥ï¼Œå½“å‰å…ƒç´ è´¡çŒ®ä¸ºæ­£ã€‚</li>
<li><code>j = 1</code>: åˆ™éœ€è¦ä»å¶æ•°ç´¢å¼•çŠ¶æ€ <code>j = 0</code> è½¬ç§»è¿‡æ¥ï¼Œå½“å‰å…ƒç´ è´¡çŒ®ä¸ºè´Ÿã€‚</li>
</ul>
</li>
</ul>
<p>å› æ­¤æˆ‘ä»¬æœ‰</p>
<ul>
<li><code>f[i][0] = max(f[i-1][0], f[i-1][1] + nums[i])</code></li>
<li><code>f[i][1] = max(f[i-1][1], f[i-1][0] - nums[i])</code></li>
</ul>
<p>åˆå§‹æ¡ä»¶:</p>
<ul>
<li><code>f[0][0] = nums[0]</code>: åˆå§‹å­åºåˆ—ä¸ºç©ºï¼Œé€‰æ‹©è‚¯å®šæ˜¯æ­£è´¡çŒ®ã€‚</li>
<li><code>f[0][1] = 0</code>: åªæœ‰ä¸€ä¸ªå…ƒç´ æ— æ³•æœ‰å¥‡æ•°ä¸‹æ ‡ï¼Œç”±äº nums å…ƒç´ éƒ½æ˜¯æ­£æ•´æ•°ï¼Œä¸å¯èƒ½è¢«å–åˆ°ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">long</span> <span class="kt">long</span> <span class="n">maxAlternatingSum</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1">// dp[0] è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ ä¸ºæ­£è´¡çŒ®çš„æœ€å¤§å’Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// dp[1] è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ ä¸ºè´Ÿè´¡çŒ®çš„æœ€å¤§å’Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">long</span> <span class="kt">long</span> <span class="n">dp</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">long</span> <span class="kt">long</span> <span class="n">temp0</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="c1">// ä¿å­˜ä¸Šä¸€ä¸ªçŠ¶æ€
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">dp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span> <span class="c1">// é€‰æ‹©å½“å‰å…ƒç´ ä¸ºæ­£è´¡çŒ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">dp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">temp0</span> <span class="o">-</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span> <span class="c1">// é€‰æ‹©å½“å‰å…ƒç´ ä¸ºè´Ÿè´¡çŒ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1">// è¿”å›æœ€å¤§å€¼ï¼Œè€ƒè™‘ç©ºå­åºåˆ—çš„æƒ…å†µ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="nf">max</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">dp</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h1 id="interval-dp">Interval DP<a hidden class="anchor" aria-hidden="true" href="#interval-dp">#</a></h1>
<ul>
<li>Linear DP: ä¸€èˆ¬æ˜¯åœ¨å‰ç¼€/åç¼€ä¸Šè½¬ç§»</li>
<li>Interval DP: ä»å°åŒºé—´è½¬ç§»åˆ°å¤§åŒºé—´</li>
</ul>
<h2 id="516-longest-alindromic-subsequence">516. Longest alindromic Subsequence<a hidden class="anchor" aria-hidden="true" href="#516-longest-alindromic-subsequence">#</a></h2>
<p><a href="https://leetcode.cn/problems/longest-palindromic-subsequence/">é¢˜ç›®ç½‘å€</a>.</p>
<p>æ€è·¯ 1: æ±‚ s å’Œåè½¬åçš„ LCS.</p>
<p>æ€è·¯ 2: é€‰æˆ–ä¸é€‰ï¼Œä»ä¸¤ä¾§å‘å†…ç¼©å°é—®é¢˜è§„æ¨¡ã€‚å›æ–‡å­åºåˆ—æ˜¯çœ‹ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå­—æ¯é€‰æˆ–ä¸é€‰ï¼Œä¸ç›¸åŒçš„è¯åªèƒ½é€‰ä¸€ä¸ªã€‚</p>
<p>å®šä¹‰ dfs(i,j) è¡¨ç¤ºä» s[i] åˆ° s[j] çš„æœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦ã€‚æœ€ç»ˆç»“æœä¸º dfs(0, n-1)ï¼Œè¡¨ç¤ºæ•´ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å›æ–‡å­åºåˆ—é•¿åº¦ã€‚</p>
$$
\left.dfs(i,j)=\left\{\begin{array}{ll}dfs(i+1,j-1)+2&s[i]=s[j]\\\max\left(dfs(i+1,j),dfs(i,j-1)\right)&s[i]\neq s[j]\end{array}\right.\right.
$$<p>é€’å½’è¾¹ç•Œ:</p>
<ul>
<li><code>dfs(i, i) = 1</code>: åªæœ‰ä¸€ä¸ªå­—æ¯æ—¶æœ¬èº«å°±æ˜¯å›æ–‡å­åºåˆ—ã€‚</li>
<li><code>dfs(i+1, i) = 0</code>: æ²¡æœ‰å­—æ¯è¿”å› 0.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">,</span> <span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="n">j</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">j</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">max</span><span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">s</span><span class="p">),</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">longestPalindromeSubseq</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ä¸€å…±æœ‰ $O(n^2)$ ä¸ªçŠ¶æ€ï¼Œæ¯ä¸ªçŠ¶æ€è®¡ç®—æ—¶é—´ä¸º $O(1)$ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º $O(n^2)$. ç©ºé—´å¤æ‚åº¦ä¸ºçŠ¶æ€ä¸ªæ•°ï¼Œå³ä¸º $O(n^2)$.</p>
<p>ç¿»è¯‘æˆé€’æ¨å…¬å¼å¦‚ä¸‹ï¼Œæœ€ç»ˆç­”æ¡ˆä¸º f[0][n-1].
</p>
$$
\left.f[i][j]=\begin{cases}0&i>j\\1&i=j\\f[i+1][j-1]+2&s[i]=s[j]\\\max\left(f[i+1][j],f[i][j-1])\right.&s[i]\neq s[j]\end{cases}\right.
$$<p>è¿™é‡Œéœ€è¦æ³¨æ„å¾ªç¯é¡ºåºï¼Œç”±äº f[i] ä» f[i+1] è½¬ç§»è¿‡æ¥ï¼Œæ‰€ä»¥ i è¦<strong>å€’åº</strong>æšä¸¾ã€‚f[i][j] ä» f[i][j-1] è½¬ç§»è¿‡æ¥ï¼Œæ‰€ä»¥ j è¦<strong>æ­£åº</strong>æšä¸¾ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">longestPalindromeSubseq</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="1039-minimum-score-triangulation-of-polygon">1039. Minimum Score Triangulation of Polygon<a hidden class="anchor" aria-hidden="true" href="#1039-minimum-score-triangulation-of-polygon">#</a></h2>
<p><a href="https://leetcode.cn/problems/minimum-score-triangulation-of-polygon/">é¢˜ç›®ç½‘å€</a>. å›ºå®šå¤šè¾¹å½¢çš„æŸä¸€æ¡è¾¹ï¼Œæ— è®ºå¦‚ä½•å‰–åˆ†è¿™ä¸ªå¤šè¾¹å½¢ï¼Œè¿™æ¡è¾¹ä¸€å®šåœ¨ä¸€ä¸ªä¸‰è§’å½¢ä¸­ã€‚æˆ‘ä»¬å°±æšä¸¾åŒ…å«è¿™æ¡è¾¹çš„ä¸‰è§’å½¢çš„å¦ä¸€ä¸ªé¡¶ç‚¹ã€‚æŠŠå¤šè¾¹å½¢çœ‹æˆä» i åˆ° j å†åŠ ä¸Šä» j åˆ° i è¿™æ¡è¾¹ç»„æˆçš„ã€‚æšä¸¾é¡¶ç‚¹ kï¼Œå®ƒä¸é¡¶ç‚¹ i å’Œé¡¶ç‚¹ j ç»„æˆä¸€ä¸ªä¸‰è§’å½¢ï¼Œå‰–åˆ†å‡ºè¿™ä¸ªä¸‰è§’å½¢åå°±å‰©ä¸‹ä¸¤ä¸ªæ›´å°çš„å¤šè¾¹å½¢ã€‚ä¸€ä¸ªä» i èµ°åˆ° kï¼Œå†ä» k èµ°åˆ° iï¼›å¦ä¸€ä¸ªä» k èµ°åˆ° jï¼Œå†ä» j èµ°åˆ° k.</p>
<p>å®šä¹‰ dfs(i, j) è¡¨ç¤º i åˆ° j è¿™ä¸ªå¤šè¾¹å½¢çš„æœ€ä½å¾—åˆ†ï¼Œæšä¸¾ k å¾—åˆ°å¦‚ä¸‹é€’å½’å¼:</p>
$$
dfs(i,j)=\max_{k=i+1}^{j-1}\left\{dfs(i,k)+dfs(k,j)+v[i]\cdot v[j]\cdot v[k]\right\}
$$<p>é€’å½’è¾¹ç•Œ: <code>dfs(i, i+1) = 0</code>, æ­¤æ—¶åªæœ‰ä¸¤ä¸ªé¡¶ç‚¹æ— æ³•æ„æˆä¸‰è§’å½¢ã€‚</p>
<p>æœ€ç»ˆç­”æ¡ˆä¸º dfs(0, n-1)ï¼Œè¡¨ç¤ºæ•´ä¸ªå¤šè¾¹å½¢çš„å‰–åˆ†ç»“æœã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">values</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">j</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">// not polygon
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">j</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// poly [i, i+1, ..., k] + tri[i,k,j] + poly[k, k+1, ..., j]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">ans</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span> <span class="o">+</span> <span class="n">dfs</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span> <span class="o">+</span> <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">values</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">*</span><span class="n">values</span><span class="p">[</span><span class="n">k</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">minScoreTriangulation</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">values</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">values</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">values</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ä¸€å…±æœ‰ $O(n^2)$ ä¸ªçŠ¶æ€ï¼Œæ¯ä¸ªçŠ¶æ€è®¡ç®—éœ€è¦ $O(n)$ çš„æ—¶é—´ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º $O(n^3)$. ç©ºé—´å¤æ‚åº¦ä¸ºçŠ¶æ€ä¸ªæ•°ï¼Œå³ä¸º $O(n^2)$.</p>
<p>ç¿»è¯‘æˆé€’æ¨å¾—åˆ°çš„å¼å­å¦‚ä¸‹</p>
$$
f[i][j]=\max_{k=i+1}^{j-1}\{f[i][k]+f[k][j]+v[i]\cdot v[j]\cdot v[k]\}
$$<ul>
<li>f[i] ç”± f[k] è½¬ç§»è¿‡æ¥ï¼Œå› æ­¤è¦å€’åºæšä¸¾ (i &lt; k).</li>
<li>f[i][j] ç”± f[i][k] è½¬ç§»è¿‡æ¥ï¼Œå› æ­¤è¦æ­£åºæšä¸¾ (j &gt; k).</li>
</ul>
<p>ç”±äº j ä» i+2 å¼€å§‹æ‰èƒ½æœ‰åŠæ³•æ„æˆä¸‰è§’å½¢ï¼Œå› æ­¤ i ä» n-3 å¼€å§‹å€’å™æšä¸¾ (é¿å… j ä¸‹æ ‡æº¢å‡º).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">minScoreTriangulation</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">values</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">values</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">3</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">j</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">values</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">*</span><span class="n">values</span><span class="p">[</span><span class="n">k</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h2 id="375-guess-number-highe-or-lower-ii">375. Guess Number Highe or Lower II<a hidden class="anchor" aria-hidden="true" href="#375-guess-number-highe-or-lower-ii">#</a></h2>
<p><a href="https://leetcode.cn/problems/guess-number-higher-or-lower-ii/">é¢˜ç›®ç½‘å€</a>. æ ¸å¿ƒæ˜¯è€ƒè™‘åœ¨æ¯ç§å¯èƒ½çš„çŒœæµ‹ä¸‹ï¼Œå¯¹æ‰‹ä¼šé€‰æ‹©è®©ä½ åç»­æˆæœ¬æœ€å¤§çš„æ•°å­—ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ç§ç­–ç•¥ï¼Œä½¿å¾—åœ¨æ‰€æœ‰å¯èƒ½çš„ç›®æ ‡æ•°å­—ä¸­ï¼Œæˆæœ¬çš„æœ€å¤§å€¼æœ€å°ã€‚</p>
<p>å®šä¹‰ dfs(i, j) ä¸º åœ¨ [i,j] ä¸Šè¿›è¡ŒçŒœæµ‹æœ€åæƒ…å†µçš„æœ€å°æˆæœ¬ã€‚æšä¸¾æ¯ä¸ªé€‰æ‹©æƒ…å†µ <code>i &lt;= k &lt;= j</code>ï¼Œå¯¹æ‰‹ä¼šè®©é€‰æ‹©å·¦è¾¹æˆ–å³è¾¹çš„åŒºé—´ä¸­æˆæœ¬è¾ƒå¤§çš„é‚£ä¸ªã€‚å› æ­¤æœ‰</p>
<p>dfs(i,j) = max
</p>
$$
dp[i][j]=\min_{k\in[i,j]}\left(k+\max(dp[i][k-1],dp[k+1][j])\right)\\
dfs(i,j)=\min_{k\in[i,j]}\left(k+\max(dfs(i,k-1),dfs(k+1,j))\right)
$$<p>è¾¹ç•Œæ¡ä»¶:</p>
<ul>
<li><code>i + 1 = j</code>: åªæœ‰ä¸¤ä¸ªæ•°ï¼ŒçŒœè¾ƒå°è€…åœ¨çŒœé”™æ—¶çš„æˆæœ¬æœ€å°ï¼Œè¿”å› i.</li>
<li><code>i = j</code>: åªæœ‰ä¸€ä¸ªæ•°ä¸å¯èƒ½çŒœé”™ï¼Œè¿”å› 0.</li>
<li><code>i - 1 = j</code>: èŒƒå›´å†…æ²¡æœ‰æ•°å­—ï¼Œè¿”å› 0 ä¸å½±å“å’Œå¦å¤–ä¸€åŠåŒºé—´å– max åçš„å€¼ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">j</span><span class="p">)</span> <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">j</span> <span class="o">||</span> <span class="n">i</span> <span class="o">==</span> <span class="n">j</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">cost</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;=</span> <span class="n">j</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">cost</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">cost</span><span class="p">,</span> <span class="n">k</span> <span class="o">+</span> <span class="n">max</span><span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">dfs</span><span class="p">(</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">cost</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">getMoneyAmount</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">dfs</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ä¸€å…±æœ‰ $O(n^2)$ ä¸ªçŠ¶æ€ï¼Œæ¯ä¸ªçŠ¶æ€è®¡ç®—æ—¶é—´ä¸º $O(n)$ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º $O(n^3)$.</p>
<p>ç¿»è¯‘æˆé€’æ¨å¦‚ä¸‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">getMoneyAmount</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="o">/</span><span class="mi">2</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;=</span> <span class="n">j</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">k</span> <span class="o">+</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">]));</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">n</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="132-palindrome-partitioning-ii">132. Palindrome Partitioning II<a hidden class="anchor" aria-hidden="true" href="#132-palindrome-partitioning-ii">#</a></h2>
<p><a href="https://leetcode.cn/problems/palindrome-partitioning-ii/">é¢˜ç›®ç½‘å€</a>. å®šä¹‰ dfs(r) ä¸ºæŠŠå‰ç¼€ s[0] åˆ° s[r] åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯å›æ–‡ä¸²çš„æœ€å°‘åˆ†å‰²æ¬¡æ•°ã€‚
æšä¸¾åˆ†å‰²å‡ºçš„æœ€å³è¾¹é‚£æ®µå­ä¸²çš„å·¦ç«¯ç‚¹ l: å¦‚æœ s[l] åˆ° s[r] æ˜¯å›æ–‡ä¸²ï¼Œé‚£ä¹ˆåœ¨ lâˆ’1 å’Œ l ä¹‹é—´åˆ‡ä¸€åˆ€ã€‚æ¥ä¸‹æ¥éœ€è¦è§£å†³çš„å­é—®é¢˜ä¸ºï¼šæŠŠå‰ç¼€ s[0] åˆ° s[lâˆ’1] åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯å›æ–‡ä¸²çš„æœ€å°‘åˆ†å‰²æ¬¡æ•°ï¼Œå³ dfs(lâˆ’1). å–æ‰€æœ‰æƒ…å†µçš„æœ€å°å€¼ï¼Œå³</p>
$$
dfs(r)=\min_{l=1}^rdfs(l-1)+1
$$<ul>
<li>é€’å½’è¾¹ç•Œ: s[0] åˆ° s[r] æ˜¯å›æ–‡ä¸²ï¼Œé‚£ä¹ˆæ— éœ€åˆ†å‰²ï¼Œç›´æ¥è¿”å› 0.</li>
<li>é€’å½’å…¥å£: dfs(nâˆ’1).</li>
</ul>
<p>è¿˜éœ€è¦å®šä¹‰ <code>isPalindrome(l,r)</code> è¡¨ç¤ºå­ä¸² s[l] åˆ° s[r] æ˜¯å¦ä¸ºå›æ–‡ä¸²</p>
<ul>
<li>å¦‚æœ <code>s[l]!=s[r]</code>ï¼Œé‚£ä¹ˆå­ä¸²è‚¯å®šä¸æ˜¯å›æ–‡ä¸²ï¼Œè¿”å› false.</li>
<li>å¦‚æœ <code>s[l]=s[r]</code>ï¼Œé‚£ä¹ˆé—®é¢˜å˜æˆ s[l+1] åˆ° s[râˆ’1] æ˜¯å¦ä¸ºå›æ–‡ä¸²ï¼Œå³ <code>isPalindrome(l+1,râˆ’1)</code>.</li>
</ul>
<p>é€’å½’è¾¹ç•Œï¼š<code>isPalindrome(l,l) = isPalindrome(l,lâˆ’1) = true</code>: é•¿åº¦ä¸º 1 çš„å­—ç¬¦ä¸²å’Œç©ºå­—ç¬¦ä¸²éƒ½æ˜¯å›æ–‡ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="nf">isPalindrome</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">,</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="n">j</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">isPalindrome</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">r</span><span class="p">,</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">isPalindrome</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">s</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">cut</span> <span class="o">=</span> <span class="n">INT_MAX</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="p">;</span> <span class="n">l</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">isPalindrome</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">s</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">cut</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">cut</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">dfs</span><span class="p">(</span><span class="n">l</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">cut</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">minCut</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ç¿»è¯‘æˆé€’æ¨çš„æ—¶å€™ç”±äºè¦è®¡ç®— Palindrome[i][j]ï¼Œå¿…é¡»å…ˆæŠŠ Palindrome[i+1][jâˆ’1] ç®—å‡ºæ¥ï¼Œé‚£ä¹ˆ i ä»å¤§åˆ°å°æšä¸¾ã€‚å¯¹äº j æ¥è¯´ï¼Œç”±äºåœ¨è®¡ç®— Palindrome[i][j] æ—¶ï¼ŒPalindrome[i+1] å·²ç»å…¨éƒ¨è®¡ç®—å®Œæ¯•ï¼Œæ‰€ä»¥ j æ— è®ºæ˜¯æ­£åºè¿˜æ˜¯å€’åºæšä¸¾éƒ½å¯ä»¥ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">minCut</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;&gt;</span> <span class="n">Palindrome</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">true</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Palindrome</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">Palindrome</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">r</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">Palindrome</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">r</span><span class="p">])</span> 
</span></span><span class="line"><span class="cl">            <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="p">;</span> <span class="n">l</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">Palindrome</span><span class="p">[</span><span class="n">l</span><span class="p">][</span><span class="n">r</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">ans</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">l</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">=</span> <span class="n">ans</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h2 id="3040-maximum-number-of-operations-with-the-same-score-ii">3040. Maximum Number of Operations with the Same Score II<a hidden class="anchor" aria-hidden="true" href="#3040-maximum-number-of-operations-with-the-same-score-ii">#</a></h2>
<p><a href="https://leetcode.cn/problems/maximum-number-of-operations-with-the-same-score-ii/">é¢˜ç›®ç½‘å€</a>. å®šä¹‰ dfs(i, j, s) ä¸ºå­æ•°ç»„ <code>s[i,...j]</code> ä¸­åœ¨åˆ†æ•° s ä¸Šå¯ä»¥è¿›è¡Œçš„æœ€å¤§æ“ä½œæ•°ã€‚
æ¯æ¬¡é€’å½’è€ƒè™‘ä¸‰ç§é€‰æ‹©ï¼š</p>
<ul>
<li>å¦‚æœ <code>nums[i] + nums[i+1] == s</code>ï¼Œåˆ é™¤ [i, i+1]ï¼Œé€’å½’åˆ°å­é—®é¢˜ dfs(i+2, j, s).</li>
<li>å¦‚æœ <code>nums[j-1] + nums[j] == s</code>ï¼Œåˆ é™¤ [j-1, j]ï¼Œé€’å½’åˆ°å­é—®é¢˜ dfs(i, j-2, s).</li>
<li>å¦‚æœ <code>nums[i] + nums[j] == s</code>ï¼Œåˆ é™¤ [i, j]ï¼Œé€’å½’åˆ°å­é—®é¢˜ dfs(i+1, j-1, s).</li>
</ul>
<p>å–ä¸‰è€…çš„æœ€å¤§å€¼è¿›è¡Œè¿”å›ã€‚</p>
<p>è¾¹ç•Œæ¡ä»¶:</p>
<ul>
<li><code>i + 1 &gt; j</code>: åŒºé—´ä¸ºç©ºæˆ–åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ— æ³•è¿›è¡Œæ“ä½œï¼Œè¿”å› 0.</li>
</ul>
<p>ä¸€å¼€å§‹æ“ä½œæ–¹æ³•æœ‰ä¸‰ç§ï¼Œä¸ºæ¯ç§æ“ä½œæƒ…å†µä½¿ç”¨è®°å¿†åŒ–æ•°ç»„ memo[i][j] å­˜å‚¨å·²è®¡ç®—çš„ (i, j) çŠ¶æ€ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">,</span> <span class="kt">int</span> <span class="n">score</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">memo</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="n">j</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">op1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">op2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">op3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">score</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">op1</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">nums</span><span class="p">,</span> <span class="n">memo</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">score</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">op2</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">2</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">nums</span><span class="p">,</span> <span class="n">memo</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">score</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">op3</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">nums</span><span class="p">,</span> <span class="n">memo</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">({</span><span class="n">op1</span><span class="p">,</span> <span class="n">op2</span><span class="p">,</span> <span class="n">op3</span><span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">maxOperations</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">memo1</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">memo2</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">memo3</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">score1</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">score2</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">score3</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">score1</span><span class="p">,</span> <span class="n">nums</span><span class="p">,</span> <span class="n">memo1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">score2</span><span class="p">,</span> <span class="n">nums</span><span class="p">,</span> <span class="n">memo2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">z</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">score3</span><span class="p">,</span> <span class="n">nums</span><span class="p">,</span> <span class="n">memo3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">max</span><span class="p">({</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="1547-minimum-cost-to-cut-a-stick">1547. Minimum Cost to Cut a Stick<a hidden class="anchor" aria-hidden="true" href="#1547-minimum-cost-to-cut-a-stick">#</a></h2>
<p><a href="https://leetcode.cn/problems/minimum-cost-to-cut-a-stick/">é¢˜ç›®ç½‘å€</a>. å­é—®é¢˜ç”±åˆ‡å‰²ç‚¹æ•°ç»„çš„ç´¢å¼•æ¥å®šä¹‰ã€‚å› ä¸ºçœŸæ­£å½±å“å†³ç­–çš„æ˜¯â€œåœ¨å½“å‰è¿™æ®µæœ¨æ£ä¸­ï¼Œæœ‰å“ªäº›å¯ç”¨çš„åˆ‡å‰²ç‚¹â€ã€‚ä¸ºäº†æ–¹ä¾¿å¤„ç†è¾¹ç•Œæƒ…å†µï¼Œæˆ‘ä»¬å°†æœ¨æ£çš„ä¸¤ä¸ªç«¯ç‚¹ 0 å’Œ n ä¹Ÿçœ‹ä½œæ˜¯åˆ‡å‰²ç‚¹ã€‚å°† 0 å’Œ n æ·»åŠ åˆ° cuts æ•°ç»„ä¸­ï¼Œç„¶åå¯¹è¿™ä¸ªæ–°çš„ new_cuts æ•°ç»„è¿›è¡Œæ’åºã€‚</p>
<p>ç°åœ¨ï¼Œä»»æ„ä¸¤ä¸ªç›¸é‚»çš„å…ƒç´  new_cuts[i] å’Œ new_cuts[i+1] éƒ½ä»£è¡¨äº†ä¸€æ®µä¸å¯å†åˆ†çš„æœ€å°æœ¨æ£ã€‚æˆ‘ä»¬çš„ä»»åŠ¡å°±æ˜¯æŠŠç”± new_cuts[i] å’Œ new_cuts[j] (j &gt; i) æ„æˆçš„é•¿æœ¨æ£ï¼Œé€šè¿‡å…¶é—´çš„æ‰€æœ‰åˆ‡å‰²ç‚¹ new_cuts[k] (i &lt; k &lt; j) å…¨éƒ¨åˆ‡å¼€ï¼Œæ±‚æœ€å°æˆæœ¬ã€‚</p>
<p>å®šä¹‰ dfs(i, j) ä¸ºåˆ‡å¼€ç”± new_cuts[i] å’Œ new_cuts[j] æ‰€è¡¨ç¤ºçš„æœ¨æ£æ®µæ‰€éœ€çš„æœ€å°æˆæœ¬ã€‚è®¡ç®— dfs(i, j) éœ€è¦åœ¨ new_cuts[i] å’Œ new_cuts[j] ä¹‹é—´é€‰æ‹©ä¸€ä¸ªåˆ‡å‰²ç‚¹ new_cuts[k] (i &lt; k &lt; j) ä½œä¸ºå½“å‰è¿™ä¸€æ®µçš„ç¬¬ä¸€æ¬¡åˆ‡å‰²ã€‚è¿™ä¸¤ä¸ªå­é—®é¢˜çš„æœ€å°æˆæœ¬åˆ†åˆ«æ˜¯ dfs(i,k) å’Œ dfs(k,j). è¿™æ¬¡åˆ‡å‰²çš„æˆæœ¬æ˜¯å½“å‰æœ¨æ£æ®µçš„é•¿åº¦ï¼Œå³ new_cuts[j] - new_cuts[i]. éœ€è¦éå†æ‰€æœ‰å¯èƒ½çš„ k (i &lt; k &lt; j)ï¼Œæ‰¾åˆ°ä½¿æ€»æˆæœ¬æœ€å°çš„é‚£ä¸ªã€‚</p>
$$ 
dfs(i, j) =(new_cuts[j]-new_cuts[i])+\min_{i<k<j}(dfs(i,k)+dfs(k,j))
$$<p>è¾¹ç•Œæ¡ä»¶: å¦‚æœ <code>j == i + 1</code>ï¼Œè¡¨ç¤º new_cuts[i] å’Œ new_cuts[j] æ˜¯ç›¸é‚»çš„ä¸¤ä¸ªç‚¹ï¼Œå®ƒä»¬ä¹‹é—´æ²¡æœ‰å…¶ä»–åˆ‡å‰²ç‚¹ã€‚æ‰€ä»¥è¿™æ®µæœ¨æ£æ— æ³•å†åˆ‡å‰²ï¼Œæˆæœ¬ä¸º 0.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">memo</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">new_cuts</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">j</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">cost</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">j</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">cost</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">cost</span><span class="p">,</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="n">dfs</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">j</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">cost</span> <span class="o">==</span> <span class="n">INT_MAX</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">cost</span><span class="p">)</span> <span class="o">+</span> <span class="n">new_cuts</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="n">new_cuts</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">minCost</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">cuts</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_cuts</span> <span class="o">=</span> <span class="n">cuts</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_cuts</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_cuts</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">sort</span><span class="p">(</span><span class="n">new_cuts</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">new_cuts</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">new_cuts</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">memo</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ç¿»è¯‘æˆé€’æ¨æ—¶å€™è¦è®¡ç®— f[i][j]ï¼Œå¿…é¡»å…ˆæŠŠ f[k][j] ç®—å‡ºæ¥ï¼Œç”±äº i &lt; kï¼Œé‚£ä¹ˆåªæœ‰ i ä»å¤§åˆ°å°æšä¸¾æ‰èƒ½åšåˆ°ã€‚åŒç†ï¼Œå¿…é¡»å…ˆæŠŠåŒä¸€è¡Œçš„ f[i][k] ç®—å‡ºæ¥ï¼Œç”±äº j &gt; kï¼Œé‚£ä¹ˆåªæœ‰ j ä»å°åˆ°å¤§æšä¸¾æ‰èƒ½åšåˆ°ã€‚åŒæ—¶ç”±äº j è‡³å°‘ä¸º i + 2 ä¸­é—´æ‰æœ‰åˆ‡åˆ†ç‚¹ï¼Œæ‰€ä»¥ i ä» m - 3 å¼€å§‹å€’å™æšä¸¾ (é¿å…ç´¢å¼•æº¢å‡º).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">minCost</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">cuts</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_cuts</span> <span class="o">=</span> <span class="n">cuts</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_cuts</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_cuts</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">sort</span><span class="p">(</span><span class="n">new_cuts</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">new_cuts</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">new_cuts</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// memo.resize(m, vector&lt;int&gt;(m, -1));
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">cost</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">j</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">cost</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">cost</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">cost</span> <span class="o">+</span> <span class="n">new_cuts</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="n">new_cuts</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h2 id="1771-maximize-palindrome-length-from-subsequences">1771. Maximize Palindrome Length from Subsequences<a hidden class="anchor" aria-hidden="true" href="#1771-maximize-palindrome-length-from-subsequences">#</a></h2>
<p><a href="https://leetcode.cn/problems/maximize-palindrome-length-from-subsequences/">é¢˜ç›®ç½‘å€</a>. å…ˆå¿½ç•¥â€œæ¨ªè·¨â€çš„é™åˆ¶ï¼Œè®¡ç®—å‡ºåˆå¹¶åå­—ç¬¦ä¸² s = word1 + word2 çš„æ‰€æœ‰å­ä¸²çš„ LPS é•¿åº¦ã€‚ç„¶åéå†æ‰€æœ‰å¯èƒ½æ„æˆâ€œæ¨ªè·¨â€å›æ–‡çš„æœ€å¤–å±‚å­—ç¬¦å¯¹ï¼Œåˆ©ç”¨ä¸Šä¸€æ­¥é¢„è®¡ç®—çš„ç»“æœï¼Œå¿«é€Ÿæ±‚å‡ºæ¯ç§æƒ…å†µä¸‹çš„æ€»é•¿åº¦ï¼Œå¹¶å–æœ€å¤§å€¼ã€‚</p>
<p>è¦æ»¡è¶³â€œæ¨ªè·¨â€çš„æ¡ä»¶ï¼Œæ„å‘³ç€æˆ‘ä»¬æœ€ç»ˆæ„æˆçš„å›æ–‡ä¸­ï¼Œå¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªå­—ç¬¦æ¥è‡ª word1ï¼Œä¸€ä¸ªå­—ç¬¦æ¥è‡ª word2ã€‚æœ€ç®€å•ç›´æ¥çš„æ»¡è¶³æ–¹å¼æ˜¯ï¼Œè®©å›æ–‡çš„æœ€å¤–å±‚çš„ä¸¤ä¸ªå­—ç¬¦ s[i] å’Œ s[j] åˆ†åˆ«æ¥è‡ª word1 å’Œ word2.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">,</span> <span class="n">string</span> <span class="n">word</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">memo</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="n">j</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">j</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">len</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">word</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">len</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">memo</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">len</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">memo</span><span class="p">),</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">memo</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">len</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">len</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">longestPalindrome</span><span class="p">(</span><span class="n">string</span> <span class="n">word1</span><span class="p">,</span> <span class="n">string</span> <span class="n">word2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="n">word1</span> <span class="o">+</span> <span class="n">word2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n1</span> <span class="o">=</span> <span class="n">word1</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">memo</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n1</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">n1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">ans</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">memo</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>åŒæ ·ç¿»è¯‘æˆé€’æ¨æ—¶ç”±äº f[i] ä¾èµ–äº f[i+1]ï¼Œ å› æ­¤ i è¦å€’åºéå†ï¼›f[i][j] ä¾èµ–äº f[i][j-1] å› æ­¤ j è¦æ­£åºéå†ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">longestPalindrome</span><span class="p">(</span><span class="n">string</span> <span class="n">word1</span><span class="p">,</span> <span class="n">string</span> <span class="n">word2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="n">word1</span> <span class="o">+</span> <span class="n">word2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n1</span> <span class="o">=</span> <span class="n">word1</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Step 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n1</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">n1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">ans</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h1 id="tree-dp">Tree DP<a hidden class="anchor" aria-hidden="true" href="#tree-dp">#</a></h1>
<h2 id="543-diameter-of-binary-tree">543. Diameter of Binary Tree<a hidden class="anchor" aria-hidden="true" href="#543-diameter-of-binary-tree">#</a></h2>
<p><a href="https://leetcode.cn/problems/diameter-of-binary-tree/">é¢˜ç›®ç½‘å€</a>. å›æƒ³æ±‚äºŒå‰æ ‘æœ€å¤§æ·±åº¦çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ€è€ƒçš„æ˜¯æ•´æ£µæ ‘å’Œå…¶å·¦å³å­æ ‘çš„å…³ç³»ã€‚æ•´æ£µæ ‘çš„æœ€å¤§æ·±åº¦=max(å·¦å­æ ‘çš„æœ€å¤§æ·±åº¦ï¼Œ å³å­æ ‘æœ€å¤§æ·±åº¦) + 1.</p>
<p>å¯¹äºæœ¬æœ¬é¢˜ï¼Œæœ€é•¿çš„è·¯å¾„çš„èµ·ç‚¹å’Œç»ˆç‚¹ä¸€å®šåœ¨å¶å­ä¸Š (å¦åˆ™å°±å¯ä»¥ç»§ç»­å»¶ä¼¸åˆ°å¶å­ä½¿å¾—é•¿åº¦æ›´å¤§). æ¢ä¸ªè§’åº¦çœ‹å¾…ç›´å¾„ï¼Œä»ä¸€ä¸ªå¶å­å‡ºå‘ï¼Œåœ¨æŸä¸ªèŠ‚ç‚¹æ‹å¼¯ï¼Œå‘ä¸‹åˆ°è¾¾å¦ä¸€ä¸ªå¶å­ï¼Œå°±å¾—åˆ°äº†ç”±ä¸¤æ¡é“¾æ‹¼èµ·æ¥çš„è·¯å¾„ (ä¹Ÿå¯èƒ½åªæœ‰ä¸€æ¡).</p>
<p>å› æ­¤æˆ‘ä»¬éå†äºŒå‰æ ‘ï¼Œåœ¨è®¡ç®—æœ€é•¿é“¾çš„åŒæ—¶ï¼Œé¡ºä¾¿æŠŠç›´å¾„ç®—å‡ºæ¥ã€‚åœ¨å½“å‰èŠ‚ç‚¹æ‹å¼¯çš„ç›´å¾„é•¿åº¦=å·¦å­æ ‘æœ€é•¿é“¾ + å³å­æ ‘æœ€é•¿é“¾ + 2. è¿”å›ç»™çˆ¶èŠ‚ç‚¹çš„æ˜¯<strong>ä»¥å½“å‰èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘çš„æœ€é•¿é“¾</strong> = max (å·¦å­æ ‘æœ€é•¿é“¾ï¼Œå³å­æ ‘æœ€é•¿é“¾) + 1.</p>
<p>å½“èŠ‚ç‚¹ä¸ºç©ºçš„æ—¶å€™è¿”å› -1ï¼Œè¿™æ ·å‡½æ•°æœ€åè¿”å›é“¾é•¿çš„æ—¶å€™ + 1 å°±åˆšå¥½æ˜¯ 0. åŒæ—¶å¯¹äºå¶å­èŠ‚ç‚¹ï¼Œä»–çš„æœ€å¤§ç›´å¾„åˆšå¥½ä¹Ÿä¸º -1 + (-1) + 2 = 0.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">root</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">lLen</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">rLen</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">ans</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="n">lLen</span> <span class="o">+</span> <span class="n">rLen</span> <span class="o">+</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">max</span><span class="p">(</span><span class="n">lLen</span><span class="p">,</span> <span class="n">rLen</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">diameterOfBinaryTree</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">dfs</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>éœ€è¦éå†æ¯ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$. æœ€åæƒ…å†µä¸‹äºŒå‰æ ‘ä¸ºä¸€æ¡é“¾ï¼Œéœ€è¦æ·±åº¦ä¸º n çš„æ ˆæ¥å­˜å‚¨é€’å½’ä¸­çš„å˜é‡ï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸º $O(n)$.</p>
<h2 id="124-binary-tree-maximum-path-sum">124. binary Tree Maximum Path Sum<a hidden class="anchor" aria-hidden="true" href="#124-binary-tree-maximum-path-sum">#</a></h2>
<p><a href="https://leetcode.cn/problems/binary-tree-maximum-path-sum/">é¢˜ç›®ç½‘å€</a>. è¿™é¢˜è¦æŠŠè·¯å¾„ä¸ŠèŠ‚ç‚¹çš„å’ŒåŠ èµ·æ¥ï¼Œè™½ç„¶ä»è¾¹å˜æˆäº†ç‚¹ï¼Œä½†æˆ‘ä»¬ä»ç„¶æšä¸¾æ‹å¼¯çš„ä½ç½®ã€‚å·¦å³å­æ ‘éœ€è¦åˆ†åˆ«æ‰¾åˆ°ä¸€æ¡å’Œæœ€å¤§çš„é“¾ï¼ŒåŠ ä¸Šå½“å‰èŠ‚ç‚¹çš„å€¼å°±æ˜¯æœ€å¤§è·¯å¾„å’Œäº†ã€‚æ³¨æ„å¦‚æœå·¦å³å­æ ‘ä¸­å³æœ€å¤§é“¾å’Œæ˜¯è´Ÿæ•°ï¼Œå°±ç›´æ¥è¿”å› 0.</p>
<p>åœ¨å½“å‰èŠ‚ç‚¹æ‹å¼¯çš„æœ€å¤§è·¯å¾„å’Œ = å·¦å­æ ‘çš„æœ€å¤§é“¾å’Œ + å³å­æ ‘çš„æœ€å¤§é“¾å’Œ + å½“å‰èŠ‚ç‚¹å€¼ã€‚</p>
<p>è¿”å›ç»™çˆ¶èŠ‚ç‚¹çš„æ˜¯<strong>ä»¥å½“å‰èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘çš„æœ€é•¿é“¾å’Œ</strong> = max (å·¦å­æ ‘æœ€å¤§é“¾å’Œï¼Œå³å­æ ‘æœ€å¤§é“¾å’Œ) + å½“å‰èŠ‚ç‚¹å€¼ã€‚å¦‚æœå€¼ä¸ºè´Ÿæ•°ï¼Œè¿”å› 0ã€‚</p>
<p>æ³¨æ„è¿™é‡Œæ›´æ–°ç­”æ¡ˆçš„æ—¶å€™æ˜¯ç›´æ¥å– maxï¼Œå½“æ ‘ä¸­æ‰€æœ‰èŠ‚ç‚¹éƒ½ä¸ºè´Ÿæ•°çš„æ—¶å€™ï¼Œå·¦å³å­æ ‘æœ€å¤§é“¾å’Œè¿”å›çš„éƒ½ä¸º 0. é€’å½’è¿‡ç¨‹å°±å˜æˆäº†å–æ‰€æœ‰èŠ‚ç‚¹å€¼ä¸­æœ€å¤§çš„é‚£ä¸ªã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="n">INT_MIN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">root</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">lSum</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">rSum</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">ans</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="n">lSum</span> <span class="o">+</span> <span class="n">rSum</span> <span class="o">+</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">max</span><span class="p">(</span><span class="n">max</span><span class="p">(</span><span class="n">lSum</span><span class="p">,</span> <span class="n">rSum</span><span class="p">)</span> <span class="o">+</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">maxPathSum</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">dfs</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="2246-longest-path-with-different-adjacent-characters">2246. Longest Path with Different Adjacent Characters<a hidden class="anchor" aria-hidden="true" href="#2246-longest-path-with-different-adjacent-characters">#</a></h2>
<p><a href="https://leetcode.cn/problems/longest-path-with-different-adjacent-characters/">é¢˜ç›®ç½‘å€</a>. å¯¹äºä¸€é¢—æ™®é€šçš„æ ‘æ¥è¯´ï¼Œå®ƒæœ‰å¾ˆå¤šä¸ªé‚»å±… (æœ‰è¾¹ç›¸è¿çš„èŠ‚ç‚¹). åœ¨ä¸€æ£µäºŒå‰æ ‘ä¸­è‡³å¤šæœ‰ä¸‰ä¸ªé‚»å±… (å·¦å³èŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹).</p>
<p>è¦æ±‚ä¸€æ£µæ ‘çš„æœ€é•¿è·¯å¾„</p>
<ol>
<li>éå†æ‰€æœ‰å­æ ‘ï¼ŒæŠŠå­æ ‘æœ€é•¿é“¾çš„é•¿åº¦éƒ½å­˜åœ¨ä¸€ä¸ªæ•°ç»„ä¸­è¿›è¡Œæ’åºåå–æœ€å¤§çš„ä¸¤ä¸ª + 1.</li>
<li>éå†å­æ ‘çš„åŒæ—¶æ±‚æœ€é•¿+æ¬¡é•¿é“¾ã€‚éå†çš„æ—¶å€™<strong>ç»´æŠ¤æœ€é•¿é•¿åº¦</strong>ä¸€å®šä¼šåœ¨éå†åˆ°æŸæ£µå­æ ‘æ—¶ç®—å‡ºæœ€é•¿+æ¬¡é•¿ã€‚
<ul>
<li>å¦‚æœæ¬¡é•¿åœ¨å‰é¢ï¼Œæœ€é•¿åœ¨åé¢é‚£ä¹ˆéå†åˆ°<strong>æœ€é•¿</strong>çš„æ—¶å€™å°±èƒ½ç®—å‡ºæœ€é•¿+æ¬¡é•¿ã€‚</li>
<li>å¦‚æœæœ€é•¿åœ¨å‰é¢ï¼Œæ¬¡é•¿åœ¨åé¢é‚£ä¹ˆéå†åˆ°<strong>æ¬¡é•¿</strong>çš„æ—¶å€™å°±èƒ½ç®—å‡ºæœ€é•¿+æ¬¡é•¿ã€‚</li>
</ul>
</li>
</ol>
<p>å› æ­¤å‡½æ•°è¦è¿”å›ä»¥å½“å‰èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„æœ€å¤§é“¾é•¿ã€‚ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„å„¿å­èŠ‚ç‚¹ä¸‹æ ‡ï¼Œéå†æ¯ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰å„¿å­ï¼Œæ±‚å‡ºå®ƒçš„æœ€å¤§é“¾é•¿ï¼Œå¹¶åŒæ—¶æ›´æ–°æœ€é•¿è·¯å¾„ã€‚ç”±äºé¢˜ç›®è¦æ±‚ç›¸é‚»èŠ‚ç‚¹å­—ç¬¦ä¸èƒ½ç›¸åŒï¼Œå› æ­¤æ›´æ–°çš„æ—¶å€™éœ€è¦åŠ ä¸Šåˆ¤æ–­æ¡ä»¶ã€‚</p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„<strong>æ— è®ºå­—ç¬¦æ˜¯å¦ç›¸ç­‰éƒ½è¦å…ˆè¿›è¡Œ dfs</strong>. ä¸ç„¶å¯¹ neighbor æ‰€åœ¨çš„æ•´ä¸ªå­æ ‘çš„æ¢ç´¢å°±è¢«å®Œå…¨è·³è¿‡äº†ã€‚å› ä¸ºæœ€é•¿è·¯å¾„ä¸ä¸€å®šç»è¿‡æ ¹èŠ‚ç‚¹</p>
<pre tabindex="0"><code>      a (0)
      |
      a (1)
      |
      b (2)
      |
      c (3)
</code></pre><p>å½“ dfs è¿è¡Œåˆ°æ ¹èŠ‚ç‚¹ 0 å› ä¸º <code>s[0] == s[1]</code> ä¼šç›´æ¥è·³è¿‡ <code>dfs(1, ...)</code>.</p>
<blockquote>
<p>å¦‚æœé¢˜ç›®ä¸­å®šä¹‰ä¸€ä¸ªç»“ç‚¹çš„é‚»å±…åŒ…å«çˆ¶èŠ‚ç‚¹ï¼Œé‚£ä¹ˆé€’å½’å‡½æ•°éœ€è¦é¢å¤–ä¼ å…¥ä¸€ä¸ªå‚æ•°è¡¨ç¤ºçˆ¶èŠ‚ç‚¹ä¸‹æ ‡ï¼Œéå†é‡åˆ°çš„æ—¶å€™ç›´æ¥ continue. é€’å½’å…¥å£è¿™é‡Œåˆ™å¡«å†™ -1ï¼Œå› ä¸º 0 æ²¡æœ‰çˆ¶èŠ‚ç‚¹ã€‚</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">root</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">tree</span><span class="p">,</span> <span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">maxNeighborLen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">neighbor</span><span class="p">:</span> <span class="n">tree</span><span class="p">[</span><span class="n">root</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kt">int</span> <span class="n">neighborLen</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">neighbor</span><span class="p">,</span> <span class="n">tree</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">neighbor</span><span class="p">]</span> <span class="o">!=</span> <span class="n">s</span><span class="p">[</span><span class="n">root</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//int neighborLen = dfs(neighbor, tree, s);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ans</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="n">maxNeighborLen</span> <span class="o">+</span> <span class="n">neighborLen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">maxNeighborLen</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">maxNeighborLen</span><span class="p">,</span> <span class="n">neighborLen</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">maxNeighborLen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">longestPath</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">parent</span><span class="p">,</span> <span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">parent</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">      <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">tree</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">tree</span><span class="p">[</span><span class="n">parent</span><span class="p">[</span><span class="n">i</span><span class="p">]].</span><span class="n">push_back</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="n">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tree</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="687-longest-univalue-path">687. Longest Univalue Path<a hidden class="anchor" aria-hidden="true" href="#687-longest-univalue-path">#</a></h2>
<p><a href="https://leetcode.cn/problems/longest-univalue-path/">é¢˜ç›®ç½‘å€</a>. dfs(node) å‡½æ•°åº”è¯¥è¿”å›å·¦å³å­æ ‘ä¸­æœ€é•¿çš„åŒå€¼è·¯å¾„é•¿åº¦ (è¾¹çš„æ•°é‡). è¿˜éœ€è¦æ›´æ–°ä¸€ä¸ªå…¨å±€å˜é‡æ¥è®°å½•ç©¿è¿‡å½“å‰èŠ‚ç‚¹ node çš„æœ€é•¿åŒå€¼è·¯å¾„ã€‚è¿™æ¡è·¯å¾„å¯èƒ½æ˜¯ç”±å·¦ã€å³ä¸¤æ¡è·¯å¾„æ‹¼æ¥è€Œæˆçš„ &ldquo;V&rdquo; å­—å½¢ã€‚</p>
<ul>
<li>è¾¹ç•Œæ¡ä»¶: ç©ºèŠ‚ç‚¹è·¯å¾„é•¿åº¦ä¸º 0.</li>
<li>é€’å½’æ¨¡å‹: å¦‚æœå·¦/å³å„¿å­å­˜åœ¨å¹¶ä¸”å€¼ä¸å½“å‰èŠ‚ç‚¹ç›¸åŒï¼Œåˆ™å¯ä»¥æ‹¼åœ¨ä¸€èµ·ï¼›å¦åˆ™é•¿åº¦ä¸º 0.</li>
</ul>
<p>è®¡ç®—å‡ºå·¦/å³å­æ ‘çš„æœ€å¤§é•¿åº¦ååŠ åœ¨ä¸€èµ·æ›´æ–°å…¨å±€å˜é‡ã€‚æ ¹æ®æˆ‘ä»¬å¯¹ dfs å‡½æ•°çš„å®šä¹‰ï¼Œå®ƒéœ€è¦è¿”å›ä»å½“å‰èŠ‚ç‚¹å‡ºå‘å‘ä¸‹å»¶ä¼¸çš„æœ€é•¿å•é“¾é•¿åº¦ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// retur max edge num from root
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">root</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">lLen</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">rLen</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">arrowLeft</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">arrowRight</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">&amp;&amp;</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">==</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">arrowLeft</span> <span class="o">=</span> <span class="n">lLen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">&amp;&amp;</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">==</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">arrowRight</span> <span class="o">=</span> <span class="n">rLen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">ans</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="n">arrowLeft</span> <span class="o">+</span> <span class="n">arrowRight</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">max</span><span class="p">(</span><span class="n">arrowLeft</span><span class="p">,</span> <span class="n">arrowRight</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">longestUnivaluePath</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">dfs</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="3203-find-minimum-diameter-after-merging-two-trees">3203. Find Minimum Diameter After Merging Two Trees<a hidden class="anchor" aria-hidden="true" href="#3203-find-minimum-diameter-after-merging-two-trees">#</a></h2>
<p><a href="https://leetcode.cn/problems/find-minimum-diameter-after-merging-two-trees/">é¢˜ç›®ç½‘å€</a>. å½“æˆ‘ä»¬ç”¨ä¸€æ¡è¾¹è¿æ¥ Tree1 çš„èŠ‚ç‚¹ u å’Œ Tree2 çš„èŠ‚ç‚¹ v åï¼Œæ–°æ ‘çš„ç›´å¾„æ¥æºæœ‰ä¸‰ç§å¯èƒ½ï¼š</p>
<ol>
<li>æœ€é•¿è·¯å¾„å®Œå…¨ä½äº Tree1 å†…éƒ¨ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè·¯å¾„é•¿åº¦å°±æ˜¯ Tree1 çš„åŸç›´å¾„ D1.</li>
<li>æœ€é•¿è·¯å¾„å®Œå…¨ä½äº Tree2 å†…éƒ¨ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè·¯å¾„é•¿åº¦å°±æ˜¯ Tree2 çš„åŸç›´å¾„ D2.</li>
<li>æœ€é•¿è·¯å¾„è·¨è¶Šäº†æ–°åŠ çš„è¾¹ (u, v).</li>
</ol>
<p>æ–°æ ‘çš„ç›´å¾„å°†æ˜¯è¿™ä¸‰ç§æƒ…å†µä¸­çš„æœ€å¤§å€¼ã€‚D1 å’Œ D2 æ˜¯å›ºå®šçš„ï¼Œä¸å—æˆ‘ä»¬é€‰æ‹© u å’Œ v çš„å½±å“ã€‚å› æ­¤ï¼Œä¸ºäº†æœ€å°åŒ–æ–°ç›´å¾„ï¼Œæˆ‘ä»¬å¿…é¡»æœ€å°åŒ–è·¨è¶Šè¾¹ (u,v) çš„æœ€é•¿è·¯å¾„ã€‚</p>
<p>ä¸€æ¡è·¨è¶Š (u, v) çš„è·¯å¾„ï¼Œå…¶å½¢æ€å¿…ç„¶æ˜¯ï¼š
<code>Tree1ä¸­çš„æŸä¸ªèŠ‚ç‚¹ x -&gt; ... -&gt; u -&gt; v -&gt; ... -&gt; Tree2ä¸­çš„æŸä¸ªèŠ‚ç‚¹ y</code>. ä¸ºäº†è®©è¿™æ¡è·¯å¾„æœ€é•¿ï¼Œx å¿…é¡»æ˜¯ Tree1 ä¸­è·ç¦» u æœ€è¿œçš„èŠ‚ç‚¹ï¼Œy å¿…é¡»æ˜¯ Tree2 ä¸­è·ç¦» v æœ€è¿œçš„èŠ‚ç‚¹ã€‚
æ‰€ä»¥ï¼Œå¯¹äºå›ºå®šçš„è¿æ¥ç‚¹ u å’Œ vï¼Œè·¨æ ‘çš„æœ€é•¿è·¯å¾„é•¿åº¦æ˜¯ï¼š
<code>max_dist_from(u) + 1 + max_dist_from(v)</code></p>
<p>ä¸€ä¸ªèŠ‚ç‚¹åˆ°æ ‘ä¸­å…¶ä»–èŠ‚ç‚¹çš„æœ€å¤§è·ç¦»ï¼Œè¿™ä¸ªå€¼çš„æœ€å°å€¼è¢«ç§°ä¸ºæ ‘çš„åŠå¾„ (Radius). èƒ½å–åˆ°è¿™ä¸ªæœ€å°å€¼çš„èŠ‚ç‚¹è¢«ç§°ä¸ºæ ‘çš„ä¸­å¿ƒ (Center). å› æ­¤ï¼Œä¸ºäº†æœ€å°åŒ–è·¨æ ‘è·¯å¾„ï¼Œæˆ‘ä»¬åº”è¯¥é€‰æ‹© Tree1 çš„ä¸­å¿ƒèŠ‚ç‚¹æ¥è¿æ¥ Tree2 çš„ä¸­å¿ƒèŠ‚ç‚¹ã€‚æ­¤æ—¶ï¼Œmax_dist_from(u) å°±æ˜¯ Tree1 çš„åŠå¾„ R1ï¼Œmax_dist_from(v) å°±æ˜¯ Tree2 çš„åŠå¾„ R2. æœ€å°çš„è·¨æ ‘è·¯å¾„é•¿åº¦ä¸º <code>R1 + R2 + 1</code>.</p>
<p>åˆå¹¶åæ–°æ ‘çš„æœ€å°ç›´å¾„ä¸ºï¼š
$\min Diameter = \max(D1, D2, R1 + R2 + 1)$.</p>
<p>è®¡ç®—ä¸€æ£µæ ‘çš„ç›´å¾„ D çš„ç»å…¸æ–¹æ³•æ˜¯ä¸¤æ¬¡ BFS/DFSï¼š</p>
<ol>
<li>ä»ä»»æ„èŠ‚ç‚¹ s å‡ºå‘ï¼Œé€šè¿‡ BFS/DFS æ‰¾åˆ°ç¦»å®ƒæœ€è¿œçš„èŠ‚ç‚¹ a.</li>
<li>å†ä»èŠ‚ç‚¹ a å‡ºå‘ï¼Œé€šè¿‡ BFS/DFS æ‰¾åˆ°ç¦» a æœ€è¿œçš„èŠ‚ç‚¹ b.</li>
</ol>
<details class="custom-details">
    <summary class="custom-summary">Prove of Diameter Calculation Algorithm</summary>
    <div><p>è¿™ä¸ªç®—æ³•çš„æ­£ç¡®æ€§ä¾èµ–äºä¸€ä¸ªå…³é”®çš„ç»“è®ºï¼š</p>
<p><strong>å¯¹äºæ ‘ä¸­ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ uï¼Œç¦»å®ƒæœ€è¿œçš„èŠ‚ç‚¹ v å¿…ç„¶æ˜¯è¯¥æ ‘æŸæ¡ç›´å¾„çš„ä¸€ä¸ªç«¯ç‚¹ã€‚</strong></p>
<p>åªè¦è¿™ä¸ªç»“è®ºæˆç«‹ï¼Œé‚£ä¹ˆç®—æ³•å°±æ˜¯æ­£ç¡®çš„ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ¬¡ BFS/DFS: æˆ‘ä»¬ä»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ start å‡ºå‘ï¼Œæ‰¾åˆ°äº†ç¦»å®ƒæœ€è¿œçš„èŠ‚ç‚¹ Aã€‚æ ¹æ®ä¸Šé¢çš„ç»“è®ºï¼ŒèŠ‚ç‚¹ A å¿…ç„¶æ˜¯æ ‘çš„ä¸€æ¡ç›´å¾„çš„ç«¯ç‚¹ã€‚</li>
<li>ç¬¬äºŒæ¬¡ BFS/DFS: æ—¢ç„¶æˆ‘ä»¬å·²ç»æ‰¾åˆ°äº†ä¸€ä¸ªç›´å¾„çš„ç«¯ç‚¹ Aï¼Œé‚£ä¹ˆæˆ‘ä»¬å†ä» A å‡ºå‘ï¼Œæ‰¾åˆ°ç¦» A æœ€è¿œçš„èŠ‚ç‚¹ Bã€‚A å’Œ B ä¹‹é—´çš„è·¯å¾„å°±ä¸€å®šæ˜¯æ ‘çš„ç›´å¾„äº†ã€‚</li>
</ul>
<p>å‡è®¾ç»“è®ºä¸æˆç«‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå­˜åœ¨æŸä¸ªèŠ‚ç‚¹ uï¼Œç¦»å®ƒæœ€è¿œçš„èŠ‚ç‚¹ vï¼Œä½† v ä¸æ˜¯ä»»ä½•ä¸€æ¡ç›´å¾„çš„ç«¯ç‚¹ã€‚
æ—¢ç„¶ v ä¸æ˜¯ç›´å¾„ç«¯ç‚¹ï¼Œé‚£ä¹ˆæ ‘ä¸­å¿…ç„¶å­˜åœ¨ä¸€æ¡çœŸæ­£çš„ç›´å¾„ï¼Œæˆ‘ä»¬ç§°å®ƒçš„ä¸¤ä¸ªç«¯ç‚¹ä¸º p å’Œ qï¼Œè¿™æ¡ç›´å¾„çš„è·¯å¾„å°±æ˜¯ <code>p &lt;---&gt; q</code>.</p>
<p>å‡è®¾è·¯å¾„ u &lt;&mdash;&gt; v å’Œè·¯å¾„ p &lt;&mdash;&gt; q åœ¨æ ‘ä¸­æœ‰ä¸€ä¸ªäº¤ç‚¹ (æˆ–è€…ä¸¤æ¡è·¯å¾„æ²¡æœ‰å…¬å…±è¾¹ï¼Œä½†é€»è¾‘æ˜¯ç±»ä¼¼çš„)ï¼Œæˆ‘ä»¬è®¾è¿™ä¸ªäº¤ç‚¹ä¸º x.</p>
<pre tabindex="0"><code>      p
      |
      x-------u
     / \
    q   v
</code></pre><ul>
<li>dist(u, v) = dist(u, x) + dist(x, v)</li>
<li>dist(u, p) = dist(u, x) + dist(x, p)</li>
</ul>
<p>æ ¹æ®å‡è®¾ dist(u, v) &gt;= dist(u, p)ï¼Œæ‰€ä»¥å¯ä»¥æ¨å¯¼å‡º dist(x, v) &gt;= dist(x, p).
æ‰€ä»¥ <code>dist(q, v) = dist(q, x) + dist(x, v) &gt;= dist(q, x) + dist(x, p) = ç›´å¾„</code>. è¿™ç›´å¾„çš„å®šä¹‰ç›¸æ‚–ï¼Œæ‰€ä»¥ v ä¸€å®šæ˜¯æŸæ¡ç›´å¾„çš„ä¸€ä¸ªç«¯ç‚¹ã€‚</p>
</div>
</details><br>
<p>a å’Œ b ä¹‹é—´çš„è·¯å¾„å°±æ˜¯æ ‘çš„ä¸€æ¡ç›´å¾„ï¼Œå…¶é•¿åº¦å³ä¸º D. æ ‘çš„åŠå¾„ R = ceil(D / 2).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">bfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">startNode</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">adj</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">dist</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">q</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">dist</span><span class="p">[</span><span class="n">startNode</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">startNode</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">farestNode</span> <span class="o">=</span> <span class="n">startNode</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">maxDist</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">q</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kt">int</span> <span class="n">u</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">front</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">      <span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="n">dist</span><span class="p">[</span><span class="n">u</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">maxDist</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">farestNode</span> <span class="o">=</span> <span class="n">u</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">maxDist</span> <span class="o">=</span> <span class="n">dist</span><span class="p">[</span><span class="n">u</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="nl">v</span> <span class="p">:</span> <span class="n">adj</span><span class="p">[</span><span class="n">u</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">dist</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="n">dist</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">dist</span><span class="p">[</span><span class="n">u</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span><span class="n">farestNode</span><span class="p">,</span> <span class="n">maxDist</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="nf">getDiameter</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">adj</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="p">[</span><span class="n">farestNode</span><span class="p">,</span> <span class="n">maxDist</span><span class="p">]</span> <span class="o">=</span> <span class="n">bfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">adj</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="p">[</span><span class="n">farestNode2</span><span class="p">,</span> <span class="n">diameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">bfs</span><span class="p">(</span><span class="n">farestNode</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">adj</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">diameter</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">minimumDiameterAfterMerge</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">edges1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">edges2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">tree1</span><span class="p">(</span><span class="n">edges1</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">tree2</span><span class="p">(</span><span class="n">edges2</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">edge</span> <span class="p">:</span> <span class="n">edges1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">tree1</span><span class="p">[</span><span class="n">edge</span><span class="p">[</span><span class="mi">0</span><span class="p">]].</span><span class="n">push_back</span><span class="p">(</span><span class="n">edge</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="n">tree1</span><span class="p">[</span><span class="n">edge</span><span class="p">[</span><span class="mi">1</span><span class="p">]].</span><span class="n">push_back</span><span class="p">(</span><span class="n">edge</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">edge</span> <span class="p">:</span> <span class="n">edges2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">tree2</span><span class="p">[</span><span class="n">edge</span><span class="p">[</span><span class="mi">0</span><span class="p">]].</span><span class="n">push_back</span><span class="p">(</span><span class="n">edge</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="n">tree2</span><span class="p">[</span><span class="n">edge</span><span class="p">[</span><span class="mi">1</span><span class="p">]].</span><span class="n">push_back</span><span class="p">(</span><span class="n">edge</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      
</span></span><span class="line"><span class="cl">      <span class="kt">int</span> <span class="n">d1</span> <span class="o">=</span> <span class="n">getDiameter</span><span class="p">(</span><span class="n">tree1</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">tree1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="kt">int</span> <span class="n">d2</span> <span class="o">=</span> <span class="n">getDiameter</span><span class="p">(</span><span class="n">tree2</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">tree2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="nf">max</span><span class="p">({</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">,</span> <span class="p">(</span><span class="n">d1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">d2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="1617-count-subtrees-with-max-distance-between-cities">1617. Count Subtrees With Max Distance Between Cities<a hidden class="anchor" aria-hidden="true" href="#1617-count-subtrees-with-max-distance-between-cities">#</a></h2>
<p><a href="https://leetcode.cn/problems/count-subtrees-with-max-distance-between-cities/">é¢˜ç›®ç½‘å€</a>.</p>
<ol>
<li>å›æº¯æšä¸¾æ‰€æœ‰å­é›†ã€‚f(i) ç”¨äºå†³å®šç¬¬ i ä¸ªèŠ‚ç‚¹æ˜¯å¦æ”¾å…¥å­é›†å½“ä¸­ã€‚</li>
</ol>
<ul>
<li>ä¸é€‰ i: ç›´æ¥è°ƒç”¨ f(i+1) æšä¸¾ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</li>
<li>é€‰ i: æ ‡è®° <code>in_set[i] = true</code>ï¼Œè°ƒç”¨ f(i+1) æšä¸¾ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé€’å½’å®Œæˆåæ¢å¤ç°åœºã€‚</li>
</ul>
<p>å½“ <code>i == n</code> æ—¶ï¼Œé€’å½’åˆ°è¾¾äº†ç»ˆç‚¹ï¼Œæ„å‘³ç€æˆ‘ä»¬å¯¹æ‰€æœ‰ n ä¸ªèŠ‚ç‚¹éƒ½å·²ç»åšå‡ºäº†é€‰æˆ–ä¸é€‰çš„å†³å®šã€‚æ­¤æ—¶ï¼Œin_set æ•°ç»„å°±ä»£è¡¨äº†ä¸€ä¸ªå®Œæ•´çš„èŠ‚ç‚¹å­é›†ã€‚</p>
<ol start="2">
<li>éªŒè¯ä¸è®¡ç®—</li>
</ol>
<p>å½“åˆ°è¾¾é€’å½’ç»ˆç‚¹åï¼Œç°åœ¨éœ€è¦åˆ¤æ–­ in_set é‡Œçš„èŠ‚ç‚¹æ˜¯ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„ã€è¿é€šçš„å­æ ‘ï¼Œå¦‚æœæ˜¯ï¼Œè¿˜è¦è®¡ç®—å®ƒçš„ç›´å¾„ã€‚</p>
<p>ä»å­é›†ä¸­æ‰¾åˆ°ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ (è¿™é‡Œé€‰ç¬¬ä¸€ä¸ª) ä½œä¸º DFS éå†çš„èµ·ç‚¹ã€‚åˆ©ç”¨æ ‘å½¢ DP æ¥è®¡ç®—ç›´å¾„ã€‚dfs(x) è¡¨ç¤ºä»èŠ‚ç‚¹ x å‘å…¶å­æ ‘ (åœ¨å½“å‰å­é›†å†…çš„)å»¶ä¼¸ä¸‹å»çš„æœ€é•¿è·¯å¾„é•¿åº¦ã€‚</p>
<p>é¦–å…ˆæ ‡è®° x è¢«è®¿é—®äº†ï¼Œç„¶ååœ¨éå† x çš„å­èŠ‚ç‚¹ y æ—¶ (æ²¡æœ‰è¢«è®¿é—®è¿‡å¹¶ä¸”åœ¨å­é›†é‡Œ)ï¼Œé€’å½’è°ƒç”¨ dfs(y) å¾—åˆ°ç»è¿‡å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ï¼ŒåŒæ—¶æ›´æ–°ä» x ç»è¿‡ y å‘ä¸‹çš„æœ€é•¿è·¯å¾„ $maxLen = \max_{y\in adj[x]}(dfs(y) + 1)$ ä»¥åŠæœ€å¤§ç›´å¾„ maxLen + dfs(y) + 1.</p>
<p>ç”±äº dfs åªä¼šè®¿é—®åœ¨ in_set ä¸­æ ‡è®°çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥ dfs(v) ç»“æŸåï¼Œvis æ•°ç»„å°±è®°å½•äº†ä»èµ·ç‚¹ v å‡ºå‘ï¼Œåœ¨å½“å‰å­é›†å†…èƒ½å¤Ÿè¿é€šçš„æ‰€æœ‰èŠ‚ç‚¹ã€‚å¦‚æœæ ‡è®°çš„æ•°ç»„å’Œå­é›†æ•°ç»„ç›¸åŒï¼Œé‚£ä¹ˆè¯´æ˜å­é›†è¿é€šã€‚åŒæ—¶å¦‚æœç›´å¾„å¤§äº 0 (è‡³å°‘æœ‰ 2 ä¸ªèŠ‚ç‚¹)ï¼Œç»“æœå¯¹åº”ä½ç½® + 1.</p>
<h2 id="337-house-robber-iii-maximum-independent-set">337. House Robber III (Maximum Independent Set)<a hidden class="anchor" aria-hidden="true" href="#337-house-robber-iii-maximum-independent-set">#</a></h2>
<p><a href="https://leetcode.cn/problems/house-robber-iii/">é¢˜ç›®ç½‘å€</a>. ä¹‹å‰æ•°ç»„ç‰ˆæœ¬çš„æ‰“å®¶åŠ«èˆï¼Œå¦‚æœé€‰ç¬¬ i ä¸ªæ•°ï¼Œåˆ™ä»ç¬¬ i-2 ä¸ªæ•°è½¬ç§»è¿‡æ¥ï¼Œå¦åˆ™å°±ä»ç¬¬ i-1 ä¸ªæ•°è½¬ç§»è¿‡æ¥ã€‚å¦‚æœç…§æ¬è¿™ä¸ªæ€è·¯ï¼Œå¯¹äºä¸€æ£µæ ‘æ¥è¯´å°±æ˜¯å¦‚æœé€‰å½“å‰èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå„¿å­ä¸èƒ½é€‰ï¼Œå„¿å­çš„å„¿å­èƒ½é€‰ï¼Œæœ€å¤šè¦è€ƒè™‘ 4 ä¸ªèŠ‚ç‚¹ï¼Œè€Œä¸”è¦åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºçš„æƒ…å†µã€‚</p>
<p>æ—¢ç„¶æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰é€‰æˆ–ä¸é€‰ä¸¤ç§æƒ…å†µï¼Œé‚£ä¹ˆå°±æŠŠè¿™ä¸¤ç§æƒ…å†µå½“ä½œä¸¤ä¸ªçŠ¶æ€ã€‚å½“é€‰/ä¸é€‰è¿™ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå­æ ‘èƒ½é€‰æ‹©çš„æœ€å¤§å’Œæ˜¯å¤šå°‘ã€‚</p>
<ul>
<li>é€‰è¿™ä¸ªèŠ‚ç‚¹ï¼Œå·¦å³å„¿å­éƒ½ä¸èƒ½é€‰ï¼Œé€‰=å·¦å„¿å­ä¸é€‰+å³å„¿å­ä¸é€‰+å½“å‰èŠ‚ç‚¹å€¼ã€‚</li>
<li>ä¸é€‰è¿™ä¸ªèŠ‚ç‚¹ï¼Œå·¦å³å„¿å­é€‰æˆ–ä¸é€‰éƒ½å¯ä»¥ï¼Œä¸é€‰=max(å·¦å„¿å­é€‰ï¼Œå·¦å„¿å­ä¸é€‰) + max(å³å„¿å­é€‰ï¼Œå³å„¿å­ä¸é€‰)</li>
</ul>
<p>æœ€ç»ˆç­”æ¡ˆå°±æ˜¯ max(æ ¹èŠ‚ç‚¹é€‰ï¼Œæ ¹èŠ‚ç‚¹ä¸é€‰).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">dfs</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">root</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="p">[</span><span class="n">lRob</span><span class="p">,</span> <span class="n">lNoRob</span><span class="p">]</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="p">[</span><span class="n">rRob</span><span class="p">,</span> <span class="n">rNoRob</span><span class="p">]</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">rob</span> <span class="o">=</span> <span class="n">lNoRob</span> <span class="o">+</span> <span class="n">rNoRob</span> <span class="o">+</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">noRob</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">lRob</span><span class="p">,</span> <span class="n">lNoRob</span><span class="p">)</span> <span class="o">+</span> <span class="n">max</span><span class="p">(</span><span class="n">rRob</span><span class="p">,</span> <span class="n">rNoRob</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">{</span><span class="n">rob</span><span class="p">,</span> <span class="n">noRob</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">rob</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="p">[</span><span class="n">rob</span><span class="p">,</span> <span class="n">noRob</span><span class="p">]</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">max</span><span class="p">(</span><span class="n">rob</span><span class="p">,</span> <span class="n">noRob</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="1377-frog-position-after-t-seconds">1377. Frog Position After T Seconds<a hidden class="anchor" aria-hidden="true" href="#1377-frog-position-after-t-seconds">#</a></h2>
<p><a href="https://leetcode.cn/problems/frog-position-after-t-seconds/">é¢˜ç›®ç½‘å€</a>. ä½¿ç”¨ DFS è®¡ç®—é’è›™ä»èµ·ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹çš„æ¦‚ç‡ã€‚æ¯æ¬¡è·³è·ƒæ—¶ï¼Œé’è›™é€‰æ‹©æŸä¸ªé‚»å±…èŠ‚ç‚¹çš„æ¦‚ç‡æ˜¯ 1/å½“å‰èŠ‚ç‚¹æœªè®¿é—®é‚»å±…æ•°ã€‚</p>
<p>è¾¹ç•Œæ¡ä»¶:</p>
<ul>
<li>å½“å‰æ—¶é—´è¶…è¿‡ tï¼Œåˆ™æ¦‚ç‡ä¸º 0.</li>
<li>åˆ°è¾¾ç›®æ ‡èŠ‚ç‚¹ï¼š
<ul>
<li>æ—¶é—´æ­£å¥½æ˜¯ tï¼Œæ¦‚ç‡ä¸ºå½“å‰è·¯å¾„çš„ç´¯ç§¯æ¦‚ç‡ã€‚</li>
<li>æ—¶é—´å°äº tï¼Œä½†ç›®æ ‡èŠ‚ç‚¹æ²¡æœ‰æœªè®¿é—®çš„é‚»å±… (å¶å­èŠ‚ç‚¹)ï¼Œé’è›™ä¼šåœç•™ï¼Œæ¦‚ç‡ä¸ºå½“å‰è·¯å¾„çš„ç´¯ç§¯æ¦‚ç‡ã€‚</li>
<li>æ—¶é—´å°äº tï¼Œä¸”ç›®æ ‡èŠ‚ç‚¹æœ‰æœªè®¿é—®çš„é‚»å±…ï¼Œé’è›™ä¼šç»§ç»­è·³è·ƒï¼Œæ¦‚ç‡ä¸º 0.</li>
</ul>
</li>
</ul>
<p>dfs éœ€è¦ä¼ å…¥å½“å‰èŠ‚ç‚¹çš„çˆ¶äº²èŠ‚ç‚¹å¹¶ä¸”éœ€è¦æœ‰ä¸€ä¸ª visited æ•°ç»„æ¥è®°å½•è®¿é—®è¿‡çš„èŠ‚ç‚¹ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">adj</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">visited</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">parent</span><span class="p">,</span> <span class="kt">int</span> <span class="n">t</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="n">t</span><span class="p">)</span> <span class="k">return</span> <span class="mf">0.0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">unvisitedNeighbor</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="nl">neighbor</span> <span class="p">:</span> <span class="n">adj</span><span class="p">[</span><span class="n">n</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">neighbor</span> <span class="o">!=</span> <span class="n">parent</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">visited</span><span class="p">[</span><span class="n">neighbor</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">unvisitedNeighbor</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">t</span> <span class="o">||</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&amp;&amp;</span> <span class="n">unvisitedNeighbor</span> <span class="o">==</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="mf">1.0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="mf">0.0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">unvisitedNeighbor</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mf">0.0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">double</span> <span class="n">p</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="nl">ch</span> <span class="p">:</span> <span class="n">adj</span><span class="p">[</span><span class="n">n</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">ch</span> <span class="o">!=</span> <span class="n">parent</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">visited</span><span class="p">[</span><span class="n">ch</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">visited</span><span class="p">[</span><span class="n">ch</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">p</span> <span class="o">+=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">ch</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">target</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">visited</span><span class="p">[</span><span class="n">ch</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">p</span> <span class="o">/</span> <span class="n">unvisitedNeighbor</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">frogPosition</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">edges</span><span class="p">,</span> <span class="kt">int</span> <span class="n">t</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">adj</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">visited</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">e</span> <span class="p">:</span> <span class="n">edges</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">adj</span><span class="p">[</span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">adj</span><span class="p">[</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">visited</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">target</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="2646">2646.<a hidden class="anchor" aria-hidden="true" href="#2646">#</a></h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“åœ¨æ‰€æœ‰ trips ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹åˆ°åº•è¢«ç»è¿‡äº†å¤šå°‘æ¬¡ã€‚åœ¨çŸ¥é“äº†æ¯ä¸ªèŠ‚ç‚¹çš„ç»è¿‡æ¬¡æ•°åï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„ price å°±ç›¸å½“äº <code>price[node] * cnt[node]</code>ï¼Œ é—®é¢˜å°±è½¬åŒ–æˆäº†ä¸€ä¸ªç»å…¸çš„æ ‘å½¢ DP é—®é¢˜ã€‚å¯¹äºæ ‘ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§é€‰æ‹©ï¼šä»·æ ¼å‡åŠæˆ–ä¸å‡åŠã€‚æˆ‘ä»¬éœ€è¦æ ¹æ®çº¦æŸæ¡ä»¶ï¼ˆç›¸é‚»èŠ‚ç‚¹ä¸èƒ½åŒæ—¶å‡åŠï¼‰æ¥è®¡ç®—å‡ºä½¿æ€»è´¹ç”¨æœ€å°çš„æ–¹æ¡ˆã€‚dfs è¿”å›å½“å‰èŠ‚ç‚¹å‡åŠæˆ–è€…ä¸å‡åŠæƒ…å†µä¸‹å­æ ‘çš„æœ€å°èŠ±è´¹ã€‚</p>
<ul>
<li>$noHalf[node] = price[node] * cnt[node] + \Sigma_{n \in ch\{node\}}{\min{(half[n], noHalf[n])}}$.</li>
<li>$half[node] = price[node] * cnt[node] / 2 + \Sigma_{n \in ch\{node\}}{noHalf[n]}$.</li>
</ul>
<p>æœ€ç»ˆç­”æ¡ˆä¸º <code>min(half[root], noHalf[root])</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">adj</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">cnt</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="nf">dfsCnt</span> <span class="p">(</span><span class="kt">int</span> <span class="n">node</span><span class="p">,</span> <span class="kt">int</span> <span class="n">parent</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">trip</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="n">trip</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">cnt</span><span class="p">[</span><span class="n">node</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">n</span> <span class="p">:</span> <span class="n">adj</span><span class="p">[</span><span class="n">node</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">!=</span> <span class="n">parent</span> <span class="o">&amp;&amp;</span> <span class="n">dfsCnt</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">trip</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">cnt</span><span class="p">[</span><span class="n">node</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">node</span><span class="p">,</span> <span class="kt">int</span> <span class="n">parent</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">price</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">noHalfPrice</span><span class="o">=</span> <span class="n">price</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">*</span> <span class="n">cnt</span><span class="p">[</span><span class="n">node</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">halfPrice</span> <span class="o">=</span> <span class="n">noHalfPrice</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">n</span> <span class="p">:</span> <span class="n">adj</span><span class="p">[</span><span class="n">node</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">!=</span> <span class="n">parent</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">auto</span> <span class="p">[</span><span class="n">h</span><span class="p">,</span> <span class="n">nh</span><span class="p">]</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">price</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">halfPrice</span> <span class="o">+=</span> <span class="n">nh</span><span class="p">;</span>  <span class="c1">// cur half, ch no half
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">noHalfPrice</span> <span class="o">+=</span> <span class="n">min</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">nh</span><span class="p">);</span>  <span class="c1">// cur no half, ch can half/no half
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">{</span><span class="n">halfPrice</span><span class="p">,</span> <span class="n">noHalfPrice</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">minimumTotalPrice</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">edges</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">price</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">trips</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">adj</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">cnt</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">e</span> <span class="p">:</span> <span class="n">edges</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">adj</span><span class="p">[</span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]].</span><span class="n">push_back</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="n">adj</span><span class="p">[</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]].</span><span class="n">push_back</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">trip</span> <span class="p">:</span> <span class="n">trips</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">dfsCnt</span><span class="p">(</span><span class="n">trip</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">trip</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="p">[</span><span class="n">halfRoot</span><span class="p">,</span> <span class="n">noHalfRoot</span><span class="p">]</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">price</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">min</span><span class="p">(</span><span class="n">halfRoot</span><span class="p">,</span> <span class="n">noHalfRoot</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="968-binary-tree-cameras-minimum-dominating-set">968. Binary Tree Cameras (Minimum Dominating Set)<a hidden class="anchor" aria-hidden="true" href="#968-binary-tree-cameras-minimum-dominating-set">#</a></h2>
<p><a href="https://leetcode.cn/problems/binary-tree-cameras/">é¢˜ç›®ç½‘å€</a>. å¯¹äºè¿™ä¸ªé—®é¢˜å¯ä»¥æ€è€ƒæ ¹èŠ‚ç‚¹æ˜¯å¦éœ€è¦å®‰è£…æ‘„åƒå¤´ï¼Œå…¶ä»–èŠ‚ç‚¹æ ¹æ®é€‰æˆ–ä¸é€‰æ€æƒ³æœ‰ä¸‰ç§æƒ…å†µå¯ä»¥å¯¹å…¶è¿›è¡Œç›‘æ§ã€‚</p>
<ol>
<li><span style="color: royalblue">é€‰æ‹©å®‰è£…æ‘„åƒå¤´ã€‚</span></li>
<li><span style="color: gold;">ä¸é€‰æ‹©å®‰è£…ï¼Œåœ¨å…¶çˆ¶èŠ‚ç‚¹å®‰è£…ã€‚</span></li>
<li><span style="color: tomato;">ä¸é€‰æ‹©å®‰è£…ï¼Œä¸”å®ƒçš„å·¦å³å„¿å­ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå®‰è£…ã€‚</span></li>
</ol>
<p>ä¸‹é¢æˆ‘ä»¬æ¥è€ƒè™‘æ¯ç§æƒ…å†µä¸‹è¿™æ£µå­æ ‘æœ€å°‘è¦å®‰è£…å¤šå°‘æ‘„åƒå¤´ã€‚</p>
<ol>
<li>å®ƒçš„å„¿å­ä»¬æ˜¯å“ªç§é¢œè‰²éƒ½å¯ä»¥ã€‚ <span style="color: royalblue">è“è‰² = min(å·¦è“ï¼Œå·¦é»„ï¼Œå·¦çº¢) + min(å³è“ï¼Œå³é»„ï¼Œå³çº¢) + 1</span></li>
<li>æ ¹æ®é»„è‰²èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹å¿…é¡»å®‰è£…çš„å®šä¹‰ï¼Œå®ƒçš„å„¿å­ä»¬ä¸å¯èƒ½æ˜¯é»„è‰²ã€‚<span style="color: gold;">é»„è‰² = min(å·¦è“ï¼Œå·¦çº¢) + min(å³è“ï¼Œå³çº¢)</span></li>
<li>çº¢è‰²èŠ‚ç‚¹çš„å„¿å­ä¸å¯èƒ½æ˜¯é»„è‰²ï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªå„¿å­æ˜¯è“è‰²ã€‚<span style="color: tomato;">çº¢è‰² = min(å·¦è“ + å³çº¢ï¼Œå³è“ + å·¦çº¢ï¼Œå·¦è“ + å³è“)</span> (å¼å­è¿˜å¯ä»¥ç®€åŒ–ï¼Œç¨åè®¨è®º).</li>
</ol>
<p>ç”±äºäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œä¸å¯èƒ½æ˜¯é»„è‰²ï¼Œæ‰€æœ‰ç­”æ¡ˆä¸º min(æ ¹è“, æ ¹çº¢).</p>
<p>é€’å½’è¾¹ç•Œ:</p>
<ol>
<li>ç©ºèŠ‚ç‚¹ä¸èƒ½å®‰è£…æ‘„åƒå¤´ï¼Œè“è‰²ä¸ºâˆï¼Œè¡¨ç¤ºä¸åˆæ³•ã€‚</li>
<li>ç©ºèŠ‚ç‚¹ä¸éœ€è¦è¢«ç›‘æ§ï¼Œçº¢è‰²å’Œé»„è‰²éƒ½æ˜¯ 0.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span> <span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">dfs</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">node</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">node</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="p">{</span><span class="n">INT_MAX</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">auto</span> <span class="p">[</span><span class="n">lChoose</span><span class="p">,</span> <span class="n">lbyFa</span><span class="p">,</span> <span class="n">lbyCh</span><span class="p">]</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">auto</span> <span class="p">[</span><span class="n">rChoose</span><span class="p">,</span> <span class="n">rbyFa</span><span class="p">,</span> <span class="n">rbyCh</span><span class="p">]</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">choose</span> <span class="o">=</span> <span class="n">min</span><span class="p">({</span><span class="n">lChoose</span><span class="p">,</span> <span class="n">lbyFa</span><span class="p">,</span> <span class="n">lbyCh</span><span class="p">})</span> <span class="o">+</span> <span class="n">min</span><span class="p">({</span><span class="n">rChoose</span><span class="p">,</span> <span class="n">rbyFa</span><span class="p">,</span> <span class="n">rbyCh</span><span class="p">})</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">byFa</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">lChoose</span><span class="p">,</span> <span class="n">lbyCh</span><span class="p">)</span> <span class="o">+</span> <span class="n">min</span><span class="p">(</span><span class="n">rChoose</span><span class="p">,</span> <span class="n">rbyCh</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">byCh</span> <span class="o">=</span> <span class="n">min</span><span class="p">({</span><span class="n">lChoose</span> <span class="o">+</span> <span class="n">rbyCh</span><span class="p">,</span> <span class="n">lbyCh</span> <span class="o">+</span> <span class="n">rChoose</span><span class="p">,</span> <span class="n">lChoose</span> <span class="o">+</span> <span class="n">rChoose</span><span class="p">});</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span><span class="n">choose</span><span class="p">,</span> <span class="n">byFa</span><span class="p">,</span> <span class="n">byCh</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">minCameraCover</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="p">[</span><span class="n">choose</span><span class="p">,</span> <span class="n">byFa</span><span class="p">,</span> <span class="n">byCh</span><span class="p">]</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">min</span><span class="p">(</span><span class="n">choose</span><span class="p">,</span> <span class="n">byCh</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>å˜å½¢ 1: æ¯ä¸ªèŠ‚ç‚¹å®‰è£…æ‘„åƒå¤´çš„èŠ±è´¹ä¸º cost[i]ï¼Œæ±‚å®‰è£…æ‘„åƒå¤´æœ€å°èŠ±è´¹ã€‚</p>
<p>è§£ç­”: åŸé¢˜ç›®ç›¸å½“äºæ¯ä¸ªæ‘„åƒå¤´çš„æˆæœ¬ä¸º 1ï¼Œåªéœ€è¦æŠŠè“è‰²ä¸­çš„ 1 æ”¹æˆ cost[i].</p>
<p>å˜å½¢ 2: å¦‚æœæ˜¯ä¸€èˆ¬æ ‘çš„æƒ…å†µ (ä¸æ­¢ä¸¤ä¸ªå„¿å­).</p>
<p>è§£ç­”: å¦‚æœæœ‰ 3 ä¸ªå„¿å­ï¼Œé‚£ä¹ˆæ ¹æ®ä¹‹å‰çš„å…¬å¼çº¢è‰²æƒ…å†µä¸€å…±æœ‰ 7 ç§å¯èƒ½æ€§ (æ¯ä¸ªå„¿å­æˆ–çº¢æˆ–è“ï¼Œå‡å»å…¨ä¸ºçº¢çš„ä¸€ç§). å¦‚æœæœ‰ n ä¸ªå„¿å­ï¼Œå°±æœ‰ $2^n-1$ ç§æƒ…å†µ. æ‰€ä»¥å¿…é¡»è¿›è¡ŒåŒ–ç®€ã€‚
æƒ…å†µå¤æ‚çš„åŸå› æ˜¯å­˜åœ¨æœ‰ä¸€ä¸ªå„¿å­å¿…é¡»æ˜¯è“è‰²è¿™ä¸ªçº¦æŸï¼Œå¦‚æœå»æ‰å°±åªç”¨å¯¹æ¯ä¸ªå„¿å­åˆ†åˆ«æ¯”è¾ƒå…¶çº¢è‰²è¿˜æ˜¯è“è‰²æ›´å°ã€‚å»æ‰çº¦æŸä¸‹åªæœ‰æ¯ä¸ªå„¿å­çš„çº¢è‰²éƒ½æ¯”è“è‰²æ›´å°æ—¶ç®—å‡ºçš„ç­”æ¡ˆæ‰å’ŒåŸæ¥ä¸ä¸€æ ·ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦è®© (è“è‰²-çº¢è‰²) çš„æœ€å°çš„é‚£ä¸ªå„¿å­å–è“è‰²å°±è¡Œäº†ã€‚ç”±äºæœ‰å¯èƒ½æ‰€æœ‰å„¿å­çš„è“è‰²éƒ½æ¯”çº¢è‰²å°ï¼Œå–å‡ºæ¥çš„ç­”æ¡ˆéœ€è¦å’Œ 0 ä½œä¸€ä¸ª max.</p>
<p>è¿™ä¸ªæ—¶å€™å°±å¯ä»¥å‘ç°</p>
<ul>
<li><span style="color: gold;">é»„è‰² = min(è“1ï¼Œçº¢1) + min(è“2ï¼Œçº¢2) + min(è“3ï¼Œçº¢3)</span></li>
<li><span style="color: tomato;">çº¢è‰² = é»„è‰² + max(0, (è“1 - çº¢1, è“2 - çº¢2, è“3 - çº¢3))</span></li>
<li>ä»ä¸Šé¢å¼å­å¯ä»¥çœ‹å‡ºçº¢è‰²æƒ…å†µä¸€å®šæ¯”é»„è‰²æƒ…å†µå¤§ï¼Œå› æ­¤è“è‰²å¯ä»¥ç®€åŒ–ä¸º <span style="color: royalblue">è“è‰² = min(è“1ï¼Œé»„1) + min(è“2ï¼Œé»„2) + min(è“3ï¼Œé»„3) + cost[i]</span></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/dynamicprogramming/">DynamicProgramming</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/blogs/tx8_inferenceengine/">
    <span class="title">Â« Prev</span>
    <br>
    <span>TX8 Inference Engine</span>
  </a>
  <a class="next" href="http://localhost:1313/blogs/leetcode/06_backtracking/">
    <span class="title">Next Â»</span>
    <br>
    <span>06 Backtracking</span>
  </a>
</nav>

  </footer><script src="https://giscus.app/client.js"
        data-repo="jamesnulliu/jamesnulliu.github.io"
        data-repo-id="R_kgDOMPCQIw"
        data-category="Announcements"
        data-category-id="DIC_kwDOMPCQI84Cgb2t"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
</article>
    </main>
    
<footer class="footer">
        <span>Â© 2024-2025 WITHER</span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
