<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=57770&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>A Simple Cmake Example | WITHER</title>
<meta name="keywords" content="cmake">
<meta name="description" content="A Simple Cmake Example">
<meta name="author" content="WITHER">
<link rel="canonical" href="http://localhost:57770/blogs/simple_cmake/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5989807471fe399ba380d3b1501334cf52bf92768fffdd44127d22f5eeae9f42.css" integrity="sha256-WYmAdHH&#43;OZujgNOxUBM0z1K/knaP/91EEn0i9e6un0I=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:57770/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:57770/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:57770/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:57770/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:57770/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:57770/blogs/simple_cmake/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath: [['\\(', '\\)'], ['$', '$']]  
    }
  };
</script>


<meta property="og:url" content="http://localhost:57770/blogs/simple_cmake/">
  <meta property="og:site_name" content="WITHER">
  <meta property="og:title" content="A Simple Cmake Example">
  <meta property="og:description" content="A Simple Cmake Example">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blogs">
    <meta property="article:published_time" content="2025-06-06T18:32:00+08:00">
    <meta property="article:modified_time" content="2025-06-07T23:40:58+08:00">
    <meta property="article:tag" content="Cmake Learning">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A Simple Cmake Example">
<meta name="twitter:description" content="A Simple Cmake Example">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Blogs",
      "item": "http://localhost:57770/blogs/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "A Simple Cmake Example",
      "item": "http://localhost:57770/blogs/simple_cmake/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "A Simple Cmake Example",
  "name": "A Simple Cmake Example",
  "description": "A Simple Cmake Example",
  "keywords": [
    "cmake"
  ],
  "articleBody": "CMake å…¥é—¨æ•™ç¨‹ï¼šä»é¡¹ç›®ç»“æ„åˆ°é“¾æ¥åº“\næ ¸å¿ƒç†å¿µï¼šæºç å¤–æ„å»º (Out-of-Source Builds) åœ¨å¼€å§‹ä¹‹å‰ï¼Œæœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ç†è§£ CMake çš„æ ¸å¿ƒå“²å­¦ï¼šæºç å¤–æ„å»ºã€‚è¿™æ„å‘³ç€æ‰€æœ‰ç”±æ„å»ºè¿‡ç¨‹äº§ç”Ÿçš„æ–‡ä»¶ï¼ˆä¾‹å¦‚ Makefilesã€Visual Studio é¡¹ç›®æ–‡ä»¶ã€ç›®æ ‡æ–‡ä»¶ .oã€å¯æ‰§è¡Œæ–‡ä»¶ .exeã€åº“æ–‡ä»¶ .a æˆ– .soï¼‰éƒ½åº”è¯¥ä¸ä½ çš„æºä»£ç å®Œå…¨åˆ†ç¦»å¼€ã€‚è¿™æ ·åšæœ€å¤§çš„å¥½å¤„æ˜¯èƒ½ä¿æŒä½ çš„æºç ç›®å½•æ°¸è¿œå¹²å‡€æ•´æ´ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª build ç›®å½•æ¥å­˜æ”¾æ‰€æœ‰è¿™äº›ç”Ÿæˆçš„æ–‡ä»¶ã€‚\næ¨èçš„é¡¹ç›®ç›®å½•ç»“æ„ ğŸ“‚ ä¸€ä¸ªè‰¯å¥½ç»„ç»‡çš„ C++ é¡¹ç›®ç»“æ„ä¸ä»…æ¸…æ™°ï¼Œä¹Ÿè®© CMake çš„é…ç½®å·¥ä½œäº‹åŠåŠŸå€ã€‚è¿™æ˜¯ä¸€ä¸ªæ¨èçš„ã€å¯æ‰©å±•çš„ç›®å½•ç»“æ„ï¼šmy_project/\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 â”‚ â”œâ”€â”€ build/ # æ„å»ºç›®å½• (åˆå§‹ä¸ºç©ºï¼Œæ‰€æœ‰ç”Ÿæˆæ–‡ä»¶éƒ½åœ¨æ­¤) â”‚ â”œâ”€â”€ include/ # å­˜æ”¾é¡¹ç›®å…¨å±€å¤´æ–‡ä»¶ â”‚ â””â”€â”€ my_app/ â”‚ â””â”€â”€ my_lib.h â”‚ â”œâ”€â”€ src/ # å­˜æ”¾æ‰€æœ‰æºæ–‡ä»¶ (.cpp) â”‚ â”‚ â”‚ â”œâ”€â”€ main.cpp # ä¸»ç¨‹åºå…¥å£ â”‚ â”‚ â”‚ â””â”€â”€ my_lib/ # ä¸€ä¸ªç‹¬ç«‹çš„åº“æ¨¡å— â”‚ â”œâ”€â”€ CMakeLists.txt # è¿™ä¸ªåº“è‡ªå·±çš„ CMake é…ç½®æ–‡ä»¶ â”‚ â””â”€â”€ my_lib.cpp â”‚ â””â”€â”€ CMakeLists.txt # æ•´ä¸ªé¡¹ç›®çš„é¡¶å±‚ CMake é…ç½®æ–‡ä»¶ build/: è¿™ä¸ªç›®å½•ç”¨äºæ‰§è¡Œæ‰€æœ‰æ„å»ºå‘½ä»¤ï¼Œæºç ä¸ä¼šè¢«æ±¡æŸ“ã€‚include/: å­˜æ”¾å¯ä»¥è¢«é¡¹ç›®å†…å…¶ä»–éƒ¨åˆ†ï¼ˆæˆ–è¢«å…¶ä»–é¡¹ç›®ï¼‰å¼•ç”¨çš„å¤´æ–‡ä»¶ã€‚æŒ‰æ¨¡å—ç»„ç»‡å¯ä»¥é¿å…å¤´æ–‡ä»¶åå†²çªã€‚src/: å­˜æ”¾æ‰€æœ‰ .cpp æºæ–‡ä»¶ã€‚ src/my_lib/: å°†é¡¹ç›®æŒ‰åŠŸèƒ½æ¨¡å—åŒ–æ˜¯ä¸€ç§å¥½ä¹ æƒ¯ã€‚æ¯ä¸ªæ¨¡å—ï¼ˆæ¯”å¦‚ä¸€ä¸ªåº“ï¼‰å¯ä»¥æœ‰è‡ªå·±çš„ CMakeLists.txt æ–‡ä»¶ï¼Œè´Ÿè´£ç®¡ç†è‡ªèº«çš„ç¼–è¯‘ã€‚ CMakeLists.txt (é¡¶å±‚): è¿™æ˜¯æ•´ä¸ªé¡¹ç›®çš„å…¥å£ï¼Œè´Ÿè´£è®¾ç½®å…¨å±€é…ç½®ã€æ‰¾åˆ°å¹¶æ„å»ºæ‰€æœ‰å­æ¨¡å—ï¼Œæœ€åç”Ÿæˆä¸»ç¨‹åºã€‚ ç¼–å†™å„å±‚çº§çš„ CMakeLists.txt ğŸ“æˆ‘ä»¬å°†é‡‡ç”¨â€œè‡ªä¸‹è€Œä¸Šâ€çš„æ–¹å¼æ¥ç¼–å†™é…ç½®æ–‡ä»¶ï¼Œå…ˆä»åº•å±‚çš„åº“å¼€å§‹ï¼Œå†åˆ°é¡¶å±‚çš„é¡¹ç›®ã€‚ ç¬¬ 1 æ­¥: åº“çš„ CMakeLists.txt (src/my_lib/CMakeLists.txt )è¿™ä¸ªæ–‡ä»¶åªè´Ÿè´£ä¸€ä»¶äº‹ï¼šå°† my_lib.cpp å’Œç›¸å…³çš„å¤´æ–‡ä»¶ç¼–è¯‘æˆä¸€ä¸ªåº“ã€‚# æ–‡ä»¶ä½ç½®: src/my_lib/CMakeLists.txt\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 # ä½¿ç”¨ add_library å‘½ä»¤åˆ›å»ºä¸€ä¸ªåº“ã€‚ # è¯­æ³•: add_library(\u003cåº“åç§°\u003e [STATIC | SHARED] \u003cæºæ–‡ä»¶...\u003e) # # \u003cåº“åç§°\u003e: æˆ‘ä»¬ç§°ä¹‹ä¸º my_libï¼Œè¿™æ˜¯å…¶ä»–éƒ¨åˆ†é“¾æ¥æ­¤åº“æ—¶ä½¿ç”¨çš„åå­—ã€‚ # STATIC: ç”Ÿæˆé™æ€é“¾æ¥åº“ (.a, .lib)ã€‚ # SHARED: ç”ŸæˆåŠ¨æ€/å…±äº«é“¾æ¥åº“ (.so, .dll)ã€‚ # å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤æ˜¯ STATICã€‚ # \u003cæºæ–‡ä»¶\u003e: ç”¨äºç¼–è¯‘è¿™ä¸ªåº“çš„æºæ–‡ä»¶åˆ—è¡¨ã€‚ add_library(my_lib STATIC my_lib.cpp) # ä¸ºè¿™ä¸ªåº“ç›®æ ‡æŒ‡å®šå®ƒéœ€è¦åŒ…å«çš„å¤´æ–‡ä»¶ç›®å½•ã€‚ # è¯­æ³•: target_include_directories(\u003cç›®æ ‡\u003e \u003cè·¯å¾„...\u003e) # # \u003cç›®æ ‡\u003e: å°±æ˜¯æˆ‘ä»¬ä¸Šé¢ç”¨ add_library åˆ›å»ºçš„ my_libã€‚ # PUBLIC: è¡¨ç¤ºæ­¤å¤´æ–‡ä»¶è·¯å¾„ä¸ä»… my_lib è‡ªå·±éœ€è¦ï¼Œä»»ä½•é“¾æ¥äº† my_lib çš„ç›®æ ‡ä¹Ÿéœ€è¦ã€‚ # è¿™æ˜¯æœ€å…³é”®çš„è®¾ç½®ï¼Œå®ƒå®ç°äº†ä¾èµ–çš„è‡ªåŠ¨ä¼ é€’ã€‚ # PRIVATE: è¡¨ç¤ºæ­¤å¤´æ–‡ä»¶è·¯å¾„åªæœ‰ my_lib å†…éƒ¨ç¼–è¯‘æ—¶éœ€è¦ï¼Œä¸ä¼šä¼ é€’ç»™é“¾æ¥å®ƒçš„ç›®æ ‡ã€‚ # INTERFACE:è¡¨ç¤ºæ­¤å¤´æ–‡ä»¶è·¯å¾„åªæœ‰é“¾æ¥å®ƒçš„ç›®æ ‡éœ€è¦ï¼Œmy_lib è‡ªå·±ç¼–è¯‘æ—¶ä¸éœ€è¦ã€‚ target_include_directories(my_lib PUBLIC # ${PROJECT_SOURCE_DIR} æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å†…ç½®å˜é‡ï¼ŒæŒ‡å‘é¡¶å±‚ CMakeLists.txt æ‰€åœ¨çš„ç›®å½•ã€‚ # æˆ‘ä»¬å°†é¡¹ç›®çš„å…¨å±€ include ç›®å½•æš´éœ²å‡ºå»ã€‚ ${PROJECT_SOURCE_DIR}/include ) add_library() å®šä¹‰äº†ä¸€ä¸ªç¼–è¯‘ç›®æ ‡â€”â€”ä¸€ä¸ªåº“ã€‚ target_include_directories() ä¸ºè¿™ä¸ªç›®æ ‡æŒ‡å®šäº†å¤´æ–‡ä»¶æœç´¢è·¯å¾„ã€‚ä½¿ç”¨ PUBLIC å…³é”®å­—è‡³å…³é‡è¦ä½¿å¾—ä»»ä½•é“¾æ¥åˆ° my_lib çš„ç¨‹åºéƒ½èƒ½è‡ªåŠ¨æ‰¾åˆ° my_lib.hï¼Œæ— éœ€åœ¨é“¾æ¥æ–¹å†æ¬¡æ‰‹åŠ¨æ·»åŠ å¤´æ–‡ä»¶è·¯å¾„ã€‚ ç¬¬ 2 æ­¥: é¡¶å±‚çš„ CMakeLists.txt è¿™ä¸ªæ–‡ä»¶æ˜¯æ•´ä¸ªé¡¹ç›®çš„æ€»æŒ‡æŒ¥ï¼Œè´Ÿè´£è®¾ç½®å…¨å±€é…ç½®ã€è°ƒç”¨å­æ¨¡å—ï¼Œå¹¶ç”Ÿæˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 # æ–‡ä»¶ä½ç½®: my_project/CMakeLists.txt # 1. æŒ‡å®š CMake çš„æœ€ä½ç‰ˆæœ¬è¦æ±‚ã€‚è¿™æ˜¯æ¯ä¸ªé¡¶å±‚æ–‡ä»¶éƒ½åº”è¯¥æœ‰çš„ç¬¬ä¸€è¡Œã€‚ cmake_minimum_required(VERSION 3.10) # 2. å®šä¹‰é¡¹ç›®ä¿¡æ¯ã€‚ # è¯­æ³•: project(\u003cé¡¹ç›®åç§°\u003e VERSION \u003cç‰ˆæœ¬å·\u003e LANGUAGES \u003cè¯­è¨€\u003e) # è¿™ä¼šåˆ›å»ºä¸€äº›æœ‰ç”¨çš„å˜é‡ï¼Œæ¯”å¦‚ PROJECT_NAME, PROJECT_SOURCE_DIRã€‚ project(MyApp VERSION 1.0 LANGUAGES CXX) # 3. è®¾ç½® C++ æ ‡å‡† (è¿™æ˜¯ç°ä»£ CMake æ¨èçš„æ–¹å¼)ã€‚ set(CMAKE_CXX_STANDARD 17) set(CMAKE_CXX_STANDARD_REQUIRED ON) set(CMAKE_CXX_EXTENSIONS OFF) # 4. æ‰“å°ä¸€æ¡æ¶ˆæ¯ï¼Œæ–¹ä¾¿è°ƒè¯•æ—¶æŸ¥çœ‹å˜é‡å€¼ (å¯é€‰)ã€‚ message(STATUS \"Project source directory is: ${PROJECT_SOURCE_DIR}\") # 5. æ·»åŠ å­ç›®å½•ã€‚ # è¿™ä¸ªå‘½ä»¤ä¼šå‘Šè¯‰ CMake å»å¤„ç† src/my_lib ç›®å½•ä¸‹çš„ CMakeLists.txt æ–‡ä»¶ã€‚ # å½“æ‰§è¡Œåˆ°è¿™é‡Œæ—¶ï¼Œä¸Šé¢å®šä¹‰çš„ my_lib åº“ç›®æ ‡å°±ä¼šè¢«åˆ›å»ºå‡ºæ¥ã€‚ add_subdirectory(src/my_lib) # 6. æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶ã€‚ # è¯­æ³•: add_executable(\u003cå¯æ‰§è¡Œæ–‡ä»¶å\u003e \u003cæºæ–‡ä»¶...\u003e) # æˆ‘ä»¬å°†ä¸»ç¨‹åºå‘½åä¸º appï¼Œå®ƒç”± src/main.cpp ç¼–è¯‘è€Œæ¥ã€‚ add_executable(app src/main.cpp) # 7. é“¾æ¥åº“ï¼è¿™æ˜¯å°†æ‰€æœ‰éƒ¨åˆ†ç»„åˆåœ¨ä¸€èµ·çš„å…³é”®æ­¥éª¤ã€‚ # è¯­æ³•: target_link_libraries(\u003cç›®æ ‡\u003e \u003cè¦é“¾æ¥çš„åº“...\u003e) # # \u003cç›®æ ‡\u003e: æˆ‘ä»¬è¦é“¾æ¥çš„ç›®æ ‡ï¼Œå³ appã€‚ # PRIVATE: è¡¨ç¤º app çš„ç¼–è¯‘éœ€è¦ my_libï¼Œä½†è¿™ä¸ªä¾èµ–å…³ç³»ä¸ä¼šç»§ç»­ä¼ é€’ã€‚ # å¯¹äºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œé€šå¸¸ä½¿ç”¨ PRIVATEã€‚ # \u003cè¦é“¾æ¥çš„åº“\u003e: æˆ‘ä»¬åœ¨å­ç›®å½•ä¸­å®šä¹‰çš„åº“ç›®æ ‡ my_libã€‚ target_link_libraries(app PRIVATE my_lib) add_subdirectory() ä½¿å¾—é¡¶å±‚æ–‡ä»¶ä¿æŒç®€æ´ï¼Œåªè´Ÿè´£â€œæŒ‡æŒ¥â€ï¼Œå…·ä½“å®ç°åˆ™äº¤ç»™å„ä¸ªå­æ¨¡å—ã€‚ target_link_libraries() è´Ÿè´£å°†ä¸åŒçš„ç¼–è¯‘ç›®æ ‡ï¼ˆåº“å’Œå¯æ‰§è¡Œæ–‡ä»¶ï¼‰é“¾æ¥åœ¨ä¸€èµ·ï¼Œå½¢æˆä¾èµ–å…³ç³»ã€‚ å¦‚ä½•æ„å»ºé¡¹ç›® ğŸš€ ç°åœ¨å·²ç»å†™å¥½äº†æ‰€æœ‰çš„ CMakeLists.txt æ–‡ä»¶ï¼Œå¯ä»¥å¼€å§‹æ„å»ºäº†ã€‚æ•´ä¸ªè¿‡ç¨‹éƒ½åœ¨ç»ˆç«¯ä¸­å®Œæˆã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 # 1. ç¡®ä¿ä½ ä½äºé¡¹ç›®çš„æ ¹ç›®å½• (my_project) cd path/to/my_project # 2. åˆ›å»ºå¹¶è¿›å…¥æˆ‘ä»¬è§„åˆ’å¥½çš„ build ç›®å½• mkdir build cd build # 3. è¿è¡Œ CMake æ¥ç”Ÿæˆæ„å»ºç³»ç»Ÿã€‚ # '..' æŒ‡å‘ä¸Šä¸€çº§ç›®å½•ï¼Œä¹Ÿå°±æ˜¯ my_project/ æ ¹ç›®å½•ï¼ŒCMake ä¼šåœ¨é‚£é‡Œå¯»æ‰¾é¡¶å±‚çš„ CMakeLists.txtã€‚ # -DCMAKE_BUILD_TYPE=Debug æŒ‡å®šäº†æ„å»ºç±»å‹ä¸º Debugï¼Œä¼šåŒ…å«è°ƒè¯•ä¿¡æ¯ã€‚ cmake -DCMAKE_BUILD_TYPE=Debug .. # CMake ä¼šæ‰«æä½ çš„ç³»ç»Ÿï¼Œæ‰¾åˆ° C++ ç¼–è¯‘å™¨ï¼Œç„¶åæ ¹æ® CMakeLists.txt çš„å†…å®¹ # ç”Ÿæˆç‰¹å®šå¹³å°çš„æ„å»ºæ–‡ä»¶ï¼ˆåœ¨ Linux/macOS ä¸Šæ˜¯ Makefileï¼Œåœ¨ Windows ä¸Šæ˜¯ Visual Studio sln æ–‡ä»¶ï¼‰ã€‚ # 4. ç¼–è¯‘é¡¹ç›® # è¿™ä¸ªå‘½ä»¤ä¼šè°ƒç”¨åº•å±‚çš„æ„å»ºå·¥å…·ï¼ˆå¦‚ make æˆ– msbuildï¼‰æ¥æ‰§è¡ŒçœŸæ­£çš„ç¼–è¯‘å’Œé“¾æ¥å·¥ä½œã€‚ # '--build .' æ˜¯ä¸€ä¸ªå¹³å°æ— å…³çš„å‘½ä»¤ï¼Œå‘Šè¯‰ CMake åœ¨å½“å‰ç›®å½•æ‰§è¡Œæ„å»ºã€‚ cmake --build . # æˆ–è€…åœ¨ Linux/macOS ä¸Šï¼Œä½ å¯ä»¥ç›´æ¥è¿è¡Œ: # make # ç¼–è¯‘å®Œæˆåï¼Œä½ ä¼šåœ¨ build ç›®å½•ï¼ˆæˆ–å…¶å­ç›®å½•ï¼‰ä¸‹æ‰¾åˆ°ä½ çš„å¯æ‰§è¡Œæ–‡ä»¶ `app` å’Œåº“æ–‡ä»¶ `libmy_lib.a`ã€‚ ",
  "wordCount" : "2325",
  "inLanguage": "en",
  "datePublished": "2025-06-06T18:32:00+08:00",
  "dateModified": "2025-06-07T23:40:58+08:00",
  "author":[{
    "@type": "Person",
    "name": "WITHER"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:57770/blogs/simple_cmake/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "WITHER",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:57770/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:57770/" accesskey="h" title="WITHER (Alt + H)">WITHER</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="http://localhost:57770/zh/" title="ç®€ä½“ä¸­æ–‡"
                            aria-label="ç®€ä½“ä¸­æ–‡">ç®€ä½“ä¸­æ–‡</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:57770/" title="ğŸ  Home">
                    <span>ğŸ  Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:57770/about_me/" title="ğŸ™‹ğŸ»â€â™‚ï¸ Me">
                    <span>ğŸ™‹ğŸ»â€â™‚ï¸ Me</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:57770/blogs/" title="ğŸ“š Blogs">
                    <span>ğŸ“š Blogs</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:57770/categories/" title="ğŸ§© Categories">
                    <span>ğŸ§© Categories</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:57770/tags/" title="ğŸ”– Tags">
                    <span>ğŸ”– Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:57770/archives/" title="â± Archive">
                    <span>â± Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:57770/search/" title="ğŸ” Search (Alt &#43; /)" accesskey=/>
                    <span>ğŸ” Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:57770/friends/" title="ğŸ¤ Friends">
                    <span>ğŸ¤ Friends</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:57770/">Home</a>&nbsp;Â»&nbsp;<a href="http://localhost:57770/blogs/">Blogs</a></div>
    <h1 class="post-title entry-hint-parent">
      A Simple Cmake Example
    </h1>
    <div class="post-description">
      A Simple Cmake Example
    </div>
    <div class="post-meta"><span title='2025-06-06 18:32:00 +0800 CST'>Jun-06-2025</span>&nbsp;Â·&nbsp;5 min&nbsp;Â·&nbsp;2325 words&nbsp;Â·&nbsp;WITHER

</div>
  </header> 
  <div class="post-content"><p>CMake å…¥é—¨æ•™ç¨‹ï¼šä»é¡¹ç›®ç»“æ„åˆ°é“¾æ¥åº“</p>
<ol>
<li>æ ¸å¿ƒç†å¿µï¼šæºç å¤–æ„å»º (Out-of-Source Builds)</li>
</ol>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ç†è§£ CMake çš„æ ¸å¿ƒå“²å­¦ï¼šæºç å¤–æ„å»ºã€‚è¿™æ„å‘³ç€æ‰€æœ‰ç”±æ„å»ºè¿‡ç¨‹äº§ç”Ÿçš„æ–‡ä»¶ï¼ˆä¾‹å¦‚ Makefilesã€Visual Studio é¡¹ç›®æ–‡ä»¶ã€ç›®æ ‡æ–‡ä»¶ .oã€å¯æ‰§è¡Œæ–‡ä»¶ .exeã€åº“æ–‡ä»¶ .a æˆ– .soï¼‰éƒ½åº”è¯¥ä¸ä½ çš„æºä»£ç å®Œå…¨åˆ†ç¦»å¼€ã€‚è¿™æ ·åšæœ€å¤§çš„å¥½å¤„æ˜¯èƒ½ä¿æŒä½ çš„æºç ç›®å½•æ°¸è¿œå¹²å‡€æ•´æ´ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª build ç›®å½•æ¥å­˜æ”¾æ‰€æœ‰è¿™äº›ç”Ÿæˆçš„æ–‡ä»¶ã€‚</p>
<ol start="2">
<li>æ¨èçš„é¡¹ç›®ç›®å½•ç»“æ„ ğŸ“‚</li>
</ol>
<p>ä¸€ä¸ªè‰¯å¥½ç»„ç»‡çš„ C++ é¡¹ç›®ç»“æ„ä¸ä»…æ¸…æ™°ï¼Œä¹Ÿè®© CMake çš„é…ç½®å·¥ä½œäº‹åŠåŠŸå€ã€‚è¿™æ˜¯ä¸€ä¸ªæ¨èçš„ã€å¯æ‰©å±•çš„ç›®å½•ç»“æ„ï¼šmy_project/</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plaintext" data-lang="plaintext"><span class="line"><span class="cl">â”‚
</span></span><span class="line"><span class="cl">â”œâ”€â”€ build/                  # æ„å»ºç›®å½• (åˆå§‹ä¸ºç©ºï¼Œæ‰€æœ‰ç”Ÿæˆæ–‡ä»¶éƒ½åœ¨æ­¤)
</span></span><span class="line"><span class="cl">â”‚
</span></span><span class="line"><span class="cl">â”œâ”€â”€ include/                # å­˜æ”¾é¡¹ç›®å…¨å±€å¤´æ–‡ä»¶
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ my_app/
</span></span><span class="line"><span class="cl">â”‚       â””â”€â”€ my_lib.h
</span></span><span class="line"><span class="cl">â”‚
</span></span><span class="line"><span class="cl">â”œâ”€â”€ src/                    # å­˜æ”¾æ‰€æœ‰æºæ–‡ä»¶ (.cpp)
</span></span><span class="line"><span class="cl">â”‚   â”‚
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ main.cpp            # ä¸»ç¨‹åºå…¥å£
</span></span><span class="line"><span class="cl">â”‚   â”‚
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ my_lib/             # ä¸€ä¸ªç‹¬ç«‹çš„åº“æ¨¡å—
</span></span><span class="line"><span class="cl">â”‚       â”œâ”€â”€ CMakeLists.txt  # è¿™ä¸ªåº“è‡ªå·±çš„ CMake é…ç½®æ–‡ä»¶
</span></span><span class="line"><span class="cl">â”‚       â””â”€â”€ my_lib.cpp
</span></span><span class="line"><span class="cl">â”‚
</span></span><span class="line"><span class="cl">â””â”€â”€ CMakeLists.txt          # æ•´ä¸ªé¡¹ç›®çš„é¡¶å±‚ CMake é…ç½®æ–‡ä»¶
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>build/: è¿™ä¸ªç›®å½•ç”¨äºæ‰§è¡Œæ‰€æœ‰æ„å»ºå‘½ä»¤ï¼Œæºç ä¸ä¼šè¢«æ±¡æŸ“ã€‚include/: å­˜æ”¾å¯ä»¥è¢«é¡¹ç›®å†…å…¶ä»–éƒ¨åˆ†ï¼ˆæˆ–è¢«å…¶ä»–é¡¹ç›®ï¼‰å¼•ç”¨çš„å¤´æ–‡ä»¶ã€‚æŒ‰æ¨¡å—ç»„ç»‡å¯ä»¥é¿å…å¤´æ–‡ä»¶åå†²çªã€‚src/: å­˜æ”¾æ‰€æœ‰ .cpp æºæ–‡ä»¶ã€‚</li>
<li>src/my_lib/: å°†é¡¹ç›®æŒ‰åŠŸèƒ½æ¨¡å—åŒ–æ˜¯ä¸€ç§å¥½ä¹ æƒ¯ã€‚æ¯ä¸ªæ¨¡å—ï¼ˆæ¯”å¦‚ä¸€ä¸ªåº“ï¼‰å¯ä»¥æœ‰è‡ªå·±çš„ CMakeLists.txt æ–‡ä»¶ï¼Œè´Ÿè´£ç®¡ç†è‡ªèº«çš„ç¼–è¯‘ã€‚</li>
<li>CMakeLists.txt (é¡¶å±‚): è¿™æ˜¯æ•´ä¸ªé¡¹ç›®çš„å…¥å£ï¼Œè´Ÿè´£è®¾ç½®å…¨å±€é…ç½®ã€æ‰¾åˆ°å¹¶æ„å»ºæ‰€æœ‰å­æ¨¡å—ï¼Œæœ€åç”Ÿæˆä¸»ç¨‹åºã€‚</li>
</ul>
<ol start="3">
<li>ç¼–å†™å„å±‚çº§çš„ CMakeLists.txt ğŸ“æˆ‘ä»¬å°†é‡‡ç”¨â€œè‡ªä¸‹è€Œä¸Šâ€çš„æ–¹å¼æ¥ç¼–å†™é…ç½®æ–‡ä»¶ï¼Œå…ˆä»åº•å±‚çš„åº“å¼€å§‹ï¼Œå†åˆ°é¡¶å±‚çš„é¡¹ç›®ã€‚
ç¬¬ 1 æ­¥: åº“çš„ CMakeLists.txt (src/my_lib/CMakeLists.txt</li>
</ol>
<p>)è¿™ä¸ªæ–‡ä»¶åªè´Ÿè´£ä¸€ä»¶äº‹ï¼šå°† my_lib.cpp å’Œç›¸å…³çš„å¤´æ–‡ä»¶ç¼–è¯‘æˆä¸€ä¸ªåº“ã€‚# æ–‡ä»¶ä½ç½®: src/my_lib/CMakeLists.txt</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cmake" data-lang="cmake"><span class="line"><span class="cl"><span class="c"># ä½¿ç”¨ add_library å‘½ä»¤åˆ›å»ºä¸€ä¸ªåº“ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"># è¯­æ³•: add_library(&lt;åº“åç§°&gt; [STATIC | SHARED] &lt;æºæ–‡ä»¶...&gt;)
</span></span></span><span class="line"><span class="cl"><span class="c">#
</span></span></span><span class="line"><span class="cl"><span class="c"># &lt;åº“åç§°&gt;: æˆ‘ä»¬ç§°ä¹‹ä¸º my_libï¼Œè¿™æ˜¯å…¶ä»–éƒ¨åˆ†é“¾æ¥æ­¤åº“æ—¶ä½¿ç”¨çš„åå­—ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"># STATIC:   ç”Ÿæˆé™æ€é“¾æ¥åº“ (.a, .lib)ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"># SHARED:   ç”ŸæˆåŠ¨æ€/å…±äº«é“¾æ¥åº“ (.so, .dll)ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c">#           å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤æ˜¯ STATICã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"># &lt;æºæ–‡ä»¶&gt;:  ç”¨äºç¼–è¯‘è¿™ä¸ªåº“çš„æºæ–‡ä»¶åˆ—è¡¨ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nb">add_library</span><span class="p">(</span><span class="s">my_lib</span> <span class="s">STATIC</span> <span class="s">my_lib.cpp</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># ä¸ºè¿™ä¸ªåº“ç›®æ ‡æŒ‡å®šå®ƒéœ€è¦åŒ…å«çš„å¤´æ–‡ä»¶ç›®å½•ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"># è¯­æ³•: target_include_directories(&lt;ç›®æ ‡&gt; &lt;PUBLIC|PRIVATE|INTERFACE&gt; &lt;è·¯å¾„...&gt;)
</span></span></span><span class="line"><span class="cl"><span class="c">#
</span></span></span><span class="line"><span class="cl"><span class="c"># &lt;ç›®æ ‡&gt;:    å°±æ˜¯æˆ‘ä»¬ä¸Šé¢ç”¨ add_library åˆ›å»ºçš„ my_libã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"># PUBLIC:   è¡¨ç¤ºæ­¤å¤´æ–‡ä»¶è·¯å¾„ä¸ä»… my_lib è‡ªå·±éœ€è¦ï¼Œä»»ä½•é“¾æ¥äº† my_lib çš„ç›®æ ‡ä¹Ÿéœ€è¦ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c">#           è¿™æ˜¯æœ€å…³é”®çš„è®¾ç½®ï¼Œå®ƒå®ç°äº†ä¾èµ–çš„è‡ªåŠ¨ä¼ é€’ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"># PRIVATE:  è¡¨ç¤ºæ­¤å¤´æ–‡ä»¶è·¯å¾„åªæœ‰ my_lib å†…éƒ¨ç¼–è¯‘æ—¶éœ€è¦ï¼Œä¸ä¼šä¼ é€’ç»™é“¾æ¥å®ƒçš„ç›®æ ‡ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"># INTERFACE:è¡¨ç¤ºæ­¤å¤´æ–‡ä»¶è·¯å¾„åªæœ‰é“¾æ¥å®ƒçš„ç›®æ ‡éœ€è¦ï¼Œmy_lib è‡ªå·±ç¼–è¯‘æ—¶ä¸éœ€è¦ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nb">target_include_directories</span><span class="p">(</span><span class="s">my_lib</span>
</span></span><span class="line"><span class="cl">  <span class="s">PUBLIC</span>
</span></span><span class="line"><span class="cl">    <span class="c"># ${PROJECT_SOURCE_DIR} æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å†…ç½®å˜é‡ï¼ŒæŒ‡å‘é¡¶å±‚ CMakeLists.txt æ‰€åœ¨çš„ç›®å½•ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"></span>    <span class="c"># æˆ‘ä»¬å°†é¡¹ç›®çš„å…¨å±€ include ç›®å½•æš´éœ²å‡ºå»ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"></span>    <span class="o">${</span><span class="nv">PROJECT_SOURCE_DIR</span><span class="o">}</span><span class="s">/include</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>add_library()</code> å®šä¹‰äº†ä¸€ä¸ªç¼–è¯‘ç›®æ ‡â€”â€”ä¸€ä¸ªåº“ã€‚</li>
<li><code>target_include_directories()</code> ä¸ºè¿™ä¸ªç›®æ ‡æŒ‡å®šäº†å¤´æ–‡ä»¶æœç´¢è·¯å¾„ã€‚ä½¿ç”¨ <code>PUBLIC </code>å…³é”®å­—è‡³å…³é‡è¦ä½¿å¾—ä»»ä½•é“¾æ¥åˆ° <code>my_lib</code> çš„ç¨‹åºéƒ½èƒ½è‡ªåŠ¨æ‰¾åˆ° my_lib.hï¼Œæ— éœ€åœ¨é“¾æ¥æ–¹å†æ¬¡æ‰‹åŠ¨æ·»åŠ å¤´æ–‡ä»¶è·¯å¾„ã€‚</li>
</ul>
<p>ç¬¬ 2 æ­¥: é¡¶å±‚çš„ CMakeLists.txt è¿™ä¸ªæ–‡ä»¶æ˜¯æ•´ä¸ªé¡¹ç›®çš„æ€»æŒ‡æŒ¥ï¼Œè´Ÿè´£è®¾ç½®å…¨å±€é…ç½®ã€è°ƒç”¨å­æ¨¡å—ï¼Œå¹¶ç”Ÿæˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cmake" data-lang="cmake"><span class="line"><span class="cl"><span class="c"># æ–‡ä»¶ä½ç½®: my_project/CMakeLists.txt
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># 1. æŒ‡å®š CMake çš„æœ€ä½ç‰ˆæœ¬è¦æ±‚ã€‚è¿™æ˜¯æ¯ä¸ªé¡¶å±‚æ–‡ä»¶éƒ½åº”è¯¥æœ‰çš„ç¬¬ä¸€è¡Œã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">3.10</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># 2. å®šä¹‰é¡¹ç›®ä¿¡æ¯ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"># è¯­æ³•: project(&lt;é¡¹ç›®åç§°&gt; VERSION &lt;ç‰ˆæœ¬å·&gt; LANGUAGES &lt;è¯­è¨€&gt;)
</span></span></span><span class="line"><span class="cl"><span class="c"># è¿™ä¼šåˆ›å»ºä¸€äº›æœ‰ç”¨çš„å˜é‡ï¼Œæ¯”å¦‚ PROJECT_NAME, PROJECT_SOURCE_DIRã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nb">project</span><span class="p">(</span><span class="s">MyApp</span> <span class="s">VERSION</span> <span class="s">1.0</span> <span class="s">LANGUAGES</span> <span class="s">CXX</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># 3. è®¾ç½® C++ æ ‡å‡† (è¿™æ˜¯ç°ä»£ CMake æ¨èçš„æ–¹å¼)ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD</span> <span class="s">17</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD_REQUIRED</span> <span class="s">ON</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_EXTENSIONS</span> <span class="s">OFF</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># 4. æ‰“å°ä¸€æ¡æ¶ˆæ¯ï¼Œæ–¹ä¾¿è°ƒè¯•æ—¶æŸ¥çœ‹å˜é‡å€¼ (å¯é€‰)ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nb">message</span><span class="p">(</span><span class="s">STATUS</span> <span class="s2">&#34;Project source directory is: ${PROJECT_SOURCE_DIR}&#34;</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># 5. æ·»åŠ å­ç›®å½•ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"># è¿™ä¸ªå‘½ä»¤ä¼šå‘Šè¯‰ CMake å»å¤„ç† src/my_lib ç›®å½•ä¸‹çš„ CMakeLists.txt æ–‡ä»¶ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"># å½“æ‰§è¡Œåˆ°è¿™é‡Œæ—¶ï¼Œä¸Šé¢å®šä¹‰çš„ my_lib åº“ç›®æ ‡å°±ä¼šè¢«åˆ›å»ºå‡ºæ¥ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">src/my_lib</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># 6. æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"># è¯­æ³•: add_executable(&lt;å¯æ‰§è¡Œæ–‡ä»¶å&gt; &lt;æºæ–‡ä»¶...&gt;)
</span></span></span><span class="line"><span class="cl"><span class="c"># æˆ‘ä»¬å°†ä¸»ç¨‹åºå‘½åä¸º appï¼Œå®ƒç”± src/main.cpp ç¼–è¯‘è€Œæ¥ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nb">add_executable</span><span class="p">(</span><span class="s">app</span> <span class="s">src/main.cpp</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># 7. é“¾æ¥åº“ï¼è¿™æ˜¯å°†æ‰€æœ‰éƒ¨åˆ†ç»„åˆåœ¨ä¸€èµ·çš„å…³é”®æ­¥éª¤ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"># è¯­æ³•: target_link_libraries(&lt;ç›®æ ‡&gt; &lt;PUBLIC|PRIVATE|INTERFACE&gt; &lt;è¦é“¾æ¥çš„åº“...&gt;)
</span></span></span><span class="line"><span class="cl"><span class="c">#
</span></span></span><span class="line"><span class="cl"><span class="c"># &lt;ç›®æ ‡&gt;: æˆ‘ä»¬è¦é“¾æ¥çš„ç›®æ ‡ï¼Œå³ appã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"># PRIVATE: è¡¨ç¤º app çš„ç¼–è¯‘éœ€è¦ my_libï¼Œä½†è¿™ä¸ªä¾èµ–å…³ç³»ä¸ä¼šç»§ç»­ä¼ é€’ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c">#          å¯¹äºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œé€šå¸¸ä½¿ç”¨ PRIVATEã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"># &lt;è¦é“¾æ¥çš„åº“&gt;: æˆ‘ä»¬åœ¨å­ç›®å½•ä¸­å®šä¹‰çš„åº“ç›®æ ‡ my_libã€‚
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">app</span> <span class="s">PRIVATE</span> <span class="s">my_lib</span><span class="p">)</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>add_subdirectory() ä½¿å¾—é¡¶å±‚æ–‡ä»¶ä¿æŒç®€æ´ï¼Œåªè´Ÿè´£â€œæŒ‡æŒ¥â€ï¼Œå…·ä½“å®ç°åˆ™äº¤ç»™å„ä¸ªå­æ¨¡å—ã€‚</li>
<li>target_link_libraries() è´Ÿè´£å°†ä¸åŒçš„ç¼–è¯‘ç›®æ ‡ï¼ˆåº“å’Œå¯æ‰§è¡Œæ–‡ä»¶ï¼‰é“¾æ¥åœ¨ä¸€èµ·ï¼Œå½¢æˆä¾èµ–å…³ç³»ã€‚</li>
</ul>
<ol start="4">
<li>å¦‚ä½•æ„å»ºé¡¹ç›® ğŸš€
ç°åœ¨å·²ç»å†™å¥½äº†æ‰€æœ‰çš„ CMakeLists.txt æ–‡ä»¶ï¼Œå¯ä»¥å¼€å§‹æ„å»ºäº†ã€‚æ•´ä¸ªè¿‡ç¨‹éƒ½åœ¨ç»ˆç«¯ä¸­å®Œæˆã€‚</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 1. ç¡®ä¿ä½ ä½äºé¡¹ç›®çš„æ ¹ç›®å½• (my_project)</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> path/to/my_project
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 2. åˆ›å»ºå¹¶è¿›å…¥æˆ‘ä»¬è§„åˆ’å¥½çš„ build ç›®å½•</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">mkdir build
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> build
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 3. è¿è¡Œ CMake æ¥ç”Ÿæˆæ„å»ºç³»ç»Ÿã€‚</span>
</span></span><span class="line"><span class="cl"><span class="c1"># &#39;..&#39; æŒ‡å‘ä¸Šä¸€çº§ç›®å½•ï¼Œä¹Ÿå°±æ˜¯ my_project/ æ ¹ç›®å½•ï¼ŒCMake ä¼šåœ¨é‚£é‡Œå¯»æ‰¾é¡¶å±‚çš„ CMakeLists.txtã€‚</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -DCMAKE_BUILD_TYPE=Debug æŒ‡å®šäº†æ„å»ºç±»å‹ä¸º Debugï¼Œä¼šåŒ…å«è°ƒè¯•ä¿¡æ¯ã€‚</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cmake -DCMAKE_BUILD_TYPE<span class="o">=</span>Debug ..
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># CMake ä¼šæ‰«æä½ çš„ç³»ç»Ÿï¼Œæ‰¾åˆ° C++ ç¼–è¯‘å™¨ï¼Œç„¶åæ ¹æ® CMakeLists.txt çš„å†…å®¹</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ç”Ÿæˆç‰¹å®šå¹³å°çš„æ„å»ºæ–‡ä»¶ï¼ˆåœ¨ Linux/macOS ä¸Šæ˜¯ Makefileï¼Œåœ¨ Windows ä¸Šæ˜¯ Visual Studio sln æ–‡ä»¶ï¼‰ã€‚</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 4. ç¼–è¯‘é¡¹ç›®</span>
</span></span><span class="line"><span class="cl"><span class="c1"># è¿™ä¸ªå‘½ä»¤ä¼šè°ƒç”¨åº•å±‚çš„æ„å»ºå·¥å…·ï¼ˆå¦‚ make æˆ– msbuildï¼‰æ¥æ‰§è¡ŒçœŸæ­£çš„ç¼–è¯‘å’Œé“¾æ¥å·¥ä½œã€‚</span>
</span></span><span class="line"><span class="cl"><span class="c1"># &#39;--build .&#39; æ˜¯ä¸€ä¸ªå¹³å°æ— å…³çš„å‘½ä»¤ï¼Œå‘Šè¯‰ CMake åœ¨å½“å‰ç›®å½•æ‰§è¡Œæ„å»ºã€‚</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cmake --build .
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æˆ–è€…åœ¨ Linux/macOS ä¸Šï¼Œä½ å¯ä»¥ç›´æ¥è¿è¡Œ:</span>
</span></span><span class="line"><span class="cl"><span class="c1"># make</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ç¼–è¯‘å®Œæˆåï¼Œä½ ä¼šåœ¨ build ç›®å½•ï¼ˆæˆ–å…¶å­ç›®å½•ï¼‰ä¸‹æ‰¾åˆ°ä½ çš„å¯æ‰§è¡Œæ–‡ä»¶ `app` å’Œåº“æ–‡ä»¶ `libmy_lib.a`ã€‚</span>
</span></span></code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:57770/tags/cmake-learning/">Cmake Learning</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:57770/blogs/functiontest/">
    <span class="title">Â« Prev</span>
    <br>
    <span>Functional Test of Hugo</span>
  </a>
  <a class="next" href="http://localhost:57770/blogs/git-rebase-flow/">
    <span class="title">Next Â»</span>
    <br>
    <span>How to Use git rebase</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share A Simple Cmake Example on x"
            href="https://x.com/intent/tweet/?text=A%20Simple%20Cmake%20Example&amp;url=http%3a%2f%2flocalhost%3a57770%2fblogs%2fsimple_cmake%2f&amp;hashtags=cmakeLearning">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share A Simple Cmake Example on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a57770%2fblogs%2fsimple_cmake%2f&amp;title=A%20Simple%20Cmake%20Example&amp;summary=A%20Simple%20Cmake%20Example&amp;source=http%3a%2f%2flocalhost%3a57770%2fblogs%2fsimple_cmake%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share A Simple Cmake Example on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a57770%2fblogs%2fsimple_cmake%2f&title=A%20Simple%20Cmake%20Example">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share A Simple Cmake Example on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a57770%2fblogs%2fsimple_cmake%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share A Simple Cmake Example on telegram"
            href="https://telegram.me/share/url?text=A%20Simple%20Cmake%20Example&amp;url=http%3a%2f%2flocalhost%3a57770%2fblogs%2fsimple_cmake%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
</ul>

  </footer><script src="https://giscus.app/client.js"
        data-repo="jamesnulliu/jamesnulliu.github.io"
        data-repo-id="R_kgDOMPCQIw"
        data-category="Announcements"
        data-category-id="DIC_kwDOMPCQI84Cgb2t"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
</article>
    </main>
    
<footer class="footer">
        <span>Â© 2024-2025 WITHER</span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
